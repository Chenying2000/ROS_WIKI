{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to 318 For full documentation visit mkdocs.org . Commands ROS Multi sensor fusion target detection SLAM reinforce learning Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to 318"},{"location":"#welcome-to-318","text":"For full documentation visit mkdocs.org .","title":"Welcome to 318"},{"location":"#commands","text":"ROS Multi sensor fusion target detection SLAM reinforce learning","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/","text":"ROS\u5b66\u4e60\u7b14\u8bb0 \u53c2\u8003\u8d44\u6599\uff1a B\u7ad9\u8d75\u865a\u5de6\uff1ahttps://www.bilibili.com/video/BV1Ci4y1L7ZZ?p=19&vd_source=a8e8676617fb04db42af59b530b145fd \u6240\u7528\u73af\u5883\uff1alinux20.04+ROS1 noetic demo\u6848\u4f8b\uff1a\u4f7f\u7528python\u5b9e\u73b0ROS\u7248\u672c\u7684hello world \uff08ROS\u5de5\u4f5c\u7a7a\u95f4\u53ca\u529f\u80fd\u5305\u521b\u5efa\u6d41\u7a0b\uff09 \u4e00\u3001ROS\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\u53ca\u529f\u80fd\u5305\u6d41\u7a0b\u603b\u7ed3\u6574\u7406\uff08python\uff09 1\u3001\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\uff1a \u9009\u53d6\u81ea\u5df1\u8ba1\u7b97\u673a\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u4f5c\u4e3a\u81ea\u5df1\u7684\u5de5\u4f5c\u7a7a\u95f4 mkdir -p demo_ws/src \u8fd9\u91cc\u7684demo_ws\u662f\u7b14\u8005\u5de5\u4f5c\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002\u4e00\u5b9a\u8981\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u8bbe\u7f6e\u4e8c\u7ea7\u5b50\u6587\u4ef6\u5939\u5e76\u547d\u540d\u4e3asrc\uff0c\u4f5c\u4e3a\u4ee3\u7801\u7a7a\u95f4\u7528\u4e8e\u5b58\u653e\u540e\u7eed\u7f16\u5199\u7684\u529f\u80fd\u5305\u6e90\u4ee3\u7801\uff0c\u540d\u5b57\u4e0d\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002 2\u3001\u7f16\u8bd1\u5de5\u4f5c\u7a7a\u95f4 catkin_make \u6b63\u5e38\u60c5\u51b5\u4e0b\u5c31\u53ef\u4ee5\u770b\u5230\u7ec8\u7aef\u8f93\u51fa\u4e00\u4e9b\u65e5\u5fd7\u5e76\u770b\u5230\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u51fa\u73b0build\u548cdevel\u4e24\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u5373\u7f16\u8bd1\u6210\u529f\u3002 \u4f46\u662f\u5bf9\u4e8e\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86anaconda\u7684\u7528\u6237\uff0c\u53ef\u80fd\u5b58\u5728\u4e0d\u6b62\u4e00\u4e2apython\u3002\u8fd9\u65f6\u5019\u5f88\u53ef\u80fd\u4f1a\u56e0\u4e3aROS\u548canaconda\u4e2dpython\u7248\u672c\u51b2\u7a81\u62a5\u9519\uff1aInvoking \u201ccmake\u201d failed\u3002\u51fa\u73b0\u8be5\u95ee\u9898\u7684\u7528\u6237\u53ea\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u6307\u540d\u6240\u7528\u7684python\u7248\u672c\uff08\u547d\u4ee4\u5982\u4e0b\uff09\u5373\u53ef\u6210\u529f\u7f16\u8bd1\u3002 catkin_make -DPYTHON_EXECUTABLE=/usr/bin/python3 3\u3001\u521b\u5efa\u529f\u80fd\u5305 \u8fdb\u5165src\u6587\u4ef6\u5939\u4e2d cd src \u521b\u5efa\u529f\u80fd\u5305 catkin_create_pkg helloworld roscpp rospy std_msgs helloworld\u662f\u529f\u80fd\u5305\u540d\uff0c\u529f\u80fd\u5305\u540d\u53ef\u81ea\u884c\u8bbe\u7f6e\uff0c\u540e\u9762\u9700\u8981\u8ddf\u4e0aroscpp\u3001rospy\u3001std-msgs\u8fd9\u4e9b\u5e38\u7528\u4f9d\u8d56\u3002\u5176\u4e2droscpp\u662f\u4f7f\u7528C++\u5b9e\u73b0\u7684\u5e93\uff0c\u800crospy\u5219\u662f\u4f7f\u7528python\u5b9e\u73b0\u7684\u5e93\uff0cstd_msgs\u662f\u6807\u51c6\u6d88\u606f\u5e93\uff0c\u521b\u5efaROS\u529f\u80fd\u5305\u65f6\uff0c\u4e00\u822c\u90fd\u4f1a\u4f9d\u8d56\u8fd9\u4e09\u4e2a\u5e93\u5b9e\u73b0\u3002 \u521b\u5efa\u6210\u529f\u540e\u53ef\u4ee5\u5728src\u76ee\u5f55\u4e0b\u770b\u5230\u4ee5\u529f\u80fd\u5305\u540d\u5b57\u547d\u540d\u7684\u6587\u4ef6\u5939\u548c\u914d\u7f6e\u6587\u4ef6CMakelist.txt. 4\u3001\u7f16\u8f91\u6e90\u6587\u4ef6 \uff081\uff09\u8fdb\u5165ROS\u529f\u80fd\u5305 cd helloworld \uff082\uff09\u6dfb\u52a0scripts\u76ee\u5f55 \u6211\u4eec\u540e\u7eed\u7684python\u6e90\u6587\u4ef6\u90fd\u5b58\u653e\u5728\u8be5scripts\u6587\u4ef6\u4e2d mkdir scripts \uff083\uff09\u65b0\u5efa\u4e00\u4e2apython\u6587\u4ef6 touch helloworld.py \u8fdb\u5165\u65b0\u5efa\u7684python\u6587\u4ef6\uff0c\u8f93\u5165python\u4ee3\u7801 #! /usr/bin/env python \"\"\" Python \u7248 HelloWorld \"\"\" #\u5bfc\u5305\uff1a import rospy #\u7f16\u5199\u4e3b\u5165\u53e3\uff1a if __name__ == \"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"Hello\") #\u8f93\u51fa\u65e5\u5fd7helloworld rospy.loginfo(\"Hello World!!!!\") \uff084\uff09\u4e3a python \u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650 chmod +x \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d.py chmod\u662flinux\u4e2d\u7528\u4e8e\u6539\u53d8\u6587\u4ef6\u6743\u9650\u7684\u547d\u4ee4\uff0c\u6587\u4ef6\u6709rwx\uff0c\u5373\u8bfb\u53d6\uff08r\uff09\u3001\u5199\u5165\uff08w\uff09\u3001\u6267\u884c\uff08x\uff09\u3002\u6211\u4eec\u540e\u9762\u9700\u8981\u6267\u884cpython\u6587\u4ef6\uff0c\u6240\u4ee5\u8fd9\u91cc\u9700\u8981\u6253\u5f00\u8be5\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002 5\u3001\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6CamkeList.txt 162\u2014165\u884c\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u628a\u81ea\u5b9a\u4e49\u6587\u4ef6\u540d\u586b\u5165\u3002\u8be5\u914d\u7f6e\u53ef\u4ee5\u4e3apython\u6587\u4ef6\u9009\u62e9\u5408\u9002\u7684\u89e3\u91ca\u5668\uff0cnoetic\u7248\u672c\u4e4b\u524d\u7684\u7528\u6237\u53ef\u80fd\u4e0d\u9700\u8981\u914d\u7f6e\u4e5f\u53ef\u4ee5\u6210\u529f\u8fd0\u884c\u3002 catkin_install_python(PROGRAMS scripts/\u81ea\u5b9a\u4e49\u6587\u4ef6\u540d.py DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION} ) 6\u3001\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u76ee\u5f55\u5e76\u7f16\u8bd1 cd \u81ea\u5b9a\u4e49\u7a7a\u95f4\u540d\u79f0 catkin_make 7\u3001\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u76ee\u5f55\u5e76\u6267\u884c \uff081\uff09\u5148\u542f\u52a8\u547d\u4ee4\u884c1\uff1a roscore roscore\u7528\u4e8e\u542f\u52a8ros\u6838\u5fc3\uff0c\u5728ros\u4e2d\uff0c\u6240\u6709\u7684\u8282\u70b9\u90fd\u662f\u4f9d\u8d56\u4e8eroscore \uff082\uff09\u518d\u542f\u52a8\u547d\u4ee4\u884c2\uff1a \u56de\u5230\u7f16\u8bd1\u7ed3\u675f\u7684\u7a97\u53e3\uff0c\u8fdb\u5165\u5f00\u53d1\u7a7a\u95f4\uff08devel\uff09\u6267\u884csetup.bash\uff0c\u8fd9\u4e00\u6b65\u662f\u4e3a\u4e86\u5237\u65b0\u73af\u5883\u53d8\u91cf\u3002 \u6267\u884c\u6587\u4ef6\u547d\u4ee4\uff1arosrun \u529f\u80fd\u5305\u540d \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d cd \u5de5\u4f5c\u7a7a\u95f4 source ./devel/setup.bash rosrun helloworld helloworld.py \u8f93\u51fa\u7ed3\u679c: Hello World!!!! \u4e8c\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u8bdd\u9898\u901a\u4fe1 1\u3001\u901a\u4fe1\u673a\u5236\u53ca\u76f8\u5173\u4ee3\u7801 import rospy from std_msgs.msg import String #\u53d1\u5e03\u6d88\u606f\u7c7b\u578b \"\"\" \u4f7f\u7528python\u5b9e\u73b0\u6d88\u606f\u7684\u53d1\u5e03\u65b9\u7684\u6d41\u7a0b: 1 \u5bfc\u5305 2 \u521d\u59cb\u5316ros\u8282\u70b9 3 \u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 4 \u7f16\u5199\u53d1\u5e03\u903b\u8f91\u5e76\u53d1\u5e03\u6570\u636e \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9(\u4f20\u5165\u8282\u70b9\u540d\u79f0\u5373\u53ef) rospy.init_node(\"huati\") #\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 pub = rospy.Publisher(\"secret\",String,queue_size=10) #\u7f16\u5199\u53d1\u5e03\u903b\u8f91\u5e76\u53d1\u5e03\u6570\u636e #\u521b\u5efa\u6570\u636e msg = String() #\u6307\u5b9a\u53d1\u5e03\u9891\u7387 rate = rospy.Rate(1)#\u5355\u4f4d\u662fHz #\u8bbe\u7f6e\u8ba1\u6570\u5668 count = 0 #\u4f7f\u7528\u6b7b\u5faa\u73af\u53d1\u5e03\u6570\u636e while not rospy.is_shutdown():#\u5224\u65adros\u8282\u70b9\u662f\u5426\u5173\u95ed\uff0c\u672a\u5173\u95ed\u5219\u8f93\u51fafalse\uff0c\u5173\u95edTRUE,\u8fd9\u91cc\u6ca1\u6709\u5173\u95ed\u7684\u65f6\u5019\u8fdb\u5165\u5faa\u73af\u4f53\u53d1\u5e03\u6570\u636e count +=1 msg.data = \"hello\"+str(count) #\u53d1\u5e03\u6570\u636e pub.publish(msg) #\u65e5\u5fd7\u8f93\u51fa rospy.loginfo(\"\u8bdd\u9898\u53d1\u5e03\u7684\u6570\u636e\u662f\uff1a%s\",msg.data) rate.sleep()#\u6839\u636e\u524d\u9762\u8bbe\u7f6e\u7684rate\uff0c\u4f11\u7720\u4e00\u5b9a\u65f6\u95f4\uff0c\u4f7f\u7a0b\u5e8f\u6309\u7167\u6307\u5b9a\u9891\u7387\u8f93\u51fa\u76f8\u5173\u6d88\u606f #\u663e\u793a\u8bdd\u9898\u53d1\u5e03\u4fe1\u606f\uff1arostopic echo secret\uff0c\u540e\u9762\u8fd9\u4e2a\u662f\u8bdd\u9898\u53d1\u5e03\u65b9\u7684\u540d\u5b57 #\u5bfc\u5305 import rospy from std_msgs.msg import String #\u5bfc\u5165\u6d88\u606f\u683c\u5f0f def doMsg(msg): rospy.loginfo(\"\u6211\u8ba2\u9605\u7684\u6570\u636e\uff1a%s\",msg.data) #\u7f16\u5199\u7a0b\u5e8f\u4e3b\u5165\u53e3 if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"huahua\") #\u521b\u5efa\u8ba2\u9605\u8005\u5bf9\u8c61 sub = rospy.Subscriber(\"secret\",String,doMsg,queue_size=10)#\u6ce8\u610f\u5927\u5199 #\u56de\u8c03\u51fd\u6570 #\u5728def doMsg rospy.spin()#ros\u6d88\u606f\u56de\u8c03\u5904\u7406\u51fd\u6570\uff0c\u52a0\u4e86\u8fd9\u4e2a\u8ba2\u9605\u65b9\u624d\u80fd\u6536\u5230\u6d88\u606f 2\u3001ros\u7684\u89e3\u8026\u5408\u673a\u5236\uff1a \u5373\u4f7f\u662f\u4e0d\u540c\u8bed\u8a00\u7f16\u5199\u7684\u8282\u70b9\u4e5f\u53ef\u4ee5\u4e92\u76f8\u901a\u4fe1\uff0c\u53ea\u8981\u4fdd\u8bc1\u53d1\u5e03\u65b9\u548c\u8ba2\u9605\u65b9\u4e4b\u95f4\u6709\u76f8\u540c\u7684\u8bdd\u9898\u5373\u53ef\u3002 3\u3001\u81ea\u5b9a\u4e49\u53d1\u5e03\u6d88\u606f\u7c7b\u578b\uff1a \u200b \u5728 ROS \u901a\u4fe1\u534f\u8bae\u4e2d\uff0c\u6570\u636e\u8f7d\u4f53\u662f\u4e00\u4e2a\u8f83\u4e3a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u5728\u4e0a\u4e00\u6848\u4f8b\u4e2d\uff0cROS \u4e2d\u901a\u8fc7 std_msgs \u5c01\u88c5\u4e86\u4e00\u4e9b\u539f\u751f\u7684\u6570\u636e\u7c7b\u578b,\u6bd4\u5982:String\u3001Int32\u3001Int64\u3001Char\u3001Bool\u3001Empty.... \u4f46\u662f\uff0c\u8fd9\u4e9b\u6570\u636e\u4e00\u822c\u53ea\u5305\u542b\u4e00\u4e2a data \u5b57\u6bb5\uff0c\u7ed3\u6784\u7684\u5355\u4e00\u610f\u5473\u7740\u529f\u80fd\u4e0a\u7684\u5c40\u9650\u6027\uff0c\u5f53\u4f20\u8f93\u4e00\u4e9b\u590d\u6742\u7684\u6570\u636e\uff0c\u6bd4\u5982: \u6fc0\u5149\u96f7\u8fbe\u7684\u4fe1\u606f... std_msgs \u7531\u4e8e\u63cf\u8ff0\u6027\u8f83\u5dee\u800c\u663e\u5f97\u529b\u4e0d\u4ece\u5fc3\uff0c\u8fd9\u79cd\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6d88\u606f\u7c7b\u578b \u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b\uff0c\u7c7b\u4f3cC\u8bed\u8a00\u4e2d\u7684\u7ed3\u6784\u4f53\uff0c\u5728\u6240\u7528\u5230\u7684\u6570\u636e\u7ed3\u6784\u8f83\u4e3a\u590d\u6742\u7684\u65f6\u5019\u4f7f\u7528\u3002 \u7ed3\u6784\u662f\uff1a\u6570\u636e\u7c7b\u578b \u6570\u636e\u540d\u79f0 \u6d41\u7a0b\uff1a \uff081\uff09\u65b0\u5efamsg\u6587\u4ef6 \u5728\u529f\u80fd\u5305\u4e2d\u65b0\u5efa\u4e00\u4e2amsg\u6587\u4ef6\uff0c\u5199\u4e0a\u6570\u636e\u7c7b\u578b\u548c\u6570\u636e\u540d\u79f0 string name uint16 age float64 height \uff082\uff09\u81ea\u5b9a\u4e49msg\u6587\u4ef6\u6240\u9700\u76f8\u5173\u914d\u7f6e \u2460\u521b\u5efa\u5b8c\u6210\u540e\u8fd8\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u9700\u8981\u5728package.xml\u4e2d\u505a\u76f8\u5e94\u914d\u7f6e\uff0c\u6dfb\u52a0\u4f9d\u8d56\u201cmessage_generation\u201d\u6d88\u606f\u751f\u6210\uff0c\u9700\u8981\u8fd0\u884c\uff0c\u6240\u4ee5\u9700\u8981\u5bfc\u5165message_runtime \u2461\u914d\u7f6eCMakelist \u6dfb\u52a0\u4f9d\u8d56\u5305\uff1amessage_generation \u8fd9\u91ccfind_package\u662f\u5728\u7f16\u8bd1\u81ea\u5b9a\u4e49\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u73b0\u6709\u529f\u80fd\u5305\uff0c\u5982\u679c\u8fd9\u91cc\u6dfb\u52a0\u7684\u4f9d\u8d56\u5305\u6709\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u5728\u7f16\u8bd1\u65f6\u62a5\u9519\u3002 \u6dfb\u52a0\u81ea\u5b9a\u4e49message\u6587\u4ef6\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u5c06\u793a\u4f8b\u6587\u4ef6\u540d\u6539\u4e3a\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u6587\u4ef6\u540d\u201cPerson.msg\u201c \u5c06generation message\u6ce8\u91ca\u653e\u5f00 \u653e\u5f00\u6ce8\u91ca\u5e76\u6dfb\u52a0message_runtime\u3002 \u8fd9\u91cc\u7684catkin_package\u4e0e\u524d\u6587\u4e2d\u7684find_package\u662f\u4e00\u79cd\u5bf9\u5e94\u5173\u7cfb\uff0c\u81ea\u5b9a\u4e49\u529f\u80fd\u5305\u4f9d\u8d56\u4e8efind_package\u4e2d\u7684\u529f\u80fd\u5305\uff0c\u800cfind-package\u4e2d\u7684\u529f\u80fd\u5305\u53c8\u4f9d\u8d56\u4e8ecatkin_package\u4e2d\u7684\u529f\u80fd\u5305 \u3002\u4ed6\u4eec\u4e4b\u95f4\u662f\u5c42\u5c42\u4f9d\u8d56\u7684\u5173\u7cfb\u3002\u5982\u679c\u8fd9\u91cc\u6dfb\u52a0\u7684\u4f9d\u8d56\u5305\u6709\u95ee\u9898\uff0c\u90a3\u4e48\u5373\u4f7f\u7f16\u8bd1\u901a\u8fc7\uff0c\u8fd0\u884c\u65f6\u53ef\u80fd\u4f9d\u7136\u4f1a\u51fa\u73b0\u62a5\u9519\u3002 \uff083\uff09\u7f16\u8bd1 ctrl+shift+B\u5373\u5f00\u59cb\u7f16\u8bd1\u529f\u80fd\u5305\uff0c\u672a\u629b\u51fa\u5f02\u5e38\u5373\u7f16\u8bd1\u6210\u529f \u7f16\u8bd1\u6210\u529f\u540e\u4f1a\u751f\u6210\u4e00\u4e9b\u4e2d\u95f4\u6587\u4ef6\uff0c\u6211\u4eec\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684\u5f00\u53d1\u7a7a\u95f4\uff08devel\u6587\u4ef6\u5939\uff09\uff0c\u53ef\u4ee5\u770b\u5230lib\u6587\u4ef6\u5939\u4e0bpython3\u6587\u4ef6\u5939\u4e2d\u751f\u6210\u4e86_Person.py\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542b\u4e86\u521a\u624d\u65b0\u5efa\u7684\u51e0\u4e2a\u91cf\uff0c\u540e\u7eed\u5c31\u53ef\u4ee5\u8c03\u7528\u3002 \u4e09\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u670d\u52a1\u901a\u4fe1 1\u3001\u670d\u52a1\u901a\u4fe1\u673a\u5236\u53ca\u793a\u610f\u56fe \u670d\u52a1\u901a\u4fe1\u9002\u7528\u4e8e\u5bf9\u5b9e\u65f6\u6027\u6709\u8981\u6c42\uff0c\u5177\u6709\u4e00\u5b9a\u903b\u8f91\u5904\u7406\u529f\u80fd\u7684\u5e94\u7528\u573a\u666f\u3002\u4ee5\u8bf7\u6c42\u76f8\u5e94\u7684\u6a21\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u4e00\u79cd\u901a\u4fe1\u65b9\u5f0f\u3002\u670d\u52a1\u901a\u4fe1\u548c\u8bdd\u9898\u901a\u4fe1\u7684\u533a\u522b\u5728\u4e8e\uff0c\u670d\u52a1\u901a\u4fe1\u662f\u8bf7\u6c42\u5e94\u7b54\u673a\u5236\uff0c\u5f53\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u670d\u52a1\u7aef\u624d\u4f1a\u53d1\u9001\u6570\u636e\uff0c\u800c\u8bdd\u9898\u901a\u4fe1\u662f\u8ba2\u9605\u540e\uff0c\u8ba2\u9605\u65b9\u88ab\u52a8\u63a5\u6536\u53d1\u5e03\u65b9\u6240\u6709\u4fe1\u606f\u3002\u4e14\u670d\u52a1\u901a\u4fe1\u673a\u5236\u662f\u53ef\u4ee5\u591a\u5bf9\u591a\u7684\u3002 \u670d\u52a1\u901a\u4fe1\u673a\u5236\u793a\u610f\u56fe\uff1a 2\u3001\u670d\u52a1\u901a\u4fe1\u5177\u4f53\u5b9e\u73b0\u6d41\u7a0b demo\uff1a\u5b9e\u73b0\u4e24\u4e2a\u6574\u578b\u6570\u76f8\u52a0\u6c42\u548c\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u4e24\u4e2a\u6574\u578b\u6570\uff0c\u670d\u52a1\u7aef\u5bf9\u5176\u6c42\u548c\u3002 \u200b \u670d\u52a1\u901a\u4fe1\u4e5f\u9700\u8981\u81ea\u5b9a\u4e49\u670d\u52a1\u6570\u636e\u7c7b\u578b\uff0c\u5373\u81ea\u5b9a\u4e49srv\u6587\u4ef6\uff0c\u8be5\u8fc7\u7a0b\u548c\u81ea\u5b9a\u4e49msg\u6587\u4ef6\u975e\u5e38\u7c7b\u4f3c\u3002\u4e3b\u8981\u5b9e\u73b0\u6d41\u7a0b\u5206\u4e3a\u4ee5\u4e0b\u4e09\u6b65\uff1a\u2460\u6309\u7167\u56fa\u5b9a\u683c\u5f0f\u521b\u5efasrv\u6587\u4ef6\u2461\u7f16\u8f91\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u2462\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 \u200b \u5f00\u59cb\u4e4b\u524d\u9996\u5148\u8981\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u7684src\u6587\u4ef6\u5939\u4e2d\u65b0\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\uff0c\u53ef\u4ee5\u7528catkin_create_pkg \u529f\u80fd\u5305\u540d \u4f9d\u8d56\uff0c\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u529f\u80fd\u5305\u3002\u8fd9\u91cc\u6211\u547d\u540d\u4e3aserver_client\u3002 \uff081\uff09\u6309\u7167\u56fa\u5b9a\u683c\u5f0f\u521b\u5efasrv\u6587\u4ef6 \u200b \u5728\u65b0\u5efa\u529f\u80fd\u5305server_client\u4e2d\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u547d\u540d\u4e3asrv,\u5728srv\u6587\u4ef6\u4e2d\u65b0\u5efa\u6587\u4ef6\u547d\u540d\u4e3aAddInts.srv\u7528\u4e8e\u5b58\u653e\u6211\u4eec\u7684\u6d88\u606f\u8f7d\u4f53\u3002 srv\u6587\u4ef6\u4e2d\u5b58\u653e\u7684\u53d8\u91cf\u7ed3\u6784\u4f53\u6309\u7167\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u7528---\u9694\u5f00 \uff082\uff09\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6package.xml\u548cCMakelist.txt \u2460\u9996\u5148\u7f16\u8f91package.xml\u6587\u4ef6 \u2461\u7f16\u8f91CMakelist.txt\u6587\u4ef6 \u6ce8\u610f\u4e0b\u9762\u8fd9\u4e2a\u4e0d\u540c\u4e8e\u8bdd\u9898\u901a\u4fe1\uff0c\u9700\u8981\u914d\u7f6esrv\u76f8\u5173\u90e8\u5206\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u628a\u6211\u4eec\u65b0\u5efa\u7684AddInts.srv\u66f4\u6362\u5230\u6587\u4ef6\u4e0b\u9762 \u5c06generate_messages\u6ce8\u91ca\u653e\u5f00\uff0c\u56e0\u4e3a\u8fd9\u91cc\u867d\u7136\u6211\u4eec\u7684\u901a\u4fe1\u6570\u636e\u683c\u5f0f\u662f\u81ea\u5b9a\u4e49\u7684\uff0c\u4f46\u662f\u5b83\u7684\u4ea7\u751f\u4f9d\u7136\u4f9d\u8d56\u4e8e\u6807\u51c6\u5305std_msgs \u653e\u5f00\u6ce8\u91cacatkin_packages\uff0c\u7c7b\u4f3c\u8bdd\u9898\u901a\u4fe1\uff0c\u8fd9\u91cc\u4e5f\u662f\u4e3a\u4e86\u6ee1\u8db3\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5230\u8fd9\u91cc\u5462\uff0c\u6211\u4eec\u7684\u914d\u7f6e\u5c31\u7ec8\u4e8e\u5b8c\u6210\u5566~\u63a5\u4e0b\u6765\u8fdb\u5165\u7f16\u8bd1\u73af\u8282 \uff083\uff09\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 ctrl+shift+B \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u7684\u7f16\u8bd1\u5e76\u672a\u629b\u51fa\u5f02\u5e38 \u5982\u679c\u8fd9\u91cc\u62a5\u9519\u201cInvoking \u201ccmake\u201dfailed\uff0c\u5f88\u6709\u53ef\u80fd\u662f\u5305\u540d\u5199\u9519\u5566\uff0c\u56de\u53bb\u68c0\u67e5\u4e00\u4e0b\u91cd\u65b0\u7f16\u8bd1\u5c31\u597d\u5566 \uff083\uff09\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u5df2\u7ecf\u5728\u5f00\u53d1\u7a7a\u95f4devel\u4e2d\u4ea7\u751f\u4e86\u4e00\u4e9b\u540e\u7eed\u88ab\u8c03\u7528\u5230\u7684\u6587\u4ef6\u3002\u8fd9\u6837\u6211\u4eec\u7684\u6570\u636e\u7ed3\u6784\u6587\u4ef6\u5c31\u914d\u7f6e\u597d\u5566~\u53ef\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b65\u7684\u5f00\u53d1\u54af \uff084\uff09\u81ea\u5b9a\u4e49srv\u6587\u4ef6\u7684\u8c03\u7528 \u6a21\u578b\u5b9e\u73b0\u4e2d\uff1arosmaster\u53ef\u4ee5\u901a\u8fc7roscore\u542f\u52a8\uff0c\u5efa\u7acb\u8fde\u63a5\u7684\u5177\u4f53\u8fc7\u7a0b\u5df2\u88ab\u5b98\u65b9\u5c01\u88c5\u597d \u6211\u4eec\u9700\u8981\u505a\u7684\u5de5\u4f5c\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u90e8\u5206\uff1a\u2460\u670d\u52a1\u7aef\u7a0b\u5e8f\u7f16\u5199\u2461\u5ba2\u6237\u7aef\u7a0b\u5e8f\u7f16\u5199\u2462\u6570\u636e VScode\u914d\u7f6e \u200b \u4f7f\u7528\u81ea\u5b9a\u4e49srv\u6587\u4ef6\u65f6\uff0c\u9700\u8981\u5bf9VScode\u8fdb\u884c\u4e00\u4e9b\u914d\u7f6e\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f7fVS\u63d0\u4f9b\u5bf9\u5e94\u7684\u8bed\u6cd5\u9ad8\u4eae\uff0c\u4fbf\u4e8e\u6211\u4eec\u7f16\u7a0b\uff0c\u4e5f\u80fd\u9632\u6b62VScode\u8bef\u629b\u5f02\u5e38\u3002\u4e0d\u914d\u7f6e\u4e5f\u4e0d\u5f71\u54cd\u4f7f\u7528\u3002 \u670d\u52a1\u7aef\u4ee3\u7801\u5b9e\u73b0 \u5b9a\u4f4d\u5230\u529f\u80fd\u5305\uff0c\u65b0\u5efa\u6587\u4ef6\u5939scripts\uff0c\u65b0\u5efa\u6587\u4ef6server.py \u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u7528\u5230\u7684\u51fd\u6570rospy.Service\uff08\u201d\u8bdd\u9898\u540d\u201c\uff0c\u6570\u636e\u7c7b\u578b\uff0c\u56de\u8c03\u51fd\u6570\uff09\uff0c\u8bdd\u9898\u540d\u81ea\u5b9a\u4e49\uff08\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff09\uff0c\u6570\u636e\u7c7b\u578b\u53d6\u51b3\u4e8esrv\u6587\u4ef6\u7684\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u56de\u8c03\u51fd\u6570\u81ea\u5df1\u7f16\u5199\u548cspin()\u6210\u5bf9\u51fa\u73b0\u3002 #! /usr/bin/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse #\u8fd9\u91cc\u53ef\u4ee5import*\uff0c\u4e0d\u7528\u5199\u6e05\u695a\u5177\u4f53\u7684\u7c7b\u548c\u5bf9\u8c61\uff0c\u8fd9\u6837\u4f1a\u628a\u8be5\u6587\u4ef6\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u5bfc\u5165\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u6587\u4ef6\u5927\u7684\u65f6\u5019\u8fd9\u6837\u5904\u7406\u4f1a\u53d8\u6162\u5f88\u591a \"\"\" \u670d\u52a1\u7aef\uff1a\u89e3\u6790\u5ba2\u6237\u9700\u6c42\uff0c\u4ea7\u751f\u54cd\u5e94 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u670d\u52a1\u7aef\u5bf9\u8c61 4\u3001\u6570\u636e\u5904\u7406\u903b\u8f91(\u56de\u8c03\u51fd\u6570) 5\u3001spin() \"\"\" #\u53c2\u6570\uff1a\u5c01\u88c5\u4e86\u8bf7\u6c42\u6570\u636e #\u8fd4\u56de\u503c\uff1a\u54cd\u5e94\u6570\u636e def doAdd(request): #\u89e3\u6790\u8bf7\u6c42\u63d0\u4ea4\u7684\u4e24\u4e2a\u6570\u5b57 num1 = request.num1 num2 = request.num2 #\u5bf9\u89e3\u6790\u51fa\u7684\u6570\u5b57\u8fdb\u884c\u6c42\u548c sum = num1+num2 #\u521b\u5efa\u54cd\u5e94\u5bf9\u8c61\uff0c\u5c06\u8fd4\u56de\u503c\u5c01\u88c5\u5165\u54cd\u5e94\u5bf9\u8c61 response = AddIntsResponse() response.sum = sum rospy.loginfo(\"\u670d\u52a1\u5668\u89e3\u6790\u7684\u6570\u636e\u662fnum1=%d,num2=%d,\u6c42\u548c\u7ed3\u679csum=%d\",num1,num2,sum) return response if __name__==\"__main__\": #\u521d\u59cb\u5316ROS\u8282\u70b9 rospy.init_node(\"fuwu\") #\u521b\u5efa\u670d\u52a1\u5bf9\u8c61,\u6ce8\u610f\u51fd\u6570\u5927\u5c0f\u5199,\u6570\u636e\u7c7b\u578b\u53d6\u51b3\u4e8esrv\u6587\u4ef6\u7684\u6587\u4ef6\u540d server = rospy.Service(\"addints\",AddInts,doAdd) rospy.loginfo(\"\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\u4e86\") rospy.spin() \u914d\u7f6eCMakelist.txt \u6539\u53d8\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650\uff0csource\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0crosrun\u8fd0\u884c\uff0c\u53ef\u4ee5\u770b\u5230\u670d\u52a1\u5668\u542f\u52a8\u4e86 \u5ba2\u6237\u7aef\u8fd8\u672a\u7f16\u5199\uff0c\u6211\u4eec\u8fd9\u91cc\u53ef\u4ee5\u7528\u547d\u4ee4\u6a21\u62df\u5ba2\u6237\u7aef\u6765\u6d4b\u8bd5\u670d\u52a1\u7aef\u7684\u529f\u80fd,call\u540e\u9762\u8981\u52a0\u81ea\u5b9a\u4e49\u7684\u5efa\u7acb\u901a\u4fe1\u94fe\u63a5\u7684\u8bdd\u9898\u540d,\u4e4b\u540e\u53ef\u4ee5tab\u952e\u81ea\u52a8\u8865\u9f50\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff0c\u624b\u52a8\u4fee\u6539\u6570\u636e\u5e76\u6267\u884c\u5373\u53ef\u6d4b\u8bd5\u3002 rosservice call addints \"num1:1,num2:2\" \u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0 \u5b9a\u4f4d\u5230\u529f\u80fd\u5305\uff0c\u65b0\u5efa\u6587\u4ef6\u5939scripts\uff0c\u65b0\u5efa\u6587\u4ef6client.py \u521b\u5efa\u5ba2\u6237\u5bf9\u8c61\u7528\u5230\u7684\u51fd\u6570rospy.ServiceProxy\uff08\u201d\u8bdd\u9898\u540d\u201c\uff0c\u6d88\u606f\u6570\u636e\u7c7b\u578b\uff09\uff0c\u8bdd\u9898\u540d\u548c\u670d\u52a1\u7aef\u4fdd\u6301\u4e00\u81f4\uff0c\u6570\u636e\u7c7b\u578b\u540c\u670d\u52a1\u7aef\uff0c\u53d6\u51b3\u4e8esrv\u6587\u4ef6\uff0c\u8fd9\u91cc\u662fAddInts\u3002 \u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\u8bf7\u6c42\uff1aclient.call(num1,num2) #! /usr/lib/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse \"\"\" 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 5\u3001\u5904\u7406\u54cd\u5e94 \"\"\" if __name__==\"__main__\": rospy.init_node(\"kehu\") #\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 client = rospy.ServiceProxy(\"addints\",AddInts) #\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 response = client.call(12,23) #\u5904\u7406\u54cd\u5e94,\u8fd9\u91cc\u76f4\u63a5\u6253\u5370\u4e00\u4e0b rospy.loginfo(\"\u54cd\u5e94\u6c42\u548c\u4e4b\u540e\u7684\u6570\u636e\u662f%d\",response.sum) \u7a0b\u5e8f\u6267\u884c\u7ed3\u679c \u4f18\u5316\u5b9e\u73b0\uff1a \u53ef\u4ee5\u5728\u6267\u884c\u8282\u70b9\u65f6\uff0c\u52a8\u6001\u4f20\u5165\u53c2\u6570 \u7528\u5230\u6a21\u5757sys\u4e2d\u7684argv\u3002\u8fd9\u4e2a\u53ef\u4ee5\u5305\u542b\u8282\u70b9\u540d\u79f0\u548c\u4f20\u5165\u7684\u6570\u636e #! /usr/lib/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse import sys \"\"\" 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 5\u3001\u5904\u7406\u54cd\u5e94 \u95ee\u9898\uff1a \u5f53\u5ba2\u6237\u7aef\u5148\u4e8e\u670d\u52a1\u7aef\u542f\u52a8\u65f6,\u7a0b\u5e8f\u4f1a\u629b\u51fa\u5f02\u5e38,\u4f46\u662fROS\u8282\u70b9\u5728\u542f\u52a8\u65f6\u662f\u6ca1\u6709\u5148\u540e\u987a\u5e8f\u7684,\u90a3\u4e48\u5728\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e9b\u95ee\u9898 \u89e3\u51b3\u65b9\u6848\uff1a \u5f53\u5ba2\u6237\u7aef\u5148\u4e8e\u670d\u52a1\u7aef\u542f\u52a8\u65f6\uff0c\u4e0d\u8981\u629b\u51fa\u5f02\u5e38\uff0c\u800c\u662f\u8981\u6302\u8d77\u7b49\u5f85\u3002\u7b49\u5f85\u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u518d\u6b21\u53d1\u9001\u8bf7\u6c42 \u5b9e\u73b0\u4ee3\u7801\uff1a ROS\u4e2d\u7684\u5185\u7f6e\u51fd\u6570\uff0c\u5224\u65ad\u670d\u52a1\u5668\u7684\u72b6\u6001\uff0c\u670d\u52a1\u7aef\u672a\u542f\u52a8\u65f6\u5ba2\u6237\u7aef\u6302\u8d77\u3002 \u6cd5\u4e00\uff1aclient.wait_for_service()\uff0c\u4e0d\u9700\u8981\u4f20\u5165\u8bdd\u9898\u540d\u79f0\uff0c\u5b83\u672c\u8eab\u53ef\u4ee5\u67e5\u627e\u8bdd\u9898\u540d \u6cd5\u4e8c\uff1arospy.wait_for_service(\"\u8bdd\u9898\")rospy\u9700\u8981\u4f20\u5165\u53c2\u6570\u8bdd\u9898\u540d\u79f0 \"\"\" if __name__==\"__main__\": #\u5224\u65ad\u53c2\u6570\u957f\u5ea6,\u7531\u4e8e\u8282\u70b9\u540d\u4e5f\u7b97\u4e00\u4e2a\u53c2\u6570\uff0cargv[0]\u662f\u8282\u70b9\u540d\uff0c\u6240\u4ee5\u8fd9\u91cc\u662f3 if len(sys.argv)!=3: rospy.logerr(\"\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u4e0d\u5bf9\") sys.exit(1) rospy.init_node(\"kehu\") #\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 client = rospy.ServiceProxy(\"addints\",AddInts) #\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42\uff0cargv[1]\u8fd9\u91cc\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9700\u8981\u5f3a\u884c\u5c06\u5176\u8f6c\u6362\u4e3aint\u7c7b\u578b num1 = int(sys.argv[1]) num2 = int(sys.argv[2]) #\u7b49\u5f85\u670d\u52a1\u5668\u542f\u52a8 #client.wait_for_service() #\u6cd5\u4e8c rospy.wait_for_service(\"addints\") response = client.call(num1,num2) #\u5904\u7406\u54cd\u5e94,\u8fd9\u91cc\u76f4\u63a5\u6253\u5370\u4e00\u4e0b rospy.loginfo(\"\u54cd\u5e94\u6c42\u548c\u4e4b\u540e\u7684\u6570\u636e\u662f%d\",response.sum) \u200b \u4ece\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c\u53ef\u4ee5\u52a8\u6001\u8f93\u5165num1\u548cnum2\uff0ccrtl C\u5173\u95ed\u670d\u52a1\u7aef\u540e\uff0c\u5148\u6267\u884c\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u800c\u662f\u4f1a\u6302\u8d77\u7b49\u5f85\uff0c\u5f00\u542f\u670d\u52a1\u7aef\u540e\u6b63\u5e38\u54cd\u5e94\u3002 \u56db\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u53c2\u6570\u670d\u52a1\u5668 \u200b \u53c2\u6570\u670d\u52a1\u5668\u5728ROS\u4e2d\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u5171\u4eab\u3002\u53c2\u6570\u670d\u52a1\u5668\u76f8\u5f53\u4e8e\u662f\u72ec\u7acb\u4e8e\u6240\u6709\u8282\u70b9\u7684\u4e00\u4e2a\u516c\u5171\u5bb9\u5668\uff0c\u53ef\u4ee5\u5c06\u6570\u636e\u5b58\u50a8\u5728\u8be5\u5bb9\u5668\u4e2d\uff0c\u88ab\u4e0d\u540c\u7684\u8282\u70b9\u8c03\u7528\uff0c\u5f53\u7136\u4e0d\u540c\u7684\u8282\u70b9\u4e5f\u53ef\u4ee5\u5f80\u5176\u4e2d\u5b58\u50a8\u6570\u636e\uff0c\u5173\u4e8e\u53c2\u6570\u670d\u52a1\u5668\u7684\u5178\u578b\u5e94\u7528\u573a\u666f\u5982\u4e0b: \u5bfc\u822a\u5b9e\u73b0\u65f6\uff0c\u4f1a\u8fdb\u884c\u8def\u5f84\u89c4\u5212\uff0c\u6bd4\u5982: \u5168\u5c40\u8def\u5f84\u89c4\u5212\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u4ece\u51fa\u53d1\u70b9\u5230\u76ee\u6807\u70b9\u7684\u5927\u81f4\u8def\u5f84\u3002\u672c\u5730\u8def\u5f84\u89c4\u5212\uff0c\u4f1a\u6839\u636e\u5f53\u524d\u8def\u51b5\u751f\u6210\u65f6\u65f6\u7684\u884c\u8fdb\u8def\u5f84\uff0c\u4e0a\u8ff0\u573a\u666f\u4e2d\uff0c\u5168\u5c40\u8def\u5f84\u89c4\u5212\u548c\u672c\u5730\u8def\u5f84\u89c4\u5212\u65f6\uff0c\u5c31\u4f1a\u4f7f\u7528\u5230\u53c2\u6570\u670d\u52a1\u5668\uff1a\u8def\u5f84\u89c4\u5212\u65f6\uff0c\u9700\u8981\u53c2\u8003\u5c0f\u8f66\u7684\u5c3a\u5bf8\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5c3a\u5bf8\u4fe1\u606f\u5b58\u50a8\u5230\u53c2\u6570\u670d\u52a1\u5668\uff0c\u5168\u5c40\u8def\u5f84\u89c4\u5212\u8282 \u70b9\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u8282\u70b9\u90fd\u53ef\u4ee5\u4ece\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8c03\u7528\u8fd9\u4e9b\u53c2\u6570 \u200b \u53c2\u6570\u670d\u52a1\u5668\uff0c\u4e00\u822c\u9002\u7528\u4e8e\u5b58\u5728\u6570\u636e\u5171\u4eab\u7684\u4e00\u4e9b\u5e94\u7528\u573a\u666f\u3002\u5b58\u50a8\u4e00\u4e9b\u591a\u8282\u70b9\u5171\u4eab\u7684\u6570\u636e\uff0c\u7c7b\u4f3c\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5168\u5c40\u53d8\u91cf\u3002 \u53c2\u6570\u670d\u52a1\u5668\u5b9e\u73b0\u662f\u6700\u4e3a\u7b80\u5355\u7684\uff0c\u8be5\u6a21\u578b\u5982\u4e0b\u56fe\u6240\u793a,\u8be5\u6a21\u578b\u4e2d\u6d89\u53ca\u5230\u4e09\u4e2a\u89d2\u8272: ROS Master (\u7ba1\u7406\u8005) Talker (\u53c2\u6570\u8bbe\u7f6e\u8005) Listener (\u53c2\u6570\u8c03\u7528\u8005) ROS Master \u4f5c\u4e3a\u4e00\u4e2a\u516c\u5171\u5bb9\u5668\u4fdd\u5b58\u53c2\u6570\uff0cTalker \u53ef\u4ee5\u5411\u5bb9\u5668\u4e2d\u8bbe\u7f6e\u53c2\u6570\uff0cListener \u53ef\u4ee5\u83b7\u53d6\u53c2\u6570\u3002 1\u3001\u53c2\u6570\u670d\u52a1\u5668\u7684\u65b0\u589e\u548c\u4fee\u6539 #! /usr/bin/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u670d\u52a1\u5668\u53c2\u6570\u7684\u65b0\u589e\u4e0e\u4fee\u6539 \u9700\u6c42\uff1a\u5728\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u673a\u5668\u4eba\u7684\u5c5e\u6027\u3001\u578b\u53f7\u3001\u534a\u5f84 \u6240\u7528\u51fd\u6570:rospy.set_param() \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ROS\u8282\u70b9 rospy.init_node(\"param_set\") #\u65b0\u589e\u53c2\u6570,\u952e\u503c\u5bf9\uff08\u7c7b\u4f3cpython\u5b57\u5178\u8bed\u6cd5\uff09 rospy.set_param(\"name\",\"car\") rospy.set_param(\"radius\",0.15) \u4e4b\u540e\u6b63\u5e38\u4fee\u6539\u914d\u7f6e\u6587\u4ef6CMakelist\uff0c\u589e\u52a0\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650\uff0cctrl+shift+B\u7f16\u8bd1\uff0c\u518dsourece\u540e\u6267\u884c\u6587\u4ef6\u5373\u53ef\u6267\u884c\u6210\u529f\uff0c\u7531\u4e8e\u8be5\u7a0b\u5e8f\u6ca1\u6709\u65e5\u5fd7\u8f93\u51fa\uff0c\u6240\u4ee5\u7ec8\u7aef\u6ca1\u6709\u4efb\u4f55\u663e\u793a\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7ros\u547d\u4ee4\u6765\u67e5\u770b\u6211\u4eec\u521a\u624d\u8bbe\u7f6e\u7684\u670d\u52a1\u5668\u53c2\u6570\u548c\u503c \u67e5\u770b\u53c2\u6570\u5217\u8868\uff1arosparam list \u83b7\u53d6\u53c2\u6570\u503c\uff1arosparam get \u952e\u540d \u4fee\u6539\u53c2\u6570\u53ea\u9700\u8981\u7528\u540c\u6837\u7684\u51fd\u6570\u8f93\u5165\u952e\u503c\u7136\u540e\u4f20\u5165\u65b0\u7684\u53c2\u6570\u5373\u53ef\u3002 2\u3001\u53c2\u6570\u670d\u52a1\u5668\u83b7\u53d6\u53c2\u6570\uff08\u53c2\u6570\u67e5\u8be2\uff09 \u53ef\u7528\u51fd\u6570\uff1a \uff081\uff09get_param(\u952e\uff0c\u9ed8\u8ba4\u503c)\u5f53\u8be5\u952e\u5b58\u5728\u65f6\u8fd4\u56de\u5b83\u7684\u503c\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u5b9a\u7684\u9ed8\u8ba4\u503c \uff082\uff09get_param_cached\uff0c\u548c\uff081\uff09\u76f8\u540c\uff0c\u4f46\u662f\u67e5\u8be2\u8fc7\u4f1a\u653e\u5728\u7f13\u5b58\u4e2d\uff0c\u4e0b\u6b21\u4e0d\u7528\u53cd\u590d\u5230\u670d\u52a1\u5668\u67e5\u8be2\uff0c\u6548\u7387\u66f4\u9ad8 \uff083\uff09get_param_names\u3002\u5217\u51fa\u5f53\u524d\u53c2\u6570\u5217\u8868\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u548c\u7cfb\u7edf\u81ea\u5e26\u7684 \uff084\uff09has_param\uff0c\u67e5\u8be2\u67d0\u4e2a\u53c2\u6570\u662f\u5426\u5b58\u5728\uff0c\u8fd4\u56debool\u7c7b\u578b\uff0c\u662f/\u5426 \uff085\uff09search_param\uff0c\u67e5\u8be2\u67d0\u4e2a\u53c2\u6570\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u5219\u8fd4\u56de\u952e\u540d #! /usr/lib/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u53c2\u6570\u7684\u67e5\u8be2 \u53ef\u7528\u51fd\u6570\uff1a get_param(\u952e\uff0c\u9ed8\u8ba4\u503c)\u5f53\u8be5\u952e\u5b58\u5728\u65f6\u8fd4\u56de\u5b83\u7684\u503c\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u5b9a\u7684\u9ed8\u8ba4\u503c get_param_cached get_param_names has_param search_param \"\"\" if __name__==\"__main__\": rospy.init_node(\"get_param\") radius = rospy.get_param(\"radius\",0.5) radius22 = rospy.get_param(\"radius22\",0.6) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius) rospy.loginfo(\"radius22\u7684\u503c\u662f%.2f\",radius22) #get_param_cached \u548cget_param\u529f\u80fd\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u4f46\u662fcached\u67e5\u8be2\u8fc7\u540e\u4f1a\u5c06\u7ed3\u679c\u653e\u5728\u7f13\u5b58\u91cc\uff0c\u4e0b\u6b21\u65e0\u9700\u5230\u670d\u52a1\u5668\u67e5\u8be2\uff0c\u6548\u7387\u66f4\u9ad8\u3002 radius = rospy.get_param_cached(\"radius\",0.5) radius22 = rospy.get_param_cached(\"radius22\",0.6) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius22) #get_param_names,\u5217\u51fa\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684\u53c2\u6570\u5217\u8868\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u548c\u7cfb\u7edf\u81ea\u5e26\u7684 # names = rospy.get_param_names() # for name in names: # rospy.loginfo = (\"name=%s\",name) #has_param,\u5224\u65ad\u8be5\u53c2\u6570\u662f\u5426\u5b58\u5728 flag1 = rospy.has_param(\"radius\") if flag1: rospy.loginfo(\"radius \u5b58\u5728\") else: rospy.loginfo(\"radius \u4e0d\u5b58\u5728\") #search_param,\u7528\u4e8e\u67e5\u8be2\u67d0\u4e2a\u5efa\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u5373\u8fd4\u56de\u952e\u7684\u540d\u79f0 key = rospy.search_param(\"radius\") rospy.loginfo(\"key = %s\",key) 3\u3001\u53c2\u6570\u670d\u52a1\u5668\u5220\u9664\u53c2\u6570 \u4f7f\u7528\u51fd\u6570\uff1arospy.delete_param(\"radius\") \u4f46\u662f\u53ea\u4f7f\u7528\u8fd9\u4e00\u53e5\u547d\u4ee4\u8fdb\u884c\u53c2\u6570\u5220\u9664\u65f6\uff0c\u5982\u679c\u91cd\u590d\u6267\u884c\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u8be5\u53c2\u6570\u4e0d\u5b58\u5728\u3002\u6545\u800c\u8fd9\u91cc\u7528try\uff1aexcept\uff0celse\u8bed\u53e5\u8fdb\u884c\u5904\u7406\uff0c\u5982\u679c\u5f02\u5e38\u5c31\u8f93\u51fa\u8be5\u53c2\u6570\u4e0d\u5b58\u5728\uff0c\u6267\u884c\u6210\u529f\u5373\u8f93\u51fa\u8be5\u53c2\u6570\u88ab\u6210\u529f\u5220\u9664\u3002 #! /usr/lib/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u53c2\u6570\u7684\u5220\u9664 \u51fd\u6570\uff1adelete_param() \"\"\" if __name__ == \"__main__\": rospy.init_node(\"delete_param\") try: rospy.delete_param(\"radius\") except Exception: rospy.loginfo(\"\u4e0d\u5b58\u5728\u8be5\u53c2\u6570\u6216\u8be5\u53c2\u6570\u5df2\u7ecf\u88ab\u5220\u9664\u8fc7\u4e86\") else: rospy.loginfo(\"\u53c2\u6570\u5220\u9664\u6210\u529f\uff01\") \u4e94\u3001ROS\u5e38\u7528\u547d\u4ee4 \u672c\u8282\u4e2d\u7684ros\u547d\u4ee4\u662f\u52a8\u6001\u7684\uff0c\u662f\u5728ros\u8282\u70b9\u542f\u52a8\u540e\u52a8\u6001\u7684\u83b7\u53d6\u5176\u76f8\u5173\u53c2\u6570\u4fe1\u606f\u7684\u65b9\u5f0f 1\u3001rosnode\uff1a\u64cd\u4f5c\u8282\u70b9 rosnode ping \u6d4b\u8bd5\u5230\u8282\u70b9\u7684\u8fde\u63a5\u72b6\u6001 rosnode list \u5217\u51fa\u6d3b\u52a8\u8282\u70b9 rosnode info \u6253\u5370\u8282\u70b9\u4fe1\u606f rosnode machine \u5217\u51fa\u6307\u5b9a\u8bbe\u5907\u4e0a\u8282\u70b9 rosnode kill \u6740\u6b7b\u67d0\u4e2a\u8282\u70b9 rosnode cleanup \u6e05\u9664\u4e0d\u53ef\u8fde\u63a5\u7684\u8282\u70b9\uff08ctrl+C\u9000\u51fa\u540e\uff0croscore\u5217\u8868\u4e2d\u4ecd\u7136\u5b58\u5728\uff0c\u8be5\u547d\u4ee4\u53ef\u4ee5\u6e05\u9664\u8fd9\u4e9b\u50f5\u5c38\u8282\u70b9\uff09 2\u3001rostopic rostopic bw \u8bdd\u9898\u540d \uff1a\u663e\u793a\u4e3b\u9898\u4f7f\u7528\u7684\u5e26\u5bbd rostopic delay \u8bdd\u9898\u540d \uff1a\u663e\u793a\u5e26\u6709 header \u7684\u4e3b\u9898\u5ef6\u8fdf rostopic echo \u8bdd\u9898\u540d\uff1a \u6253\u5370\u6d88\u606f\u5230\u5c4f\u5e55 rostopic find \u6839\u636e\u7c7b\u578b\u67e5\u627e\u4e3b\u9898 rostopic hz \u663e\u793a\u4e3b\u9898\u7684\u53d1\u5e03\u9891\u7387 rostopic info \u8bdd\u9898\u540d\uff1a \u663e\u793a\u4e3b\u9898\u76f8\u5173\u4fe1\u606f rostopic list \u663e\u793a\u6240\u6709\u6d3b\u52a8\u72b6\u6001\u4e0b\u7684\u4e3b\u9898 rostopic pub \u8bdd\u9898\u540d\uff1a\u5c06\u6570\u636e\u53d1\u5e03\u5230\u4e3b\u9898\uff0c\u81ea\u5b9a\u4e49\u6d88\u606f\u6309tab\u81ea\u52a8\u8865\u9f50\uff0c\u624b\u52a8\u586b\u5165\u76f8\u5173\u4fe1\u606f\u5373\u53ef\u53d1\u5e03 rostopic type \u6253\u5370\u4e3b\u9898\u7c7b\u578b 3\u3001rosmsg\uff1a rosmsg show \u5305\u540d/\u6d88\u606f\u540d\u79f0 \uff1a \u663e\u793a\u6d88\u606f\u63cf\u8ff0 rosmsg info \u5305\u540d/\u6d88\u606f\u540d\u79f0 \uff1a \u663e\u793a\u6d88\u606f\u4fe1\u606f rosmsg list \uff1a \u5217\u51fa\u6240\u6709\u6d88\u606f rosmsg list |grep -i \u6d88\u606f\u540d\uff1a\u4f7f\u7528\u7ba1\u9053\u5217\u51fa\u8be5\u6d88\u606f\u6587\u4ef6\u91cc\u7684\u6d88\u606f rosmsg md5 \u663e\u793a md5 \u52a0\u5bc6\u540e\u7684\u6d88\u606f rosmsg package \u663e\u793a\u67d0\u4e2a\u529f\u80fd\u5305\u4e0b\u7684\u6240\u6709\u6d88\u606f rosmsg packages \u5217\u51fa\u5305\u542b\u6d88\u606f\u7684\u529f\u80fd\u5305 4\u3001rosservice\uff1a rosservice args \u670d\u52a1\u540d\uff1a\u6253\u5370\u670d\u52a1\u53c2\u6570 rosservice call \u4f7f\u7528\u63d0\u4f9b\u7684\u53c2\u6570\u8c03\u7528\u670d\u52a1 rosservice find \u6309\u7167\u670d\u52a1\u7c7b\u578b\u67e5\u627e\u670d\u52a1 rosservice info \u5305\u540d/\u670d\u52a1\u540d\uff1a \u6253\u5370\u6709\u5173\u670d\u52a1\u7684\u4fe1\u606f rosservice list \u5217\u51fa\u6240\u6709\u6d3b\u52a8\u7684\u670d\u52a1 rosservice type \u6253\u5370\u670d\u52a1\u7c7b\u578b rosservice uri \u6253\u5370\u670d\u52a1\u7684 ROSRPC uri 5\u3001rosparam rosparam\u5305\u542brosparam\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u4f7f\u7528YAML\u7f16\u7801\u6587\u4ef6\u5728\u53c2\u6570\u670d\u52a1\u5668\u4e0a\u83b7\u53d6\u548c\u8bbe\u7f6eROS\u53c2\u6570\u3002 rosparam set \u8bbe\u7f6e\u53c2\u6570 rosparam get \u83b7\u53d6\u53c2\u6570 rosparam load \u4ece\u5916\u90e8\u6587\u4ef6\u52a0\u8f7d\u53c2\u6570 rosparam dump \u5c06\u53c2\u6570\u5199\u51fa\u5230\u5916\u90e8\u6587\u4ef6 rosparam delete \u5220\u9664\u53c2\u6570 rosparam list \u5217\u51fa\u6240\u6709\u53c2\u6570 \u516d\u3001ROS\u901a\u4fe1\u673a\u5236\u5b9e\u64cd\u6848\u4f8b\uff1a demo 01 \u63a7\u5236\u5c0f\u4e4c\u9f9f\u505a\u5706\u5468\u8fd0\u52a8 1\u3001\u6b63\u5e38\u542f\u52a8\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8282\u70b9\uff1a roscore\u2014\u2014rosrun turtlesim turtlesim_node\u2014\u2014rosrun turtlesim turtle_teleop_key 2\u3001\u7528ros\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u8bdd\u9898\u540d\u548c\u6d88\u606f\u7c7b\u578b\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b65\u81ea\u884c\u7f16\u7801\u5b8c\u6210\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8 \uff081\uff09rostopic list\u67e5\u770b\u5f53\u524d\u8bdd\u9898\u540d\u79f0\uff0crqt_graph\u67e5\u770b\u8ba1\u7b97\u56fe\u7684\u7ed3\u6784\uff0c\u53ef\u4ee5\u770b\u5230\u8bdd\u9898\u540d \u770b\u5230\u5f53\u524d\u4e24\u4e2a\u8282\u70b9\u901a\u4fe1\u7684\u8bdd\u9898\u662f/turtle1/cmd_vel \uff082\uff09\u83b7\u53d6\u8bdd\u9898\u7684\u6d88\u606f\u7c7b\u578b rostopic info rostopic type (3)\u83b7\u53d6\u6d88\u606f\u683c\u5f0f rosmsg show/info \u7ebf\u901f\u5ea6\u89d2\u901f\u5ea6\u7684\u542b\u4e49\u4e5f\u8bb2\u4e86 \uff084\uff09\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u5b8c\u5168\u7c7b\u4f3c\u8bdd\u9898\u53d1\u5e03\u65b9\u7a0b\u5e8f\u7684\u7f16\u5199 #! /usr/bin/env python import rospy from geometry_msgs.msg import Twist \"\"\" \u53d1\u5e03\u65b9\uff1a \u9700\u8981\u83b7\u53d6\u8bdd\u9898\u540d\u548c\u6d88\u606f\u7c7b\u578b \u8bdd\u9898\uff1a/turtle1/cmd_vel \u6d88\u606f\u7c7b\u578b:geometry/Twist \"\"\" if __name__==\"__main__\": rospy.init_node(\"control\") #\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 pub = rospy.Publisher(\"/turtle1/cmd_vel\",Twist,queue_size=10) #\u7ec4\u7ec7\u5e76\u53d1\u5e03\u6570\u636e #\u8bbe\u7f6e\u53d1\u5e03\u9891\u7387 rate = rospy.Rate(10) #\u521b\u5efa\u901f\u5ea6\u6d88\u606f twist = Twist() twist.angular.z = 1 twist.angular.x = 0 twist.angular.y = 0 twist.linear.x = 1 twist.linear.y = 0 twist.linear.z = 0 #\u5faa\u73af\u53d1\u5e03\u6570\u636e while not rospy.is_shutdown(): pub.publish(twist) rate.sleep() demo 02 \u8ba2\u9605\u4e4c\u9f9f\u7684\u4f4d\u59ff \u5b8c\u5168\u7c7b\u4f3c\u8bdd\u9898\u8ba2\u9605\u65b9\u7a0b\u5e8f\u7684\u7f16\u5199 #! /usr/bin/env python import rospy from turtlesim.msg import Pose \"\"\" \u9700\u6c42\uff1a\u8ba2\u9605\u8f93\u51fa\u4e4c\u9f9f\u4f4d\u8d44 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f 5\u3001spin \"\"\" def sub_pose(pose): rospy.loginfo(\"\u4e4c\u9f9f\u4f4d\u59ff\u4fe1\u606f\uff1a\u5750\u6807\uff08%.2f,%.2f\uff09,\u671d\u5411\uff1a%.2f\uff0c\u7ebf\u901f\u5ea6\uff1a%.2f\uff0c\u89d2\u901f\u5ea6\uff1a%.2f\u3002\",pose.x,pose.y,pose.theta,pose.linear_velocity,pose.angular_velocity) if __name__==\"__main__\": rospy.init_node(\"subpose\") sub = rospy.Subscriber(\"/turtle1/pose\",Pose,sub_pose,queue_size = 100) rospy.spin() \u5728\u8fd9\u91cc\u7f16\u5199\u7a0b\u5e8f\u6709\u4e00\u4e2a\u8bef\u533a\uff0c\u8bef\u4ee5\u4e3a\u8fd9\u4e2a\u662f\u548c\u52a8\u4f5c\u53d1\u5e03\u65b9\u76f4\u63a5\u901a\u4fe1\u7684\uff0c\u6240\u4ee5\u8bdd\u9898\u4e00\u5f00\u59cb\u91c7\u7528/turtle1/cmd_vel\u65f6\u4e00\u76f4\u62a5\u9519\uff0c\u540e\u6765\u53d1\u73b0\u8fd9\u4e2a\u662f\u8ba2\u9605\u4e86/turtle1/pose\u8bdd\u9898\uff0c\u8f93\u51farqt\u56fe\u5c31\u53ef\u4ee5\u975e\u5e38\u6e05\u6670\u7684\u770b\u5230\u8fd9\u4e9b\u8282\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\u3002 demo 03 \u901a\u8fc7\u670d\u52a1\u901a\u4fe1\u5b9e\u73b0\u5728\u6307\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f \uff081\uff09\u4f7f\u7528rosservice list\u547d\u4ee4\u83b7\u53d6\u5f53\u524d\u5b58\u5728\u7684\u670d\u52a1\u5217\u8868\uff0c/spawn\u662f\u751f\u6210\u4e4c\u9f9f\u7684\u670d\u52a1 \uff082\uff09\u4f7f\u7528rosservice info spawn\u53ef\u4ee5\u770b\u5230\u8be5\u670d\u52a1\u7684\u4e00\u4e9b\u7ec6\u8282\u4fe1\u606f \u53ef\u4ee5\u770b\u5230\u2460/turtlesim\u8282\u70b9\u63d0\u4f9b\u4e86\u8be5\u670d\u52a1\u2461URI\u2462\u670d\u52a1\u7684\u6d88\u606f\u7c7b\u578b\uff08\u91cd\u8981\uff09\u2463\u670d\u52a1\u7684\u53c2\u6570\uff08xy\u5750\u6807\u4f4d\u7f6e\uff0c\u89d2\u5ea6\uff0c\u540d\u5b57\uff09 \uff083\uff09\u8c03\u7528rossrv info/show \u6d88\u606f\u7c7b\u578b\u540d\uff0c\u67e5\u770b\u8be5\u6d88\u606f\u7c7b\u578b\u7684\u5177\u4f53\u4fe1\u606f\u683c\u5f0f \uff084\uff09\u901a\u8fc7\u547d\u4ee4\u7684\u65b9\u5f0f\u8c03\u7528\u670d\u52a1\u5e76\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f rosservice call \u670d\u52a1\u540d\u5b57 tab\u952e\u8865\u9f50\u4f1a\u663e\u793a\u9700\u8981\u8f93\u5165\u670d\u52a1\u8bf7\u6c42\u53c2\u6570 rosservice call /spawn \uff085\uff09\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u8c03\u7528\u670d\u52a1\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f #! /usr/bin/env python import rospy from turtlesim.srv import Spawn,SpawnRequest,SpawnResponse \"\"\" \u9700\u6c42\uff1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u751f\u6210\u4e00\u53ea\u5c0f\u4e4c\u9f9f \u8bdd\u9898\uff1aspawn \u6d88\u606f\u7c7b\u578b\uff1a/turtlesim/Spawn \"\"\" #\u7f16\u5199\u4e3b\u5165\u53e3 if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"generate_turtle\") #\u521b\u5efa\u8bf7\u6c42\u5bf9\u8c61 client_gene = rospy.ServiceProxy(\"/spawn\",Spawn) #\u7ec4\u7ec7\u6570\u636e\u5e76\u53d1\u9001\u8bf7\u6c42 request = SpawnRequest() request.x = 3.0 request.y = 9.0 request.theta = 0.9 request.name = \"littleturtle2\" #\u5224\u65ad\u670d\u52a1\u7aef\u662f\u5426\u5f00\u542f\uff0c\u672a\u5f00\u542f\u5219\u6302\u8d77\u7b49\u5f85 client_gene.wait_for_service() try: reponse = client_gene.call(request) #\u5904\u7406\u54cd\u5e94\u7ed3\u679c rospy.loginfo(\"\u751f\u6210\u4e4c\u9f9f\u7684\u540d\u5b57\u53eb\uff1a%s\",reponse.name) except: rospy.logerr(\"\u8bf7\u6c42\u5931\u8d25\uff01\u91cd\u590d\u6267\u884c\u6216\u5176\u4ed6\u5f02\u5e38\") demo 04 \u4fee\u6539\u80cc\u666f\u53c2\u6570 \uff081\uff09\u901a\u8fc7ros\u547d\u4ee4\u7684\u65b9\u5f0f\u4fee\u6539 rosparam list rosparam get rosparam set \uff082\uff09\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u5b9e\u73b0 #! /usr/bin/env python import rospy \"\"\" \u9700\u6c42\uff1a\u4fee\u6539\u4e4c\u9f9fgui\u80cc\u666f\u8272 1\u3001\u521d\u59cb\u5316ros\u8282\u70b9 2\u3001\u8bbe\u7f6e\u53c2\u6570 \"\"\" if __name__==\"__main__\": rospy.init_node(\"set_param\") rospy.set_param(\"/turtlesim/background_r\",10) rospy.set_param(\"/turtlesim/backgroung_g\",200) rospy.set_param(\"/turtlesim/background_b\",40) \u5e38\u7528API\u4ecb\u7ecd 1\u3001rospy.init_node() 2\u3001rospy.Publisher()\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 3\u3001spin\uff08\uff09\u56de\u65cb\u51fd\u6570\uff1a\u8fdb\u5165\u5faa\u73af\uff0c\u5728\u5faa\u73af\u4e2d\u5904\u7406\u56de\u8c03\u51fd\u6570 4\u3001\u65f6\u95f4\u76f8\u5173\u7684API 5\u3001\u8282\u70b9\u5173\u95ed\u76f8\u5173\u7684API \u81ea\u5b9a\u4e49python\u6a21\u5757\u7684\u5bfc\u5165 \u9700\u8981\u81ea\u5df1\u5bfc\u5165\u4e34\u65f6\u73af\u5883\u53d8\u91cf\uff0c\u6307\u660e\u65b0\u589e\u6587\u4ef6\u7684\u8def\u5f84\u3002 \u4e03\u3001ROS\u8fd0\u884c\u7ba1\u7406 ros\u662f\u591a\u8fdb\u7a0b\u7684\u5206\u5e03\u5f0f\u6846\u67b6 1\u3001\u5143\u529f\u80fd\u5305 \u200b \u5c06\u5b9e\u73b0\u67d0\u4e00\u529f\u80fd\u7684\u5177\u6709\u5185\u5728\u903b\u8f91\u8054\u7cfb\u7684\u4e00\u4e9b\u529f\u80fd\u5305\u6253\u5305\u5728\u4e00\u8d77\u6210\u4e3a\u5143\u529f\u80fd\u5305\u3002\u5143\u529f\u80fd\u5305\u53ef\u4ee5\u65b9\u4fbf\u7528\u6237\u7684\u4f7f\u7528\uff0c\u5b89\u88c5\u65f6\u53ef\u4ee5\u5c06\u5176\u4ed6\u6253\u5305\u7684\u76f8\u5173\u529f\u80fd\u5305\u4e00\u5e76\u4e0b\u8f7d\u3002\uff08\u6ce8\u610f\u5143\u529f\u80fd\u5305\u7684\u64cd\u4f5c\u5bf9\u8c61\u662f\u4e0d\u540c\u7684\u529f\u80fd\u5305\uff09 \uff081\uff09\u65b0\u5efa\u529f\u80fd\u5305\uff1a\u81ea\u5b9a\u4e49\u547d\u540d\u5373\u53ef\uff0c\u7531\u4e8e\u5143\u529f\u80fd\u5305\u662f\u4e00\u4e2a\u7a7a\u5305\u65e0\u9700\u6dfb\u52a0\u4f9d\u8d56 \uff082\uff09\u4fee\u6539package.xml\u6587\u4ef6 \u6dfb\u52a0\u53ef\u6267\u884c\u4f9d\u8d56\uff0c\u5982\u56fe\u6240\u793a\u53ef\u4ee5\u5728\u6ce8\u91ca\u91cc\u590d\u5236\u4e00\u4e2a \u5c06\u58f0\u660e\u4f9d\u8d56\u7684\u5305\u6362\u6210\u51c6\u5907\u6253\u5305\u5728\u4e00\u8d77\u7684\u5404\u4e2a\u529f\u80fd\u5305\u540d\u5e76\u6dfb\u52a0\u865a\u62df\u5143\u5305\\ \u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5305\u5173\u8054\u8d77\u6765 \uff083\uff09\u4fee\u6539CMakelist.txt\u6587\u4ef6 \u4fdd\u7559\u7ea2\u6846\u4e2d\u7684\u4e09\u884c\uff0c\u5176\u4f59\u5185\u5bb9\u4ee5\u53ca\u6ce8\u91ca\u5168\u90e8\u5220\u6389 \u6dfb\u52a0\u5143\u529f\u80fd\u5305\u90e8\u5206\uff0c\uff08\u6ce8\u610f\u8fd9\u51e0\u884c\u4e4b\u95f4\u4e0d\u80fd\u6709\u4efb\u4f55\u7a7a\u884c\uff09 \u7f16\u8bd1\u5373\u53ef\u5b8c\u6210 2\u3001launch\u6587\u4ef6\uff08ros\u8282\u70b9\u7ba1\u7406\uff09 launch\u6587\u4ef6\u662fxml\u683c\u5f0f\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u542f\u52a8\u591a\u4e2a\u529f\u80fd\u8282\u70b9\u3002 \u4ee5\u952e\u76d8\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u4e3a\u4f8b\u7684\u5b9e\u73b0\u6b65\u9aa4\uff1a \uff081\uff09\u5728src\u6587\u4ef6\u4e2d\u65b0\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\uff0c\u547d\u540d\u4e3alaunch01\uff0c\u5e76\u6dfb\u52a0\u4f9d\u8d56turtlesim rospy roscpp std_msgs \uff082\uff09\u5728\u8be5\u529f\u80fd\u5305\u4e2d\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e00\u822c\u5c31\u547d\u540d\u4e3alaunch \uff083\uff09\u5728launch\u6587\u4ef6\u5939\u4e2d\u65b0\u5efa\u4e00\u4e2a\u4ee5.launch\u4e3a\u540e\u7f00\u540d\u7684\u6587\u4ef6\uff0c\u8fd9\u91cc\u547d\u540d\u4e3astartturtle.launch \uff084\uff09\u7f16\u8f91.launch\u6587\u4ef6\u7684\u5185\u5bb9\uff1a\u6839\u6807\u7b7e\\ \uff0c\u5b50\u7ea7\u6807\u7b7e\u662f\u9700\u8981\u4e00\u8d77\u542f\u52a8\u7684\u8282\u70b9\u540d \uff085\uff09source\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528\u547d\u4ee4\uff1aroslaunch \u529f\u80fd\u5305\u540d .launch\u6587\u4ef6\u540d \u6267\u884c\u6587\u4ef6\u5373\u53ef \u6ce8\u610f\uff1aroslaunch\u4f1a\u4e3b\u52a8\u5224\u65ad\u662f\u5426\u542f\u52a8roscore\uff0c\u672a\u542f\u52a8\u4f1a\u81ea\u52a8\u542f\u52a8roscore\uff0c\u6240\u4ee5\u65e0\u9700\u624b\u52a8\u542f\u52a8 3\u3001launch\u6807\u7b7e\u77e5\u8bc6\u70b9\u603b\u7ed3\u5f52\u7eb3 \uff081\uff09deprecated\u6807\u7b7e\uff1a\u8f93\u51fa\u8fc7\u65f6\u8b66\u544a\uff0c\u8be5launch\u6587\u4ef6\u4e0d\u5efa\u8bae\u7ee7\u7eed\u4f7f\u7528\uff0c\u53ef\u4ee5\u627e\u65b0\u7248\u672c\u7684 \uff082\uff09node\u6807\u7b7e\uff1a\u7528\u4e8e\u6307\u5b9aros\u8282\u70b9\uff0c\u4f46\u7531\u4e8e\u8282\u70b9\u542f\u52a8\u662f\u591a\u8fdb\u7a0b\u7684\uff0c\u6267\u884c\u65f6\u672a\u5fc5\u6309\u7167node\u6807\u7b7e\u7684\u58f0\u660e\u987a\u5e8f\u8fdb\u884c\u542f\u52a8 \uff083\uff09include\u6807\u7b7e\uff1a\u7528\u4e8e\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\uff0c\u5c06\u53e6\u4e00\u4e2axml\u683c\u5f0f\u7684launch\u6587\u4ef6\u5bfc\u5165\u5230\u5f53\u524d\u6587\u4ef6 <include file=\"$(find \u88ab\u590d\u7528\u6587\u4ef6\u6240\u5728\u529f\u80fd\u5305\u540d)/launch/\u88ab\u590d\u7528\u6587\u4ef6\u540d\"/> \uff084\uff09remap\u6807\u7b7e\uff1a\u7528\u4e8e\u8bdd\u9898\u91cd\u547d\u540d\uff0c\u66f4\u6539\u67d0\u8282\u70b9\u8ba2\u9605\u7684\u8bdd\u9898\u540d\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u7075\u6d3b\u901a\u4fe1 \uff085\uff09param\u6807\u7b7e\uff1a\u4e3a\u53c2\u6570\u670d\u52a1\u5668\u8bbe\u7f6e\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5168\u5c40\u53c2\u6570\uff08launch\u91cc\uff0cnode\u5916\uff09\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u5185\u7684\u53c2\u6570\uff08node\u6807\u7b7e\u91cc\uff09 \uff086\uff09rosparam\u6807\u7b7e\uff1a\u4e3b\u8981\u662f\u4eceyaml\u6587\u4ef6\u4e2d\u5bfc\u5165\u53c2\u6570 \uff087\uff09group\u6807\u7b7e\uff1a\u4e3aros\u8282\u70b9\u5206\u7ec4\uff0c\u6bd4\u5982\u5f53\u60f3\u542f\u52a8\u4e24\u5957\u4e00\u6837\u7684\u8282\u70b9\u65f6\uff0c\u4e3a\u4e86\u9632\u6b62\u91cd\u540d\u95ee\u9898\uff0c\u53ef\u4ee5\u8fdb\u884c\u5206\u7ec4 \uff088\uff09arg\u6807\u7b7e\uff1a\u4f20\u53c2\uff0c\u5c01\u88c5\u53c2\u6570\u503c\uff0c\u516c\u7528\u4e00\u4e2a\u53d8\u91cf\u65f6\u53ef\u4ee5\u91cd\u590d\u4f20\u53c2\uff08\u5b8f\u5b9a\u4e49\uff09 4\u3001ROS\u4e2d\u7684\u91cd\u540d\u95ee\u9898 \uff081\uff09\u5de5\u4f5c\u7a7a\u95f4\u8986\u76d6\uff08\u529f\u80fd\u5305\u91cd\u540d\uff09 \u5728\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\u91cd\u540d\u7684\u529f\u80fd\u5305\u65f6\uff0c\u540e\u5237\u65b0\u7684\u73af\u5883\u53d8\u91cf\u8d77\u4f5c\u7528\u3002 \u89e3\u51b3\u65b9\u5f0f\u53ef\u4ee5\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6216\u8005\u8d77\u522b\u540d\uff08\u540d\u79f0\u91cd\u6620\u5c04\uff09 \uff082\uff09ROS\u8282\u70b9\u540d\u79f0\u91cd\u540d \u200b \u547d\u540d\u7a7a\u95f4\u5c31\u662f\u4e3a\u540d\u79f0\u6dfb\u52a0\u524d\u7f00\uff0c\u540d\u79f0\u91cd\u6620\u5c04\u662f\u4e3a\u540d\u79f0\u8d77\u522b\u540d\u3002\u8fd9\u4e24\u79cd\u7b56\u7565\u90fd\u53ef\u4ee5\u89e3\u51b3\u8282\u70b9\u91cd\u540d\u95ee\u9898\uff0c\u4e24\u79cd\u7b56\u7565\u7684\u5b9e\u73b0\u9014\u5f84\u6709\u591a\u79cd: rosrun \u547d\u4ee4 \u2460\u547d\u540d\u7a7a\u95f4__ns:=xx \u901a\u8fc7\u540e\u9762ns\u540d\u79f0\u4e0d\u540c\u533a\u5206\uff0c\u4ece\u800c\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a\u8282\u70b9 rosrun turtlesim turtlesim_node __ns:=mingcheng \u2461\u540d\u79f0\u91cd\u6620\u5c04\uff08\u8d77\u522b\u540d\uff09 rosrun turtlesim turtlesim_node __name:=dabao rosrun turtlesim turtlesim_node __name:=xiaobao \u6ce8\u610f\uff1a\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u540c\u65f6\u7ec4\u5408\u4f7f\u7528 launch \u6587\u4ef6 html <launch> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name =\"turtlesim\"/> <!-- \u540d\u79f0\u91cd\u6620\u5c04--> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"t1\"/> <!-- \u547d\u540d\u7a7a\u95f4\u65b9\u6cd5 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"turtlesim\" ns = \"huahua\"/> <!-- \u7ec4\u5408\u65b9\u6cd5 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"t2\" ns=\"baobao\"/> </launch> \u7f16\u7801\u5b9e\u73b0\uff1aAPI\uff1aanonymous=true\u65f6\u4f1a\u7ed9\u8282\u70b9\u6dfb\u52a0\u968f\u673a\u540e\u7f00\uff0c\u907f\u514d\u8282\u70b9\u91cd\u540d \uff083\uff09ROS\u8bdd\u9898\u540d\u79f0\u91cd\u540d\u95ee\u9898 rosrun \u547d\u4ee4 \u6848\u4f8b\uff1a\u7528\u952e\u76d8\u63a7\u5236\u8282\u70b9rosrun teleop_twist_keyboard teleop_twist_keyboard.py\uff08\u9ed8\u8ba4\u4f7f\u7528\u8282\u70b9\u540d\u65f6cmd_vel\uff09\u63a7\u5236turtlesim_node\u7684\u4e4c\u9f9f\u8fd0\u52a8\uff08\u9ed8\u8ba4\u4f7f\u7528turtle/cmd_vel\u8282\u70b9\uff09\u3002 \u65b9\u6cd5\uff1a\u5c06\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u540d\u6539\u6210\u53e6\u4e00\u4e2a\uff0c\u8282\u70b9\u540d\u79f0\u4e00\u81f4\u540e\u624d\u53ef\u4ee5\u5b9e\u73b0\u901a\u4fe1\u4ece\u800c\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8 rosrun turtlesim turtlesim_node /turtle1/cmd_vel:=/cmd_vel \u200b \u6216 rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/turtle1/cmd_vel launch\u6587\u4ef6 <!-- \u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8 --> <launch> <!-- \u5c06\u4e4c\u9f9f\u7684\u8bdd\u9898\u8bbe\u7f6e\u4e3a\u4e0e\u952e\u76d8\u63a7\u5236\u4e00\u81f4 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name=\"turtlesim\"> <remap from=\"/turtle1/cmd_vel\" to=\"/cmd_vel\"/> </node> <node pkg=\"teleop_twist_keyboard\" type=\"teleop_twist_keyboard.py\" name=\"key\"/> <!--\u5c06\u952e\u76d8\u63a7\u5236\u8bdd\u9898\u8bbe\u7f6e\u4e3a\u4e0e\u4e4c\u9f9f\u4e00\u81f4\uff0c\u5b8c\u5168\u7c7b\u6bd4\u5373\u53ef--> </launch> \u516b\u3001ROS\u5e38\u7528\u7ec4\u4ef6 1\u3001TF\u5750\u6807\u53d8\u6362 \uff081\uff09\u9759\u6001\u5750\u6807\u53d8\u6362 \u6cd5\u4e00\uff1a\u7f16\u7801\u5b9e\u73b0 \u2460\u521b\u5efa\u529f\u80fd\u5305\u5e76\u6dfb\u52a0\u4f9d\u8d56 catkin_create_pkg tf_static roscpp rospy std_msgs tf2 tf2_ros tf2_geometry_msgs geometry_msgs \u2461\u65b0\u5efapython\u6587\u4ef6\uff0c\u4e3a\u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff0c\u4fee\u6539CMakelists\u6587\u4ef6 \u2462\u7f16\u5199\u53d1\u5e03\u65b9\u4ee3\u7801\uff0c\u7f16\u8bd1\u6267\u884c #! /usr/bin/env python import rospy import tf2_ros from geometry_msgs.msg import TransformStamped import tf.transformations #\u6b27\u62c9\u89d2\u83b7\u53d6\u56db\u5143\u6570 \"\"\" \u53d1\u5e03\u65b9\u5b9e\u73b0\uff1a\u7528\u4e8e\u53d1\u5e03\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u65b0\u76f8\u5bf9\u5173\u7cfb\uff08\u5c0f\u8f66\u5e95\u76d8\u2014\u2014baselink\u548c\u96f7\u8fbe\u2014\u2014laser\uff09 \u6d41\u7a0b\uff1a1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ROS\u8282\u70b9 3\u3001\u521b\u5efa\u53d1\u5e03\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u53d1\u5e03\u7684\u6570\u636e 5\u3001\u5faa\u73af\u53d1\u5e03\u6570\u636e 6\u3001spin\uff08\uff09 \"\"\" if __name__==\"__main__\": rospy.init_node(\"tf_static_pub\") #\u521b\u5efa\u53d1\u5e03\u5bf9\u8c61 pub = tf2_ros.StaticTransformBroadcaster() #\u7ec4\u7ec7\u88ab\u53d1\u5e03\u7684\u6570\u636e ts = TransformStamped() #header ts.header.stamp=rospy.Time.now()#\u8bbe\u7f6e\u65f6\u95f4\u6233 ts.header.frame_id = \"baselink\"#\u7236\u7ea7\u5750\u6807\u7cfb #child fram ts.child_frame_id = \"laser\" #\u76f8\u5bf9\u5173\u7cfb\uff08\u504f\u79fb\u548c\u56db\u5143\u6570\uff09 ts.transform.translation.x = 0.2 ts.transform.translation.y = 0.0 ts.transform.translation.z = 0.5 #\u56db\u5143\u6570\uff1a\u4e00\u822c\u5148\u8bbe\u7f6e\u6b27\u62c9\u89d2\uff0c\u518d\u8f6c\u6362\u6210\u56db\u5143\u6570 qtn = tf.transformations.quaternion_from_euler(0,0,0)#\u662f\u4e00\u4e2a\u5217\u8868\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4e0b\u6807\u7d22\u5f15\u83b7\u53d6\u5bf9\u5e94\u7684\u503c #\u56db\u5143\u6570\u83b7\u53d6 ts.transform.rotation.x =qtn[0] ts.transform.rotation.y = qtn[1] ts.transform.rotation.z = qtn[2] ts.transform.rotation.w = qtn[3] #\u53d1\u5e03\u6570\u636e pub.sendTransform(ts) rospy.spin() \u2463\u67e5\u770b\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u6570\u636e rostopic list\uff0c\u53ef\u4ee5\u770b\u5230\u6709\u8bdd\u9898\u540d\u4e3atf_static\u7684\u8bdd\u9898 rostopic echo tf_static\u53ef\u4ee5\u770b\u5230\u53d1\u5e03\u7684\u5177\u4f53\u4fe1\u606f \u4e5f\u53ef\u4ee5\u501f\u52a9\u53ef\u89c6\u5316\u5de5\u5177rviz\u76f4\u89c2\u770b\u5230\u4e24\u4e2a\u5750\u6807\u7cfb \uff08\u7ec8\u7aef\u4e2d\u8f93\u5165rviz\u6253\u5f00\u53ef\u89c6\u5316\u7a97\u53e3\uff0c\u5de6\u4e0a\u89d2Fixed Frame\u9009\u62e9baselink\uff0c\u5de6\u4e0b\u89d2add\uff0c\u6dfb\u52a0TF\u5373\u53ef\u770b\u5230\uff09 \u2463\u8ba2\u9605\u65b9\u4ee3\u7801\u7f16\u5199 \u65b0\u5efapython\u6587\u4ef6tf_static_sub.py\uff0c\u4e3a\u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff0c\u4fee\u6539CMakelists\u6587\u4ef6 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs \"\"\" \u8ba2\u9605\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u5750\u6807\u53d8\u6362\u6d88\u606f\uff0c\u4f20\u5165\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9\uff0c\u8c03\u7528\u8f6c\u6362\u7b97\u6cd5\u5b9e\u73b0\u5750\u6807\u8f6c\u6362 1\u3001\u5bfc\u5305\uff08\u7528\u5230\u4ec0\u4e48\u5305\u5bfc\u5165\u4ec0\u4e48\u5305\uff09 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 5\u3001\u8f6c\u6362\u903b\u8f91\u7f16\u5199\uff08\u8c03\u7528tf\u5c01\u88c5\u7b97\u6cd5\uff09 6\u3001\u8f93\u51fa\u8f6c\u6362\u7ed3\u679cB 7\u3001spin\uff08\uff09/spinonce\uff08\uff09 \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped()#\u53ef\u4ee5\u7528rosmsg info geometry_msgs.PointStamped \u67e5\u770b\u6d88\u606f\u7ed3\u6784 ps.header.stamp = rospy.Time.now() ps.header.frame_id = \"laser\" ps.point.x = 2.0 ps.point.y = 3.0 ps.point.z = 5.0 #\u8f6c\u6362\u903b\u8f91\u5b9e\u73b0\uff0c\u7531\u4e8e\u96f7\u8fbe\u662f\u4e0d\u95f4\u65ad\u83b7\u53d6\u4fe1\u606f\u7684\uff0c\u8fd9\u91cc\u7528\u5faa\u73af\u53d1\u5e03\u6570\u636e\u6765\u6a21\u62df rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"baselink\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep() \u6cd5\u4e8c\uff1aros\u5c01\u88c5\u547d\u4ee4\u5b9e\u73b0\u9759\u6001\u5750\u6807\u8f6c\u6362 rosrun tf2_ros static_transform_publisher x\u504f\u79fb\u91cf y\u504f\u79fb\u91cf z\u504f\u79fb\u91cf x\u8f74\u504f\u8f6c\u89d2 y\u8f74\u504f\u8f6c\u89d2 z\u8f74\u504f\u8f6c\u89d2 \u7236\u5750\u6807\u7cfb\u540d \u5b50\u5750\u6807\u7cfb\u540d \uff082\uff09\u52a8\u6001\u5750\u6807\u53d8\u6362 \u6848\u4f8b\uff1a\u5b9e\u73b0\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u65f6\uff0c\u5b9e\u65f6\u663e\u793a\u4e4c\u9f9f\u4f4d\u59ff\u4e0e\u539f\u70b9\u7684\u76f8\u5bf9\u5173\u7cfb\uff0c\u5e76\u80fd\u591f\u5728rviz\u4e2d\u5b9e\u65f6\u89c2\u5bdf\u5230\u4e24\u5750\u6807\u7684\u76f8\u5bf9\u4f4d\u7f6e \u5b9e\u73b0\u601d\u8def\uff1a\u53d1\u5e03\u65b9\u8ba2\u9605\u4e4c\u9f9f\u8fd0\u52a8\u7684\u4f4d\u59ff\u4fe1\u606f\uff0c\u5efa\u7acb\u4e4c\u9f9f\uff08\u5b50\u7ea7\u5750\u6807\u7cfb\uff09\u4e0e\u539f\u70b9\uff08\u7236\u7ea7\u5750\u6807\u7cfb\uff09\u5e76\u53d1\u5e03\u76f8\u5bf9\u5173\u7cfb\uff0c\u8ba2\u9605\u65b9\u8ba2\u9605\u5230\u4e24\u5750\u6807\u7cfb\u5e76\u8f93\u51fa\u4e4c\u9f9f\u76f8\u5bf9\u539f\u70b9\u7684\u52a8\u6001\u53d8\u6362\u5750\u6807\u3002 \u6ce8\u610f\uff1a\u8fd9\u91cc\u7684\u53d1\u5e03\u65b9\u8ba2\u9605\u4e86\u5185\u7f6e\u8282\u70b9\u4e4c\u9f9f\u8fd0\u52a8\u7684\u4fe1\u606f\uff0c\u5176\u5b9e\u662f\u4e2a\u5d4c\u5957\u5b9e\u73b0 \u2460\u53d1\u5e03\u65b9\u7f16\u7801\u5b9e\u73b0 #! /usr/bin/env python import rospy from turtlesim.msg import Pose import tf2_ros from geometry_msgs.msg import TransformStamped import tf.transformations \"\"\" \u53d1\u5e03\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u4e4c\u9f9f\u7684\u4f4d\u59ff\u4fe1\u606f\uff0c\u8f6c\u6362\u6210\u5750\u6807\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u5e76\u53d1\u5e03 \u51c6\u5907\uff1a\u4e86\u89e3\u4e4c\u9f9f\u4f4d\u59ff\u7684\u8bdd\u9898\u548c\u6d88\u606f\u7c7b\u578b\uff1a\u8bdd\u9898\u662fturtle1/pose\uff0c\u7c7b\u578bturtlesim/Pose \u6d41\u7a0b\uff1a 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u56de\u8c03\u51fd\u6570\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\uff08\u6838\u5fc3\uff09 5\u3001spin\uff08\uff09 \"\"\" def doPose(pose): #\u521b\u5efa\u53d1\u5e03\u5750\u6807\u7cfb\u76f8\u5bf9\u5173\u7cfb\u7684\u5bf9\u8c61 pub = tf2_ros.TransformBroadcaster() #\u5c06Pose\u8f6c\u6362\u6210\u5750\u6807\u7cfb\u76f8\u5bf9\u5173\u7cfb\u7684\u6d88\u606f ts = TransformStamped() ts.header.frame_id = \"world\" ts.header.stamp = rospy.Time.now() ts.child_frame_id = \"turtle1\" #transform,\u5750\u6807\u7cfb\u5b50\u7ea7\u5750\u6807\u7cfb\u76f8\u5bf9\u4e8e\u7236\u7ea7\u5750\u6807\u7cfb\u7684\u504f\u79fb\u91cf ts.transform.translation.x = pose.x ts.transform.translation.y = pose.y ts.transform.translation.z = 0 #ts\u4e0b\u7684rotation\uff0c\u901a\u8fc7\u56db\u5143\u6570\u8bbe\u7f6e\u65b9\u5411\u4e0a\u7684\u504f\u8f6c\u89d2\uff08\u4e00\u822c\u9700\u8981\u4e00\u4e2a\u6b27\u62c9\u89d2\u7684\u8f6c\u6362\u8fc7\u7a0b\uff09 \"\"\" \u4e4c\u9f9f\u662f2D\u5bf9\u8c61\uff0c\u4e0d\u5b58\u5728x\u5411\u7684\u7ffb\u6eda\uff0cy\u5411\u7684\u4fef\u4ef0\uff0c\u53ea\u6709z\u5411\u4e0a\u7684\u8f6c\u5411\uff08\u504f\u822a\uff09 \u6b27\u62c9\u89d2\uff080\uff0c0 \uff0cpose.theta\uff09 \"\"\" qtn = tf.transformations.quaternion_from_euler(0,0,pose.theta) ts.transform.rotation.x = qtn[0] ts.transform.rotation.y = qtn[1] ts.transform.rotation.z = qtn[2] ts.transform.rotation.w = qtn[3] #\u53d1\u5e03 pub.sendTransform(ts) if __name__==\"__main__\": rospy.init_node(\"dynamic_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 sub = rospy.Subscriber(\"/turtle1/pose\",Pose,doPose,queue_size = 100) rospy.spin() \u2461\u8ba2\u9605\u65b9\u7f16\u7801\u5b9e\u73b0 \u8fd9\u91cc\u8981\u683c\u5916\u6ce8\u610f\u65f6\u95f4\u6233\u8981\u7f6e0\uff0c\u91c7\u7528rospy.Time()\uff0c\u5982\u679c\u4ecd\u7136\u91c7\u7528rospy.Time.now\u83b7\u53d6\u5f53\u524d\uff0c\u5750\u6807\u8f6c\u6362\u4f1a\u56e0\u4e3a\u65f6\u95f4\u6233\u76f8\u5dee\u8f83\u5927\u800c\u65e0\u6cd5\u5b8c\u6210\u8f6c\u6362\u4ece\u800c\u629b\u51fa\u5f02\u5e38\u3002 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs \"\"\" \u8ba2\u9605\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u5750\u6807\u53d8\u6362\u6d88\u606f\uff0c\u4f20\u5165\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9\uff0c\u8c03\u7528\u8f6c\u6362\u7b97\u6cd5\u5b9e\u73b0\u5750\u6807\u8f6c\u6362 1\u3001\u5bfc\u5305\uff08\u7528\u5230\u4ec0\u4e48\u5305\u5bfc\u5165\u4ec0\u4e48\u5305\uff09 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 5\u3001\u8f6c\u6362\u903b\u8f91\u7f16\u5199\uff08\u8c03\u7528tf\u5c01\u88c5\u7b97\u6cd5\uff09 6\u3001\u8f93\u51fa\u8f6c\u6362\u7ed3\u679cB 7\u3001spin\uff08\uff09/spinonce\uff08\uff09 \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped() #\u65f6\u95f4\u6233 0 ps.header.stamp = rospy.Time() ps.header.frame_id = \"turtle1\" rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"world\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep() \u2462\u8fd0\u884c \u542f\u52a8roscore\uff0c\u542f\u52a8\u4e4c\u9f9fGUI\u8282\u70b9\u548c\u952e\u76d8\u63a7\u5236\u8282\u70b9\uff0c\u5206\u522brosrun\u53d1\u5e03\u65b9\u548c\u8ba2\u9605\u65b9\uff0c\u6253\u5f00rviz\uff0c\u53ef\u4ee5\u770b\u5230\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u65f6\uff0c\u4f1a\u5b9e\u65f6\u8f93\u51fa\u4e4c\u9f9f\u76f8\u5bf9\u539f\u70b9\u5750\u6807\u7684\u4f4d\u7f6e\u4fe1\u606f\u548c\u5750\u6807\u7684\u52a8\u6001\u53d8\u5316\u56fe \uff083\uff09\u591a\u5750\u6807\u53d8\u6362 \u2460\u6309\u7167\u9759\u6001\u5750\u6807\u53d8\u6362\u7684\u6cd5\u4e8c\u53d1\u5e03\u4e24\u4e2a\u9759\u6001\u76f8\u5bf9\u5750\u6807\u5173\u7cfb\uff1ason1\u4e0eworld\u548cson2\u4e0eworld\uff0c\u5e76\u7528launch\u6587\u4ef6\u5c01\u88c5\u8d77\u6765 <launch> <!-- \u53d1\u5e03son1\u76f8\u5bf9\u4e8eworld\u4ee5\u53cason2\u76f8\u5bf9\u4e8eworld\u7684\u5750\u6807\u5173\u7cfb --> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"son1\" args=\"5 0 0 0 0 0 /world /son1\" output=\"screen\"/> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"son2\" args=\"3 0 0 0 0 0 /world /son2\" output=\"screen\"/> </launch> \u2461\u7c7b\u6bd4\u52a8\u6001\u5750\u6807\u53d8\u6362\u7f16\u5199\u4ee3\u7801 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs from geometry_msgs.msg import TransformStamped if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped() #\u65f6\u95f4\u6233 0 ps.header.stamp = rospy.Time.now() ps.header.frame_id = \"son1\" ps.point.x = 1.0 ps.point.y = 2.0 ps.point.z = 3.0 #\u8f6c\u6362\u903b\u8f91\u5b9e\u73b0 rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8ba1\u7b97son1\u76f8\u5bf9\u4e8eson2\u7684\u8f6c\u6362\u5173\u7cfb ts = buffer.lookup_transform(\"son2\",\"son1\",rospy.Time(0)) rospy.loginfo(\"\u7236\u7ea7\u5750\u6807\u7cfb\uff1a%s\uff0c \u5b50\u7ea7\u5750\u6807\u7cfb\uff1a%s\", ts.header.frame_id, ts.child_frame_id) #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"son2\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep() \uff084\uff09\u5750\u6807\u5173\u7cfb\u67e5\u770b\u5de5\u5177tf2_tools \u9996\u5148\u8c03\u7528rospack find tf2_tools\u67e5\u770b\u662f\u5426\u5305\u542b\u8be5\u529f\u80fd\u5305\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5: sudo apt install ros-noetic-tf2-tools \u6ce8\u610f\u4f7f\u7528\u8be5\u5de5\u5177\u7684\u524d\u63d0\u662f\uff0c\u5df2\u7ecf\u542f\u52a8\u4e86\u5750\u6807\u76f8\u5bf9\u5173\u7cfb\u53d8\u6362\u7684\u8282\u70b9 \u4f7f\u7528\u547d\u4ee4\u67e5\u770b\u5750\u6807\u76f8\u5bf9\u5173\u7cfb rosrun tf2_tools view_frames.py \u63a5\u4e0b\u6765\u4f1a\u81ea\u52a8\u89e3\u6790\u5f53\u524d\u542f\u52a8\u7684\u5750\u6807\u5e76\u8f93\u51fa\u4e00\u4e2apdf\u6587\u4ef6\uff0c\u663e\u793a\u5750\u6807\u95f4\u7684\u76f8\u5bf9\u5173\u7cfb\uff0c\u53ef\u4ee5\u5728\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u7684\u8def\u5f84\u4e0b\u627e\u5230\u8be5pdf\u6587\u4ef6\u5e76\u6253\u5f00 2\u3001rosbag\u8282\u70b9\u5f55\u5236\u4e0e\u56de\u653e \u5728ROS\u4e2d\u63d0\u4f9b\u6570\u636e\u5f97\u7559\u5b58\u548c\u8bfb\u53d6\u5b9e\u73b0\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u5f55\u5236\u4e0e\u56de\u653e\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u590d\u7528\uff0c\u4fbf\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5 1.\u51c6\u5907 \u521b\u5efa\u76ee\u5f55\u4fdd\u5b58\u5f55\u5236\u7684\u6587\u4ef6 mkdir ./xxx cd xxx 2.\u5f00\u59cb\u5f55\u5236 rosbag record -a -O \u76ee\u6807\u6587\u4ef6\uff08\u5199\u6e05\u695a\u8def\u5f84\uff09 \u64cd\u4f5c\u5c0f\u4e4c\u9f9f\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ed3\u675f\u5f55\u5236\u4f7f\u7528 ctrl + c\uff0c\u5728\u521b\u5efa\u7684\u76ee\u5f55\u4e2d\u4f1a\u751f\u6210bag\u6587\u4ef6\u3002 3.\u67e5\u770b\u6587\u4ef6 rosbag info \u6587\u4ef6\u540d\uff08\u5199\u6e05\u695a\u8def\u5f84\uff09 4.\u56de\u653e\u6587\u4ef6 rosbag play \u6587\u4ef6\u540d \u91cd\u542f\u4e4c\u9f9f\u8282\u70b9\uff0c\u4f1a\u53d1\u73b0\uff0c\u4e4c\u9f9f\u6309\u7167\u5f55\u5236\u65f6\u7684\u8f68\u8ff9\u8fd0\u52a8 3\u3001rqt\u5de5\u5177\u7bb1 \u200b rqt\u5de5\u5177\u7bb1\u662f\u673a\u5668\u4eba\u5f00\u53d1\u4e2d\u7684\u4e00\u7cfb\u5217\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u5728\u8c03\u7528\u5de5\u5177\u65f6\u4ee5\u56fe\u5f62\u5316\u64cd\u4f5c\u4ee3\u66ff\u4e86\u547d\u4ee4\u64cd\u4f5c\uff0c\u5b9e\u73b0ros\u53ef\u89c6\u5316\u8c03\u8bd5\uff0c\u4e3aros\u5f00\u53d1\u63d0\u4f9b\u4e86\u4fbf\u5229\u3002 \uff081\uff09rqt\u8bdd\u9898\u53d1\u5e03 \u4f7f\u7528rqt\u5de5\u5177\u7bb1\u8c03\u7528\u8bdd\u9898\u53d1\u5e03\u4ece\u800c\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u7684\u6b65\u9aa4\u793a\u610f\u56fe rqt\u542f\u52a8\uff0cplugins\u9009\u62e9topic\uff0c\u4e0b\u62c9\u9009\u62e9\u5408\u9002\u7684\u8282\u70b9\uff0c+\u53f7\u6dfb\u52a0\u5230\u7a7a\u767d\u5904\uff0c\u4e0b\u62c9\u8bbe\u7f6e\u53c2\u6570\uff0cmessage publisher\u53d1\u5e03 \uff082\uff09rqt-graph \u53ef\u4ee5\u76f4\u63a5\u5728\u5de5\u5177\u7bb1\u91cc\u8c03\u7528 \uff083\uff09rqt-console ros\u4e2d\u7528\u4e8e\u663e\u793a\u548c\u8fc7\u6ee4\u65e5\u5fd7\u7684\u56fe\u5f62\u5316\u63d2\u4ef6 \uff084\uff09rqt-plot \u4ee52D\u7ed8\u56fe\u7684\u65b9\u5f0f\u7ed8\u5236\u6570\u636e \uff085\uff09rqt-bag \u5f55\u5236\u548c\u91cd\u653ebag\u6587\u4ef6\u7684\u56fe\u5f62\u5316\u63d2\u4ef6 rqt-bag\u542f\u52a8\u6216\u8005\u5728plugins\u9009\u62e9\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7ea2\u8272\u5706\u5708\u5f00\u59cb\u9009\u62e9\u9700\u8981\u5f55\u5236\u7684\u8282\u70b9\uff0c\u5e76\u70b9\u51fbrecord\u6dfb\u52a0bag\u6587\u4ef6\u5b58\u653e\u7684\u8def\u5f84\u5373\u53ef\u5f00\u59cb\u5f55\u5236 \u9700\u8981\u56de\u653e\u65f6\u70b9\u51fb\u5706\u5708\u65c1\u8fb9\u7684\u6587\u4ef6\u5939\u6309\u94ae\uff0c\u9009\u62e9\u60f3\u8981\u56de\u653e\u7684bag\u6587\u4ef6\uff0c\u56de\u653e\u65f6\u8981\u6ce8\u610f\u9700\u8981\u53f3\u952e\u70b9\u51fb\u8fdb\u5ea6\u6761\uff0c\u52fe\u9009publisher\u4e4c\u9f9f\u624d\u4f1a\u8fd0\u52a8\u3002 \u4e5d\u3001\u673a\u5668\u4eba\u7cfb\u7edf\u4eff\u771f 1\u3001URDF\u96c6\u6210rviz\u57fa\u672c\u6d41\u7a0b \uff081\uff09\u521b\u5efa\u529f\u80fd\u5305\uff0c\u5e76\u6dfb\u52a0\u4f9d\u8d56\uff0c\u4e0e\u673a\u5668\u4eba\u6a21\u578b\u76f8\u5173\u7684\u4f9d\u8d56\u4e3b\u8981\u6709urdf \u548cxacro \uff082\uff09\u5728\u529f\u80fd\u5305\u4e0b\u65b0\u5efa\u4e00\u4e9b\u6587\u4ef6\u5939 launch\uff1a\u7528\u4e8e\u5b58\u653elaunch\u542f\u52a8\u6587\u4ef6 urdf\uff1a\u5b58\u653e\u673a\u5668\u4eba\u63cf\u8ff0\u6587\u4ef6\uff08urdf\u6587\u4ef6\uff09 meshes\uff1a\u7528\u4e8e\u7ed9\u673a\u5668\u4eba\u8d34\u76ae\u80a4 config\uff1a\u5b58\u653e\u914d\u7f6e\u6587\u4ef6 \uff083\uff09\u7f16\u5199urdf\u6587\u4ef6\uff0c\u751f\u6210\u4e00\u4e2a\u65b9\u5f62\u7684\u673a\u5668\u4eba\u6a21\u578b <robot name=\"mycar\"> <link name=\"base_link\"> <visual> <geometry> <box size=\"0.5 0.2 0.1\" /> </geometry> </visual> </link> </robot> \uff084\uff09\u521b\u5efalaunch\u542f\u52a8\u6587\u4ef6 <launch> <!-- 1\u3001\u5728\u53c2\u6570\u670d\u52a1\u5668\u8f7d\u5165urdf\u6587\u4ef6--> <param name=\"robot_description\" textfile=\" $(find urdf_rviz)/urdf/urdf/helloworld.urdf\"/> <!-- 2\u3001\u542f\u52a8rviz--> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\"/> </launch> (5)\u914d\u7f6erviz\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\uff0c\u6ce8\u610fFixed Frame\u8981\u9009\u62e9urdf\u91cc\u8bbe\u7f6e\u7684\u540d\u79f0link name\uff0c\u4e5f\u53ef\u4ee5\u6dfb\u52a0TF\u5750\u6807\u8f74\u76f4\u89c2\u663e\u793a\u3002 \uff086\uff09\u4fdd\u5b58\u914d\u7f6e \u7531\u4e8e\u4e0d\u4fdd\u5b58\u914d\u7f6e\u65f6\u4f1a\u5bfc\u81f4\u5f53\u4e0b\u6b21\u518d\u6b21\u6253\u5f00launch\u6587\u4ef6\u6253\u5f00rviz\u65f6\uff0c\u4ecd\u7136\u9700\u8981\u91cd\u65b0\u914d\u7f6e \u5de6\u4e0a\u89d2File\uff0csave config as\uff0c\u5b58\u653e\u5230\u6587\u4ef6\u5939config\u4e2d\u5373\u53ef \u5728launch\u6587\u4ef6\u4e2d\u9700\u8981\u5bfc\u5165\u914d\u7f6e\u597d\u7684rviz\u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u65f6\u5c31\u65e0\u9700\u518d\u91cd\u590d\u914d\u7f6e\u4e86 2\u3001URDF\u6587\u4ef6\u7f16\u5199\u8bed\u6cd5 urdf\u6587\u4ef6\u662f\u6807\u51c6xml\u6587\u4ef6\uff0c\u9884\u5b9a\u4e49\u4e86\u4e00\u4e9b\u5217\u6807\u7b7e\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u6a21\u578b\uff0c\u4e3b\u8981\u5206\u4e3a\u4e24\u7c7b\u8fde\u6746\uff08link\uff09\u4e0e\u5173\u8282\uff08joint\uff09 \u8fde\u6746\uff1a\u673a\u5668\u4eba\u7684\u53ef\u89c1\u90e8\u5206\uff0c\u5373\u521a\u4f53\u90e8\u5206 \u5173\u8282\uff1a\u8fde\u6746\u4e4b\u95f4\u997f\u5173\u7cfb\u8fde\u63a5\uff08\u5173\u8282\uff09\uff0c\u4f46\u662f\u5173\u8282\u8fd9\u90e8\u5206\u5728\u76f4\u89c2\u4e0a\u662f\u4e0d\u53ef\u89c1\u7684 robot\uff1a\u7c7b\u4f3c\u8ddf\u6807\u7b7e\u7684\u5b58\u5728 gazebo\uff1agazebo\u4eff\u771f\u65f6\u4f7f\u7528\u7684\u6807\u7b7e\uff0c\u7528\u4e8e\u914d\u7f6e\u673a\u5668\u4eba\u7684\u6240\u9700\u53c2\u6570\uff0c\u5982\u673a\u5668\u4eba\u7684\u6750\u6599\u5c5e\u6027\uff0cgazebo\u63d2\u4ef6\u7b49\uff0c\u4f46\u8fd9\u7c7b\u6807\u7b7e\u5e76\u4e0d\u5fc5\u987b\uff0c\u53ea\u6709\u5728\u9700\u8981\u4eff\u771f\u65f6\u8bbe\u7f6e\u3002 \uff081\uff09robot\u6807\u7b7e \u200b urdf\u4e3a\u4e86\u4fdd\u8bc1xml\u6587\u4ef6\u8bed\u6cd5\u5b8c\u6574\u6027\uff0c\u4f7f\u7528robot\u6807\u7b7e\u4f5c\u4e3a\u8ddf\u6807\u7b7e\uff0c\u6240\u6709\u7684 link \u548c joint \u4ee5\u53ca\u5176\u4ed6\u6807\u7b7e\u90fd\u5fc5\u987b\u5305\u542b\u5728 robot \u6807\u7b7e\u5185,\u5728\u8be5\u6807\u7b7e\u5185\u53ef\u4ee5\u901a\u8fc7 name \u5c5e\u6027\u8bbe\u7f6e\u673a\u5668\u4eba\u6a21\u578b\u7684\u540d\u79f0\u3002 \uff082\uff09link\u6807\u7b7e \u63cf\u8ff0\u673a\u5668\u4eba\u67d0\u90e8\u4ef6\u7684\u5916\u89c2\u548c\u521a\u4f53\u5c5e\u6027\uff0c\u6bd4\u5982: \u673a\u5668\u4eba\u5e95\u5ea7\u3001\u8f6e\u5b50\u3001\u6fc0\u5149\u96f7\u8fbe\u3001\u6444\u50cf\u5934...\u6bcf\u4e00\u4e2a\u90e8\u4ef6\u90fd\u5bf9\u5e94\u4e00\u4e2a link, \u5728 link \u6807\u7b7e\u5185\uff0c\u53ef\u4ee5\u8bbe\u8ba1\u8be5\u90e8\u4ef6\u7684\u5f62\u72b6\u3001\u5c3a\u5bf8\u3001\u989c\u8272\u3001\u60ef\u6027\u77e9\u9635\u3001\u78b0\u649e\u53c2\u6570\u7b49\u4e00\u7cfb\u5217\u5c5e\u6027 \u7f16\u5199urdf\u6587\u4ef6\u65f6\uff0c\u5173\u952e\u5728\u4e8e\u8981\u7406\u6e05\u5c42\u7ea7\u5173\u7cfb 1.\u5c5e\u6027 name ---> \u4e3a\u8fde\u6746\u547d\u540d 2.\u5b50\u6807\u7b7e visual ---> \u63cf\u8ff0\u5916\u89c2(\u5bf9\u5e94\u7684\u6570\u636e\u662f\u53ef\u89c6\u7684) geometry \u8bbe\u7f6e\u8fde\u6746\u7684\u51e0\u4f55\u5f62\u72b6 \u200b \u6807\u7b7e1: box(\u76d2\u72b6) \u200b \u5c5e\u6027:size=\u957f(x) \u5bbd(y) \u9ad8(z) \u200b \u6807\u7b7e2: cylinder(\u5706\u67f1) \u200b \u5c5e\u6027:radius=\u534a\u5f84 length=\u9ad8\u5ea6 \u200b \u6807\u7b7e3: sphere(\u7403\u4f53) \u200b \u5c5e\u6027:radius=\u534a\u5f84 \u200b \u6807\u7b7e4: mesh(\u4e3a\u8fde\u6746\u6dfb\u52a0\u76ae\u80a4) \u200b \u5c5e\u6027: filename=\u8d44\u6e90\u8def\u5f84(\u683c\u5f0f:\\package:// / /\u6587\u4ef6) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u8bbe\u7f6e\u4e0d\u540c\u5f62\u72b6\u7684\u673a\u5668\u4eba\u90e8\u4ef6 --> <robot name=\"mycar\"> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <!-- <box size=\"0.3 0.2 0.1\"/> --> <!-- \u5706\u67f1\u4f53--> <!-- <cylinder radius=\"0.2\" length=\"1\"/> --> <!-- \u7403\u4f53--> <!-- <sphere radius=\"1\"/> --> <!-- \u6dfb\u52a0\u76ae\u80a4 --> <mesh filename=\"package://urdf_rviz/meshes/autolabor_mini.stl\"/> </geometry> </visual> </link> </robot> \u200b origin \u8bbe\u7f6e\u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 \u200b \u5c5e\u60271: xyz=x\u504f\u79fb y\u4fbf\u5b9c z\u504f\u79fb \u200b \u5c5e\u60272: rpy=x\u7ffb\u6eda y\u4fef\u4ef0 z\u504f\u822a (\u5355\u4f4d\u662f\u5f27\u5ea6) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0' rpy='1.57 0 0'/> \u200b metrial \u8bbe\u7f6e\u6750\u6599\u5c5e\u6027(\u989c\u8272) \u200b \u5c5e\u6027: name \u200b \u6807\u7b7e: color \u200b \u5c5e\u6027: rgba=\u7ea2\u7eff\u84dd\u6743\u91cd\u503c\u4e0e\u900f\u660e\u5ea6 (\u6bcf\u4e2a\u6743\u91cd\u503c\u4ee5\u53ca\u900f\u660e\u5ea6\u53d6\u503c[0,1]) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0.7 0.34 0.8 0.5\"/> </material> collision ---> \u8fde\u6746\u7684\u78b0\u649e\u5c5e\u6027 Inertial ---> \u8fde\u6746\u7684\u60ef\u6027\u77e9\u9635 \uff083\uff09joint\u6807\u7b7e \u200b urdf \u4e2d\u7684 joint \u6807\u7b7e\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u5173\u8282\u7684\u8fd0\u52a8\u5b66\u548c\u52a8\u529b\u5b66\u5c5e\u6027\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u5173\u8282\u8fd0\u52a8\u7684\u5b89\u5168\u6781\u9650\uff0c\u673a\u5668\u4eba\u7684\u4e24\u4e2a\u90e8\u4ef6(\u5206\u522b\u79f0\u4e4b\u4e3a parent link \u4e0e child link)\u4ee5\"\u5173\u8282\"\u7684\u5f62\u5f0f\u76f8\u8fde\u63a5\uff0c\u4e0d\u540c\u7684\u5173\u8282\u6709\u4e0d\u540c\u7684\u8fd0\u52a8\u5f62\u5f0f: \u65cb\u8f6c\u3001\u6ed1\u52a8\u3001\u56fa\u5b9a\u3001\u65cb\u8f6c\u901f\u5ea6\u3001\u65cb\u8f6c\u89d2\u5ea6\u9650\u5236....,\u6bd4\u5982:\u5b89\u88c5\u5728\u5e95\u5ea7\u4e0a\u7684\u8f6e\u5b50\u53ef\u4ee5360\u5ea6\u65cb\u8f6c\uff0c\u800c\u6444\u50cf\u5934\u5219\u53ef\u80fd\u662f\u5b8c\u5168\u56fa\u5b9a\u5728\u5e95\u5ea7\u4e0a\u3002joint\u6807\u7b7e\u5bf9\u5e94\u7684\u6570\u636e\u5728\u6a21\u578b\u4e2d\u662f\u4e0d\u53ef\u89c1\u7684\u3002 \u5c5e\u6027 name ---> \u4e3a\u5173\u8282\u547d\u540d type ---> \u5173\u8282\u8fd0\u52a8\u5f62\u5f0f continuous: \u65cb\u8f6c\u5173\u8282\uff0c\u53ef\u4ee5\u7ed5\u5355\u8f74\u65e0\u9650\u65cb\u8f6c revolute: \u65cb\u8f6c\u5173\u8282\uff0c\u7c7b\u4f3c\u4e8e continues,\u4f46\u662f\u6709\u65cb\u8f6c\u89d2\u5ea6\u9650\u5236 prismatic: \u6ed1\u52a8\u5173\u8282\uff0c\u6cbf\u67d0\u4e00\u8f74\u7ebf\u79fb\u52a8\u7684\u5173\u8282\uff0c\u6709\u4f4d\u7f6e\u6781\u9650 planer: \u5e73\u9762\u5173\u8282\uff0c\u5141\u8bb8\u5728\u5e73\u9762\u6b63\u4ea4\u65b9\u5411\u4e0a\u5e73\u79fb\u6216\u65cb\u8f6c floating: \u6d6e\u52a8\u5173\u8282\uff0c\u5141\u8bb8\u8fdb\u884c\u5e73\u79fb\u3001\u65cb\u8f6c\u8fd0\u52a8 fixed: \u56fa\u5b9a\u5173\u8282\uff0c\u4e0d\u5141\u8bb8\u8fd0\u52a8\u7684\u7279\u6b8a\u5173\u8282 \u5b50\u7ea7\u6807\u7b7e parent(\u5fc5\u9700\u7684) parent link\u7684\u540d\u5b57\u662f\u4e00\u4e2a\u5f3a\u5236\u7684\u5c5e\u6027\uff1a link:\u7236\u7ea7\u8fde\u6746\u7684\u540d\u5b57\uff0c\u662f\u8fd9\u4e2alink\u5728\u673a\u5668\u4eba\u7ed3\u6784\u6811\u4e2d\u7684\u540d\u5b57\u3002 child(\u5fc5\u9700\u7684) child link\u7684\u540d\u5b57\u662f\u4e00\u4e2a\u5f3a\u5236\u7684\u5c5e\u6027\uff1a link:\u5b50\u7ea7\u8fde\u6746\u7684\u540d\u5b57\uff0c\u662f\u8fd9\u4e2alink\u5728\u673a\u5668\u4eba\u7ed3\u6784\u6811\u4e2d\u7684\u540d\u5b57\u3002 origin \u5c5e\u6027: xyz=\u5404\u8f74\u7ebf\u4e0a\u7684\u504f\u79fb\u91cf rpy=\u5404\u8f74\u7ebf\u4e0a\u7684\u504f\u79fb\u5f27\u5ea6\u3002 axis \u5c5e\u6027: xyz\u7528\u4e8e\u8bbe\u7f6e\u56f4\u7ed5\u54ea\u4e2a\u5173\u8282\u8f74\u8fd0\u52a8\u3002 <!-- \u9700\u6c42:\u8bbe\u7f6e\u673a\u5668\u4eba\u5e95\u76d8,\u5e76\u6dfb\u52a0\u6444\u50cf\u5934 --> <robot name=\"mycar\"> <!-- 1 \u5e95\u76d8link --> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <box size=\"0.3 0.2 0.1\"/> </geometry> <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0' rpy='0 0 0'/> <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0.3 0.4 0.8 0.8\"/> </material> </visual> </link> <!-- 2 \u6444\u50cf\u5934link --> <link name=\"camera\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <box size=\"0.03 0.05 0.05\"/> </geometry> <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0.025' rpy='0 0 0'/> <!-- \u9700\u8981\u4e0a\u79fb\u534a\u4e2a\u6444\u50cf\u5934\u7684\u9ad8\u5ea6,\u624d\u4e0d\u4f1a\u5bfc\u81f4\u6444\u50cf\u5934\u5185\u5d4c\u5728\u673a\u5668\u4eba\u8f66\u4f53\u91cc --> <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0 1 0 0.8\"/> </material> </visual> </link> <!-- 3 \u5173\u8282 --> <joint name=\"camera_to_link\" type=\"continuous\"> <!-- \u7236\u7ea7link --> <parent link=\"base_link\"/> <!-- \u5b50\u7ea7link --> <child link=\"camera\"/> <!-- \u8bbe\u7f6e\u504f\u79fb\u91cf --> <origin xyz='0.13 0 0.05' rpy='0 0 0'/> <!-- \u8bbe\u7f6e\u5173\u8282\u65cb\u8f6c\u53c2\u8003\u7684\u5750\u6807\u8f74 --> <axis xyz='0 0 1'/> </joint> </robot> launch\u6587\u4ef6\u7f16\u5199\uff1a <launch> <!-- 1\u3001\u5728\u53c2\u6570\u670d\u52a1\u5668\u8f7d\u5165urdf\u6587\u4ef6 --> <param name=\"robot_description\" textfile=\"$(find urdf_rviz)/urdf/urdf/joint.urdf\"/> <!-- 2\u3001\u542f\u52a8rviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find urdf_rviz)/config/showmycar.rviz\"/> <!-- \u6ce8\u610f:\u53ea\u6709\u4e0a\u8ff0\u4e24\u6761\u8bed\u53e5\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38:\u663e\u793a\u4f4d\u7f6e\u4e0e\u989c\u8272\u5f02\u5e38,\u7ed9\u51fa\u63d0\u793a no transform from camera to baselink(\u7f3a\u5c11\u5750\u6807\u53d8\u6362) --> <!-- \u539f\u56e0:rviz\u4e2d\u663e\u793aurdf\u65f6.\u5fc5\u987b\u53d1\u5e03\u4e0d\u540c\u90e8\u4ef6\u4e4b\u95f4\u7684\u5750\u6807\u7cfb\u5173\u7cfb --> <!-- \u89e3\u51b3:ROS\u4e2d\u63d0\u4f9b\u7684\u5173\u4e8e\u673a\u5668\u4eba\u6a21\u578b\u663e\u793a\u7684\u5750\u6807\u53d1\u5e03\u76f8\u5173\u8282\u70b9(joint_state_publisher \u548c robot_state_publisher) --> <!-- \u5173\u8282\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\"/> <!-- \u673a\u5668\u4eba\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\"/> <!--\u6dfb\u52a0\u63a7\u5236\u673a\u5668\u4eba\u5173\u8282\u8fd0\u52a8\u7684\u8282\u70b9--> <node pkg=\"joint_state_publisher_gui\" type=\"joint_state_publisher_gui\" name=\"joint_state_publisher_gui\"/> </launch> \u6ce8\u610f\uff1a\u5173\u8282\u63a7\u5236\u8282\u70b9\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u5728\u4e8e\u63d0\u4f9b\u4e00\u4e2a\u63a7\u5236\u5173\u8282\u8282\u70b9\u8fd0\u52a8\u7684UI\u754c\u9762\uff0c\u4fbf\u4e8e\u8c03\u8bd5urdf\u6587\u4ef6\u662f\u5426\u6b63\u5e38\u3002 \uff084\uff09URDF\u5de5\u5177 \u5728 ROS \u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5de5\u5177\u6765\u65b9\u4fbf URDF \u6587\u4ef6\u7684\u7f16\u5199\uff0c\u6bd4\u5982: check_urdf\u547d\u4ee4\u53ef\u4ee5\u68c0\u67e5\u590d\u6742\u7684 urdf \u6587\u4ef6\u662f\u5426\u5b58\u5728\u8bed\u6cd5\u95ee\u9898 urdf_to_graphiz\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b urdf \u6a21\u578b\u7ed3\u6784\uff0c\u663e\u793a\u4e0d\u540c link \u7684\u5c42\u7ea7\u5173\u7cfb \u4f7f\u7528\u5de5\u5177\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u5b89\u88c5\uff0c\u5b89\u88c5\u547d\u4ee4:sudo apt install liburdfdom-tools 3\u3001\u5728RVIZ\u4e2d\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8\uff08Arbotix\uff09 \uff081\uff09\u5b89\u88c5arbotix sudo apt-get ros-neotic-arbotix 4\u3001URDF\u96c6\u6210Gazebo\u7684\u57fa\u672c\u6d41\u7a0b \uff081\uff09\u521b\u5efa\u529f\u80fd\u5305 \u529f\u80fd\u5305\uff1aurdf_gazebo \u4f9d\u8d56\uff1aurdf xacro gazebo_ros gazebo_ros_control gazebo_plugins \uff082\uff09\u6587\u4ef6\u5939\u51c6\u5907 \u65b0\u5efa\u6587\u4ef6\u5939\uff1aurdf\u2014\u2014\u65b0\u5efa\u6587\u4ef6 urdf\u6587\u4ef6\u5199\u597d\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528check_urdf\u5de5\u5177\u68c0\u67e5\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\uff0c\u4eba\u5de5\u68c0\u67e5\u96be\u4ee5\u53d1\u73b0\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u540e\u7eedgazebo\u73af\u5883\u4e2d\u65e0\u6cd5\u6b63\u786e\u663e\u793a\u3002 \u68c0\u67e5\u547d\u4ee4\uff1a\u5728\u7ec8\u7aef\u8fdb\u5165urdf\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 check_urdf xxx.urdf(urdf\u6587\u4ef6\u540d) urdf\u4ee3\u7801\u793a\u4f8b\uff1a <robot name=\"myrobot\"> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u90e8\u5206 --> <visual> <geometry> <box size=\"0.5 0.3 0.1\"/> </geometry> <origin xyz=\"0 0 0\" rpy=\"0 0 0\"/> <!-- \u7531\u4e8e\u4eff\u771f\u4e2d\u521a\u4f53\u4e0d\u4f1a\u900f\u660e,\u4e8e\u662f\u989c\u8272\u5728gazebo\u4e2d\u4e0d\u518d\u751f\u6548,gazebo\u6709\u7279\u5b9a\u7684\u989c\u8272\u8bbe\u7f6e --> <material name=\"yellow\"> <color rgba=\"0.5 0.5 0 0.8\"/> </material> </visual> <!-- gezebo\u4e0erviz\u4e0d\u540c\u7684\u90e8\u5206:collision\u78b0\u649e\u5c5e\u6027\u548cinertial\u60ef\u6027\u77e9\u9635 --> <!-- 1.\u78b0\u649e\u53c2\u6570collision:\u5982\u679c\u662f\u6807\u51c6\u51e0\u4f55\u4f53,\u76f4\u63a5\u590d\u5236isual\u4e2d\u7684geometry\u548corigin\u5373\u53ef --> <collision> <geometry> <box size=\"0.5 0.3 0.1\"/> </geometry> <origin xyz=\"0 0 0\" rpy=\"0 0 0\"/> </collision> <!-- 2.\u60ef\u6027\u77e9\u9635inertial:\u9700\u8981\u516c\u5f0f\u8ba1\u7b97,\u4e0e\u91cd\u5fc3\u548c\u8d28\u91cf\u6709\u5173 --> <inertial> <!-- \u8bbe\u7f6e\u91cd\u5fc3\u504f\u79fb:\u8d28\u91cf\u5bc6\u5ea6\u5747\u5300\u65f6\u5c31\u662f000 --> <origin xyz=\"0 0 0\"/> <!-- \u6807\u7b7emass\u8bbe\u7f6e\u8d28\u91cf --> <mass value=\"2\"/> <!-- \u4e0d\u540c\u7ef4\u5ea6\u4e0a\u7684\u60ef\u6027\u53c2\u6570:\u9700\u8981\u901a\u8fc7\u516c\u5f0f\u8ba1\u7b97,\u5426\u5219\u4eff\u771f\u53ef\u80fd\u4f1a\u51fa\u95ee\u9898 --> <inertia ixx=\"1\" ixy=\"0\" ixz=\"0\" iyy=\"1\" iyz=\"0\" izz=\"1\"/> </inertial> </link> <!-- gazebo\u989c\u8272\u8bbe\u7f6e(\u6ce8\u610f\u4f4d\u7f6e,\u8bbe\u7f6e\u5728\u8fde\u6746\u6807\u7b7e\u5916\u7684) --> <gazebo reference=\"base_link\"> <material>Gazebo/Red</material> </gazebo> </robot> \u5c06urdf\u6587\u4ef6\u548cgazebo\u542f\u52a8\u96c6\u6210\u5230launch\u6587\u4ef6\u4e2d <launch> <!-- \u5728\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8f7d\u5165urdf --> <param name=\"robot_description\" textfile=\"$(find urdf_gazebo)/urdf/helloworld.urdf\"/> <!-- \u542f\u52a8gazebo\u4eff\u771f\u73af\u5883 --> <include file=\"$(find gazebo_ros)/launch/empty_world.launch\"/> <!-- \u5728gazebo\u4e2d\u6dfb\u52a0\u673a\u5668\u4eba\u6a21\u578b --> <node pkg=\"gazebo_ros\" type=\"spawn_model\" name=\"spawn_model\" args=\"-urdf -model car -param robot_description\"/> <!-- car\u662f\u540d\u5b57\uff0c\u53ef\u4ee5\u81ea\u5df1\u53d6\uff0c\u522b\u7684\u4e0d\u53ef\u4ee5--> </launch> 5\u3001Gazebo\u5bfc\u5165\u81ea\u5b9a\u4e49\u73af\u5883 \u200b \u4e4b\u524d\u7684\u6848\u4f8bgazebo\u4e2d\u5bfc\u5165\u7684\u662f\u4e00\u4e2a\u7a7a\u4e16\u754cempty_world\uff0c\u8fd9\u91cc\u4f1a\u4ecb\u7ecd\u5982\u4f55\u5bfc\u5165\u623f\u5c4b\u6570\u76ee\u7b49\u81ea\u5b9a\u4e49\u7684\u73af\u5883 \uff081\uff09\u542f\u52a8 gazebo \u6253\u5f00\u6784\u5efa\u9762\u677f\uff0c\u7ed8\u5236\u4eff\u771f\u73af\u5883 \uff082\uff09\u4fdd\u5b58\u6784\u5efa\u7684\u73af\u5883 \u70b9\u51fb: \u5de6\u4e0a\u89d2 file ---> Save (\u4fdd\u5b58\u8def\u5f84\u529f\u80fd\u5305\u4e0b\u7684: models) \u7136\u540e file ---> Exit Building Editor \uff083\uff09 \u4fdd\u5b58\u4e3a world \u6587\u4ef6 \u53ef\u4ee5\u7528\u9875\u9762\u4e0a\u65b9gazebo\u81ea\u5e26\u7684\u5de5\u5177\u7bb1\u518d\u6dfb\u52a0\u4e00\u4e9b\u63d2\u4ef6\uff0c\u7136\u540e\u4fdd\u5b58\u4e3a world \u6587\u4ef6(\u4fdd\u5b58\u8def\u5f84\u529f\u80fd\u5305\u4e0b\u7684: worlds)\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u6587\u4ef6\u5939\u547d\u540d\u5fc5\u987b\u662fworlds \uff084\uff09\u542f\u52a8\u81ea\u5b9a\u4e49\u73af\u5883 <launch> <!-- \u5c06 Urdf \u6587\u4ef6\u7684\u5185\u5bb9\u52a0\u8f7d\u5230\u53c2\u6570\u670d\u52a1\u5668 --> <param name=\"robot_description\" command=\"$(find xacro)/xacro $(find demo02_urdf_gazebo)/urdf/xacro/my_base_camera_laser.urdf.xacro\" /> <!-- \u542f\u52a8 gazebo --> <include file=\"$(find gazebo_ros)/launch/empty_world.launch\"> <arg name=\"world_name\" value=\"$(find demo02_urdf_gazebo)/worlds/hello.world\" /> </include> <!-- \u5728 gazebo \u4e2d\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b --> <node pkg=\"gazebo_ros\" type=\"spawn_model\" name=\"model\" args=\"-urdf -model mycar -param robot_description\" /> </launch> \u200b \u901a\u8fc7roslaunch\u542f\u52a8\u76f8\u5173\u7684env.launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u7684\u5173\u952e\u90e8\u5206\u662f\u5728launch\u6587\u4ef6\u4e2d\u7528include\u6807\u7b7e\u96c6\u6210\u542f\u52a8gazebo\u90e8\u5206\uff0c\u7531\u539f\u6765\u7684\u7a7a\u4e16\u754c\uff08empty_world\uff09\u53d8\u6210\u4e86\u81ea\u5b9a\u4e49\u7684world\u6587\u4ef6worlds/hello.world 6\u3001\u673a\u5668\u4eba\u8fd0\u52a8\u63a7\u5236ROS-control \u200b \u9700\u8981\u7f16\u5199\u4e00\u4e2a\u5355\u72ec\u7684xacro\u6587\u4ef6\uff0c\u4e3a\u673a\u5668\u4eba\u6a21\u578b\u6dfb\u52a0\u4f20\u52a8\u88c5\u7f6e\u4ee5\u53ca\u63a7\u5236\u5668\uff0c\u8fd9\u91cc\u4e3b\u8981\u9700\u8981\u4fee\u6539\u7684\u662fjoint_name\uff0c\u9700\u8981\u548curdf/xacro\u7f16\u5199\u65f6\u7ed9\u9a71\u52a8\u8f6e\u7684\u540d\u5b57\u76f8\u540c\u3002 <robot name=\"my_car_move\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u4f20\u52a8\u5b9e\u73b0:\u7528\u4e8e\u8fde\u63a5\u63a7\u5236\u5668\u4e0e\u5173\u8282 --> <xacro:macro name=\"joint_trans\" params=\"joint_name\"> <!-- Transmission is important to link the joints and the controller --> <transmission name=\"${joint_name}_trans\"> <type>transmission_interface/SimpleTransmission</type> <joint name=\"${joint_name}\"> <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface> </joint> <actuator name=\"${joint_name}_motor\"> <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface> <mechanicalReduction>1</mechanicalReduction> </actuator> </transmission> </xacro:macro> <!-- \u6bcf\u4e00\u4e2a\u9a71\u52a8\u8f6e\u90fd\u9700\u8981\u914d\u7f6e\u4f20\u52a8\u88c5\u7f6e --> <xacro:joint_trans joint_name=\"left_wheel2base_link\" /> <xacro:joint_trans joint_name=\"right_wheel2base_link\" /> <!-- \u63a7\u5236\u5668 --> <gazebo> <plugin name=\"differential_drive_controller\" filename=\"libgazebo_ros_diff_drive.so\"> <rosDebugLevel>Debug</rosDebugLevel> <publishWheelTF>true</publishWheelTF> <robotNamespace>/</robotNamespace> <publishTf>1</publishTf> <publishWheelJointState>true</publishWheelJointState> <alwaysOn>true</alwaysOn> <updateRate>100.0</updateRate> <legacyMode>true</legacyMode> <leftJoint>left_wheel2base_link</leftJoint> <!-- \u5de6\u8f6e --> <rightJoint>right_wheel2base_link</rightJoint> <!-- \u53f3\u8f6e --> <wheelSeparation>${base_link_radius * 2}</wheelSeparation> <!-- \u8f66\u8f6e\u95f4\u8ddd --> <wheelDiameter>${wheel_radius * 2}</wheelDiameter> <!-- \u8f66\u8f6e\u76f4\u5f84 --> <broadcastTF>1</broadcastTF> <wheelTorque>30</wheelTorque> <wheelAcceleration>1.8</wheelAcceleration> <commandTopic>cmd_vel</commandTopic> <!-- \u8fd0\u52a8\u63a7\u5236\u8bdd\u9898 --> <odometryFrame>odom</odometryFrame> <odometryTopic>odom</odometryTopic> <!-- \u91cc\u7a0b\u8ba1\u8bdd\u9898 --> <robotBaseFrame>base_footprint</robotBaseFrame> <!-- \u6839\u5750\u6807\u7cfb --> </plugin> </gazebo> </robot> \u200b \u7528\\ \u6807\u7b7e\uff0c\u5c06\u8be5xacro\u6587\u4ef6\u96c6\u6210\u5230\u6574\u4f53\u7684car.urdf.xacro\u6587\u4ef6\u4e2d\uff0c\u8fd9\u91cc\u8981\u6ce8\u610f\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\u3002 \u200b \u8fd0\u884claunch\u6587\u4ef6\uff0c\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\uff0c\u901a\u8fc7\u547d\u4ee4rostopic list\uff0c\u67e5\u770b\u76ee\u524d\u5df2\u6709\u8bdd\u9898\u540d\u79f0\uff0c\u53ef\u4ee5\u770b\u5230cmd_vel\uff0c\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\u8bdd\u9898\u3002 \u901a\u8fc7\u952e\u76d8\u63a7\u5236\u8282\u70b9\u53ef\u4ee5\u5b9e\u73b0\u952e\u76d8\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8 rosrun teleop_twist_keyboard teleop_twist_keyboard.py 7\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1arviz\u91cc\u7a0b\u8ba1\u67e5\u770b \u5728\u673a\u5668\u4eba\u8fd0\u52a8\u63a7\u5236\u7684xacro\u6587\u4ef6\u4e2d\uff0c\u63a7\u5236\u5668\u90e8\u5206\u5bfc\u5165\u4e86\u91cc\u7a0b\u8ba1\u8bdd\u9898 <odometryTopic>odom</odometryTopic> <!-- \u91cc\u7a0b\u8ba1\u8bdd\u9898 --> \u6211\u4eec\u53ef\u4ee5\u5728rviz\u4e2d\u53ef\u89c6\u5316\u67e5\u770b\u91cc\u7a0b\u8ba1\u7684\u6548\u679c \uff081\uff09\u901a\u8fc7launch\u6587\u4ef6\u6253\u5f00rviz <launch> <!-- \u542f\u52a8 rviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" /> <!-- \u5173\u8282\u4ee5\u53ca\u673a\u5668\u4eba\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node name=\"joint_state_publisher\" pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" /> <node name=\"robot_state_publisher\" pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" /> </launch> \uff082\uff09\u6dfb\u52a0odometry\u7ec4\u4ef6\uff0c\u67e5\u770b\u91cc\u7a0b\u8ba1\u6d88\u606f \uff083\uff09\u6dfb\u52a0/odom\u8bdd\u9898\uff0c\u67e5\u770b\u91cc\u7a0b\u8ba1\u663e\u793a \uff084\uff09\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8bdd\u9898\uff0c\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\uff0c\u5373\u53ef\u5b9e\u65f6\u770b\u5230\u91cc\u7a0b\u8ba1\u7684\u663e\u793a\u60c5\u51b5 rosrun teleop_twist_keyboard teleop_twist_keyboard.py 8\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1a\u96f7\u8fbe\u4fe1\u606f\u4eff\u771f\u53ca\u663e\u793a \uff081\uff09\u65b0\u5efalaser.xacro\u6587\u4ef6\u5e76\u96c6\u6210\u5230\u5c0f\u8f66\u6a21\u578b\u6587\u4ef6\u4e2d\uff08include\uff09 \u200b \u7f16\u5199laser.xacro\u6587\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u7167\u7684\u90e8\u5206\u662f\uff1a \u200b \u7b2c\u4e09\u884cgazebo reference\u90e8\u5206\u548c\u5012\u6570\u7b2c\u4e94\u884cframe name\u7684\u540d\u5b57\u201claser\u201d\uff0c\u8be5\u6587\u4ef6\u8981\u4f5c\u7528\u5230\u673a\u5668\u4eba\u6a21\u578b\u7684\u96f7\u8fbe\u8fde\u6746\u90e8\u5206\uff0c\u8981\u627e\u5230\u81ea\u5df1\u96f7\u8fbe\u8fde\u6746\u8bbe\u7f6e\u7684\u540d\u5b57\u5e76\u5bf9\u5e94\u4fee\u6539\u3002\u8be5\u6807\u7b7e\u4e0a\u9762\u7684topicname\u8bdd\u9898\u5c31\u662f\u96f7\u8fbe\u4f20\u611f\u5668\u53d1\u5e03\u6570\u636e\u6240\u7528\u7684\u8bdd\u9898\uff0c\u8fd9\u91cc\u662f/scan\u3002 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u96f7\u8fbe --> <gazebo reference=\"laser\"> <sensor type=\"ray\" name=\"rplidar\">\u96f7\u8fbe\u7c7b\u578b <pose>0 0 0 0 0 0</pose>\u96f7\u8fbe\u4f4d\u59ff <visualize>true</visualize>gazebo\u662f\u5426\u663e\u793a\u96f7\u8fbe\u5c04\u7ebf <update_rate>5.5</update_rate>\u96f7\u8fbe\u5c04\u7ebf\u7684\u66f4\u65b0\u9891\u7387 <ray> <scan> <horizontal> <samples>360</samples>\u91c7\u6837\u4e2a\u6570\uff1a\u96f7\u8fbe\u65cb\u8f6c\u4e00\u5468\u91c7\u6837\u51e0\u4e2a\u70b9 <resolution>1</resolution>\u5206\u8fa8\u7387\uff1a\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6574\u6570n\uff0c\u6bcfn\u4e2a\u5c04\u7ebf\u6d4b\u8ddd\u4e00\u6b21 <min_angle>-3</min_angle>\u8bbe\u7f6e\u96f7\u8fbe\u7684\u91c7\u6837\u8303\u56f4\uff08180\u5ea6\u91c7\u6837\uff1f120\u5ea6\u91c7\u6837\uff1f\u5355\u4f4d\u662f\u5f27\u5ea6\u5236\uff09 <max_angle>3</max_angle> </horizontal> </scan> <range> <min>0.10</min>\u96f7\u8fbe\u6709\u6548\u8303\u56f40.1\u7c73\u523030\u7c73 <max>30.0</max> <resolution>0.01</resolution>\u6d4b\u91cf\u8ddd\u79bb\u7684\u7cbe\u786e\u5ea6\uff0c\u5355\u4f4d\u7c73 </range> <noise>\u9ad8\u65af\u566a\u97f3\uff1a\u7528\u4e8e\u4eff\u771f\uff0c\u6a21\u62df\u5b9e\u9645\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u8bef\u5dee <type>gaussian</type> <mean>0.0</mean> <stddev>0.01</stddev> </noise> </ray> <plugin name=\"gazebo_rplidar\" filename=\"libgazebo_ros_laser.so\"> <topicName>/scan</topicName>\u96f7\u8fbe\u53d1\u5e03\u6d88\u606f\u7684\u8bdd\u9898\u540d <frameName>laser</frameName>\u96f7\u8fbe\u5750\u6807\u7cfb\u540d </plugin> </sensor> </gazebo> </robot> \uff082\uff09roslaunch\u542f\u52a8env.launch\u548crviz \u89c2\u5bdfgazebo\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u4eff\u771f\u4e2d\u4f1a\u663e\u793a\u96f7\u8fbe\u4fe1\u53f7\u7684\u6ce2\u675f \uff083\uff09\u5728RVIZ\u4e2d\u8fdb\u884c\u5bf9\u5e94\u8bbe\u7f6e\uff0c\u663e\u793a\u96f7\u8fbe\u4fe1\u53f7\u7684\u7ec4\u4ef6 \u6539\u5750\u6807\u7cfbFixed Frames\uff1aodom\uff0c\u6dfb\u52a0\u7ec4\u4ef6laserscan \u200b topic\u9009\u62e9/scan\uff0c\u53ef\u4ee5\u770b\u5230rviz\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e9b\u7ea2\u8272\u7684\u70b9\u7ec4\u6210\u7684\u8fb9\u754c\uff0c\u8fd9\u5c31\u662f\u96f7\u8fbe\u4fe1\u606f\u5f97\u5230\u7684\u4fe1\u53f7\uff0c\u53ef\u4ee5\u770b\u5230\u5468\u56f4\u73af\u5883\u7684\u969c\u788d\u7269\u60c5\u51b5 9\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1a\u6444\u50cf\u5934\u4fe1\u606f\u4eff\u771f\u53ca\u663e\u793a \uff081\uff09\u65b0\u5efacamera.xacro\u6587\u4ef6\u5e76\u96c6\u6210\u5230\u673a\u5668\u4eba\u6a21\u578b\u7684xacro\u6587\u4ef6\u4e2d\uff08include\uff09 \u7f16\u5199camera.xacro\u6587\u4ef6,\u4e3b\u8981\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\u6709\uff08\u7c7b\u4f3c\u96f7\u8fbe\u4eff\u771f\uff09\uff1a gazebo reference\uff1a\u5c06\u8be5\u6587\u4ef6\u4f5c\u7528\u5230\u5c0f\u8f66\u6587\u4ef6\u7684\u54ea\u4e2a\u8fde\u6746\u4e0a\uff0c\u8981\u4e0e\u6444\u50cf\u5934\u7684link name\u4fdd\u6301\u4e00\u81f4 frame name\uff1a\u6444\u50cf\u5934\u5750\u6807\u7cfb\u540d\u79f0\uff0c\u540c\u4e0a\uff0c\u4e0e\u6444\u50cf\u5934link name\u4e00\u81f4 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u88ab\u5f15\u7528\u7684link --> <gazebo reference=\"camera\"> <!-- \u7c7b\u578b\u8bbe\u7f6e\u4e3a camara --> <sensor type=\"camera\" name=\"camera_node\"> <update_rate>30.0</update_rate> <!-- \u66f4\u65b0\u9891\u7387 --> <!-- \u6444\u50cf\u5934\u57fa\u672c\u4fe1\u606f\u8bbe\u7f6e --> <camera name=\"head\"> <horizontal_fov>1.3962634</horizontal_fov> <image> <width>1280</width> <height>720</height> <format>R8G8B8</format> </image> <clip> <near>0.02</near> <far>300</far> </clip> <noise> <type>gaussian</type> <mean>0.0</mean> <stddev>0.007</stddev> </noise> </camera> <!-- \u6838\u5fc3\u63d2\u4ef6 --> <plugin name=\"gazebo_camera\" filename=\"libgazebo_ros_camera.so\"> <alwaysOn>true</alwaysOn> <updateRate>0.0</updateRate> <cameraName>/camera</cameraName> <imageTopicName>image_raw</imageTopicName> <cameraInfoTopicName>camera_info</cameraInfoTopicName> <frameName>camera</frameName> <hackBaseline>0.07</hackBaseline> <distortionK1>0.0</distortionK1> <distortionK2>0.0</distortionK2> <distortionK3>0.0</distortionK3> <distortionT1>0.0</distortionT1> <distortionT2>0.0</distortionT2> </plugin> </sensor> </gazebo> </robot> \uff082\uff09\u901a\u8fc7roslaunch\u547d\u4ee4\u6253\u5f00gazebo\u73af\u5883\u548crivz gazebo\u548c\u96f7\u8fbe\u4eff\u771f\u7ed3\u679c\u6ca1\u6709\u533a\u522b\uff0c\u73b0\u5728rviz\u4e2d\u6dfb\u52a0\u63d2\u4ef6\u67e5\u770b\u6444\u50cf\u5934\u7684\u60c5\u51b5 \u5c0f\u8f66\u8fd0\u52a8\u65f6\uff0c\u4e5f\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u6444\u50cf\u5934\u7684\u753b\u9762\u4f1a\u968f\u4e4b\u8fd0\u52a8 \u53ef\u4ee5\u901a\u8fc7\u8bdd\u9898\u53d1\u5e03\u547d\u4ee4\u67e5\u770b\u8fd0\u52a8\u662f\u7684\u6444\u50cf\u5934\u753b\u9762\u53d8\u5316\uff0ccmd_vel\u8bdd\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5tab\u952e\u81ea\u52a8\u8865\u9f50 rostopic pub -r 10 /cmd_vel geometry_msgs/Twist\"linear: x:1.0 y:2.0 z:0 angular: x:0 y:0 z:0.5\" 10\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1akinect\u6df1\u5ea6\u76f8\u673a\u4eff\u771f kinect\uff1a\u611f\u77e5\u969c\u788d\u7269\u56fe\u50cf\u548c\u8ddd\u79bb\u4fe1\u606f \uff081\uff09\u65b0\u5efa\u6587\u4ef6kinect.xacro\u5e76\u901a\u8fc7include\u6807\u7b7e\u96c6\u6210\u5230car\u5c0f\u8f66\u6a21\u578b\u6587\u4ef6\u4e2d <xacro:include filename=\"my_sensors_kinect.urdf.xacro\" /> \uff082\uff09\u7f16\u5199xacro\u6587\u4ef6 \u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\u4e3b\u8981\u8fd8\u662fgazebo reference\u548cframe name\uff0c\u4fee\u6539\u4e3a\u4f5c\u7528\u5230\u54ea\u4e2a\u8fde\u6746\u7684\u540d\u5b57 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <gazebo reference=\"kinect link\u540d\u79f0\"> <sensor type=\"depth\" name=\"camera\"> <always_on>true</always_on> <update_rate>20.0</update_rate> <camera> <horizontal_fov>${60.0*PI/180.0}</horizontal_fov> <image> <format>R8G8B8</format> <width>640</width> <height>480</height> </image> <clip> <near>0.05</near> <far>8.0</far> </clip> </camera> <plugin name=\"kinect_camera_controller\" filename=\"libgazebo_ros_openni_kinect.so\"> <cameraName>camera</cameraName>\u8bdd\u9898\u547d\u540d\u7a7a\u95f4 <alwaysOn>true</alwaysOn> <updateRate>10</updateRate> <imageTopicName>rgb/image_raw</imageTopicName>\u56fe\u50cf\u4fe1\u606f\u91c7\u96c6\u8bdd\u9898 <depthImageTopicName>depth/image_raw</depthImageTopicName>\u6df1\u5ea6\u4fe1\u606f\u91c7\u96c6\u8bdd\u9898 <pointCloudTopicName>depth/points</pointCloudTopicName> <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName> <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName> <frameName>kinect link\u540d\u79f0</frameName> <baseline>0.1</baseline> <distortion_k1>0.0</distortion_k1> <distortion_k2>0.0</distortion_k2> <distortion_k3>0.0</distortion_k3> <distortion_t1>0.0</distortion_t1> <distortion_t2>0.0</distortion_t2> <pointCloudCutoff>0.4</pointCloudCutoff> </plugin> </sensor> </gazebo> </robot> \uff083\uff09roslaunch\u542f\u52a8env.launch\uff08gazebo\u73af\u5883\uff09\u548csensor.launch\uff08rviz\u73af\u5883\uff09\u5373\u53ef\u770b\u5230\u6548\u679c \u200b gazebo\u4e2d\u7684\u73af\u5883\u4f1a\u663e\u793a\u51fa\u5df2\u7ecf\u914d\u7f6e\u8fc7\u7684\u96f7\u8fbe\u4fe1\u53f7\uff0c\u6df1\u5ea6\u76f8\u673a\u4fe1\u606f\u4e3b\u8981\u901a\u8fc7rviz\u67e5\u770b\uff0c\u548c\u6dfb\u52a0\u666e\u901a\u7684camera\u65b9\u6cd5\u4e00\u6837\uff0c\u5728rviz\u4e2d\u6dfb\u52a0camera\u7ec4\u4ef6 \u200b \u4e0e\u6dfb\u52a0\u67e5\u770b\u666e\u901a\u76f8\u673a\u4e0d\u540c\u7684\u662f\uff0c\u6b64\u65f6\u6211\u4eec\u7684\u8bdd\u9898\u91cc\u65e2\u6709\u666e\u901a\u76f8\u673a\u7684\u8bdd\u9898\uff0c\u4e5f\u6709\u6df1\u5ea6\u76f8\u673a\u7684\u8bdd\u9898\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u9009\u62e9depth\u76f8\u5173\u8bdd\u9898\u5373\u53ef\u67e5\u770b\u6df1\u5ea6\u76f8\u673a\u7684\u76f8\u5173\u4fe1\u606f\u3002 \uff084\uff09kinect\u70b9\u4e91\u4fe1\u606f\u663e\u793a\uff0c\u5728rviz\u4e2d\u6dfb\u52a0\u7ec4\u4ef6pointcloud2\u5e76\u8bbe\u7f6etopic\u8bdd\u9898camera/depth/points \u200b \u8fd9\u65f6\u4f1a\u53d1\u73b0\u5728rviz\u4e2d\u70b9\u4e91\u56fe\u50cf\u4fe1\u606f\u663e\u793a\u65f6\u9519\u4f4d\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728kinect\u4e2d\u56fe\u50cf\u6570\u636e\u4e0e\u70b9\u4e91\u6570\u636e\u4f7f\u7528\u4e86\u4e24\u5957\u5750\u6807\u7cfb\u7edf\uff0c\u4e14\u4e24\u5957\u5750\u6807\u7cfb\u7edf\u4f4d\u59ff\u5e76\u4e0d\u4e00\u81f4\u3002 \u89e3\u51b3\u65b9\u6848\uff1a \u672c\u6765\u70b9\u4e91\u4f7f\u7528\u7684\u662f\u8fde\u6746\u7684\u5750\u6807\u7cfb\uff0c\u9700\u8981\u4fee\u6539\u4e00\u4e0b\uff0c\u8fd9\u91cc\u547d\u540d\u4e3asupport_depth <frameName>support_depth</frameName> \u200b \u7531\u4e8e\u8be5\u5750\u6807\u7cfb\u5728\u673a\u5668\u4eba\u6a21\u578b\u914d\u7f6e\u6587\u4ef6\u4e2d\u5e76\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u9700\u8981\u5728\u542f\u52a8rviz\u7684launch\u6587\u4ef6\u4e2d\u624b\u52a8\u914d\u7f6e\u9759\u6001\u5750\u6807\u53d8\u6362\u4fe1\u606f. \u6ce8\u610f\uff1a \u8fd9\u91cc\u7684args\u53c2\u6570\u5206\u522b\u662fxyz\u4f4d\u7f6e\u504f\u79fb\u91cf\uff0czyx\u89d2\u5ea6\u504f\u79fb\u91cf\u548c\u7236\u7ea7\u5750\u6807\u7cfb\u5b50\u7ea7\u5750\u6807\u7cfb\u3002 <!--\u6dfb\u52a0support\u5230\u8fde\u6746\u7684\u5750\u6807\u53d8\u6362--> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"static_transform_publisher\" args=\"0 0 0 -1.57 0 -1.57 /support /support_depth\" \u5341\u3001\u673a\u5668\u4eba\u5bfc\u822a\u4eff\u771f 1\u3001\u5bfc\u822a\u5b9a\u4f4d\u65b9\u5f0f\uff1a \uff081\uff09\u901a\u8fc7\u91cc\u7a0b\u8ba1\u5b9a\u4f4d:\u65f6\u65f6\u6536\u96c6\u673a\u5668\u4eba\u7684\u901f\u5ea6\u4fe1\u606f\u8ba1\u7b97\u5e76\u53d1\u5e03\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e0e\u7236\u7ea7\u53c2\u8003\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u3002 \u4f18\u70b9:\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u4fe1\u606f\u662f\u8fde\u7eed\u7684\uff0c\u6ca1\u6709\u79bb\u6563\u7684\u8df3\u8dc3\u3002 \u7f3a\u70b9:\u91cc\u7a0b\u8ba1\u5b58\u5728\u7d2f\u8ba1\u8bef\u5dee\uff0c\u4e0d\u5229\u4e8e\u957f\u8ddd\u79bb\u6216\u957f\u671f\u5b9a\u4f4d\u3002 \uff082\uff09\u901a\u8fc7\u4f20\u611f\u5668\u5b9a\u4f4d:\u901a\u8fc7\u4f20\u611f\u5668\u6536\u96c6\u5916\u754c\u73af\u5883\u4fe1\u606f\u901a\u8fc7\u5339\u914d\u8ba1\u7b97\u5e76\u53d1\u5e03\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e0e\u7236\u7ea7\u53c2\u8003\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u3002 \u4f18\u70b9:\u6bd4\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u66f4\u7cbe\u51c6\uff1b \u7f3a\u70b9:\u4f20\u611f\u5668\u5b9a\u4f4d\u4f1a\u51fa\u73b0\u8df3\u53d8\u7684\u60c5\u51b5\uff0c\u4e14\u4f20\u611f\u5668\u5b9a\u4f4d\u5728\u6807\u5fd7\u7269\u8f83\u5c11\u7684\u73af\u5883\u4e0b\uff0c\u5176\u5b9a\u4f4d\u7cbe\u5ea6\u4f1a\u5927\u6253\u6298\u6263\u3002 \u4e24\u79cd\u5b9a\u4f4d\u65b9\u5f0f\u4f18\u7f3a\u70b9\u4e92\u8865\uff0c\u5e94\u7528\u65f6\u4e00\u822c\u4e8c\u8005\u7ed3\u5408\u4f7f\u7528\u3002 \uff083\uff09\u7ed3\u5408\u4f7f\u7528\u65f6\u7684\u5750\u6807\u53d8\u6362\u5173\u7cfb \u200b \u4e24\u79cd\u5b9a\u4f4d\u5b9e\u73b0\u4e2d\uff0c\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e00\u822c\u4f7f\u7528\u673a\u5668\u4eba\u6a21\u578b\u4e2d\u7684\u6839\u5750\u6807\u7cfb(base_link \u6216 base_footprint)\uff0c\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u65f6\uff0c\u7236\u7ea7\u5750\u6807\u7cfb\u4e00\u822c\u79f0\u4e4b\u4e3a odom\uff0c\u5982\u679c\u901a\u8fc7\u4f20\u611f\u5668\u5b9a\u4f4d\uff0c\u7236\u7ea7\u53c2\u8003\u7cfb\u4e00\u822c\u79f0\u4e4b\u4e3a map\u3002\u5f53\u4e8c\u8005\u7ed3\u5408\u4f7f\u7528\u65f6\uff0cmap \u548c odom \u90fd\u662f\u673a\u5668\u4eba\u6a21\u578b\u6839\u5750\u6807\u7cfb\u7684\u7236\u7ea7\uff0c\u8fd9\u662f\u4e0d\u7b26\u5408\u5750\u6807\u53d8\u6362\u4e2d\"\u5355\u7ee7\u627f\"\u7684\u539f\u5219\u7684\uff0c\u6240\u4ee5\uff0c\u4e00\u822c\u4f1a\u5c06\u8f6c\u6362\u5173\u7cfb\u8bbe\u7f6e\u4e3a: map -> doom -> base_link \u6216 base_footprint\u3002 2\u3001\u5bfc\u822a\u5b9e\u73b0\uff1aSLAM\u5efa\u56fe \u5148\u5b89\u88c5\u76f8\u5173\u7684ROS\u529f\u80fd\u5305: \u5b89\u88c5 gmapping \u5305(\u7528\u4e8e\u6784\u5efa\u5730\u56fe):sudo apt install ros- -gmapping \u5b89\u88c5\u5730\u56fe\u670d\u52a1\u5305(\u7528\u4e8e\u4fdd\u5b58\u4e0e\u8bfb\u53d6\u5730\u56fe):sudo apt install ros- -map-server \u5b89\u88c5 navigation \u5305(\u7528\u4e8e\u5b9a\u4f4d\u4ee5\u53ca\u8def\u5f84\u89c4\u5212):sudo apt install ros- -navigation \u65b0\u5efa\u529f\u80fd\u5305\uff0c\u5e76\u5bfc\u5165\u4f9d\u8d56: gmapping map_server amcl move_base\uff0c\u5176\u4e2dgampping\u7528\u4e8e\u6784\u5efa\u5730\u56fe\uff0cmap_server\u7528\u4e8e\u4fdd\u5b58\u4e0e\u8bfb\u53d6\u5730\u56fe\uff0camcl\u7528\u4e8e\u5b9a\u4f4d\uff0cmove_base\u7528\u4e8e\u8def\u5f84\u89c4\u5212 \uff081\uff09\u7f16\u5199gmapping\u76f8\u5173\u7684launch\u6587\u4ef6 \u590d\u5236\u5e76\u4fee\u6539\u5982\u4e0b: <launch> <param name=\"use_sim_time\" value=\"true\"/>\u662f\u5426\u4f7f\u7528\u4eff\u771f\u65f6\u95f4\uff08\u4eff\u771f\u65f6\u8981\u8bbe\u7f6e\u4e3aTrue\uff09 <node pkg=\"gmapping\" type=\"slam_gmapping\" name=\"slam_gmapping\" output=\"screen\"> <remap from=\"scan\" to=\"scan\"/>\u8bbe\u7f6e\u96f7\u8fbe\u8bdd\u9898\uff0c\u524d\u9762\u4eff\u771f\u96f7\u8fbe\u8bbe\u7f6e\u7684\u8bdd\u9898\u5c31\u662fscan <param name=\"base_frame\" value=\"base_footprint\"/><!--\u5e95\u76d8\u5750\u6807\u7cfb--> <param name=\"odom_frame\" value=\"odom\"/> <!--\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb--> <param name=\"map_update_interval\" value=\"5.0\"/>\u5730\u56fe\u66f4\u65b0\u9891\u7387\u95f4\u9694 <param name=\"maxUrange\" value=\"16.0\"/>\u96f7\u8fbe\u6d4b\u8bd5\u8303\u56f4\u6700\u592716m <param name=\"sigma\" value=\"0.05\"/> <param name=\"kernelSize\" value=\"1\"/> <param name=\"lstep\" value=\"0.05\"/> <param name=\"astep\" value=\"0.05\"/> <param name=\"iterations\" value=\"5\"/> <param name=\"lsigma\" value=\"0.075\"/> <param name=\"ogain\" value=\"3.0\"/> <param name=\"lskip\" value=\"0\"/> <param name=\"srr\" value=\"0.1\"/> <param name=\"srt\" value=\"0.2\"/> <param name=\"str\" value=\"0.1\"/> <param name=\"stt\" value=\"0.2\"/> <param name=\"linearUpdate\" value=\"1.0\"/> <param name=\"angularUpdate\" value=\"0.5\"/> <param name=\"temporalUpdate\" value=\"3.0\"/> <param name=\"resampleThreshold\" value=\"0.5\"/> <param name=\"particles\" value=\"30\"/> <param name=\"xmin\" value=\"-50.0\"/> <param name=\"ymin\" value=\"-50.0\"/> <param name=\"xmax\" value=\"50.0\"/> <param name=\"ymax\" value=\"50.0\"/> <param name=\"delta\" value=\"0.05\"/> <param name=\"llsamplerange\" value=\"0.01\"/> <param name=\"llsamplestep\" value=\"0.01\"/> <param name=\"lasamplerange\" value=\"0.005\"/> <param name=\"lasamplestep\" value=\"0.005\"/> </node> <node pkg=\"joint_state_publisher\" name=\"joint_state_publisher\" type=\"joint_state_publisher\" /> <node pkg=\"robot_state_publisher\" name=\"robot_state_publisher\" type=\"robot_state_publisher\" /> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" /> <!-- \u53ef\u4ee5\u4fdd\u5b58 rviz \u914d\u7f6e\u5e76\u540e\u671f\u76f4\u63a5\u4f7f\u7528--> <!-- <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find my_nav_sum)/rviz/gmapping.rviz\"/> --> </launch> \uff082\uff09\u542f\u52a8Gazebo\u4eff\u771f\u73af\u5883\u548c\u7f16\u5199\u597d\u7684slam.launch\u6587\u4ef6 \uff083\uff09\u5728RVIZ\u4e2d\u6dfb\u52a0\u7ec4\u4ef6 \u6dfb\u52a0\u673a\u5668\u4eba\u6a21\u578bRobotModel \u6dfb\u52a0Laserscan\u5e76\u8bbe\u7f6eTopic\u8bdd\u9898scan \u6dfb\u52a0\u5750\u6807\u7cfb\u7ec4\u4ef6TF\uff0cFram\u4e0b\u5373\u53ef\u627e\u5230map\uff0codom \u6dfb\u52a0map\u7ec4\u4ef6\u7528\u4e8e\u5efa\u56fe\uff0c\u8bbe\u7f6etopic\uff0c\u53d1\u5e03\u8bdd\u9898\u6805\u683c\u5730\u56fe\u6570\u636e\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3amap \u5373\u53ef\u770b\u5230\u5982\u4e0b\u6548\u679c\uff1a \uff084\uff09\u5728rviz\u4e2d\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u53ef\u4ee5\u5c06\u76ee\u524d\u914d\u7f6e\u4fdd\u5b58\uff1a\u5de6\u4e0a\u89d2save config as\uff0c\u4fdd\u5b58\u5230\u8be5\u529f\u80fd\u5305\u7684config\u6587\u4ef6\u5939\u4e0b\uff0c\u5e76\u5728rivz\u542f\u52a8\u4e2d\u6dfb\u52a0\u53c2\u6570\uff0c\u4ee5\u540e\u542f\u52a8\u5c31\u53ef\u4ee5\u81ea\u52a8\u914d\u7f6e\u3002 <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $find(\u529f\u80fd\u5305\u540d) \u529f\u80fd\u5305\u5185\u7684\u76f8\u5bf9\u8def\u5f84\"/> \uff085\uff09\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8282\u70b9 rosrun teleop_twist_keyboard teleop_twist_keyboard.py \u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\uff0c\u7ed5\u7740\u5730\u56fe\u8d70\u4e00\u5708\u5efa\u56fe\u3002 \u5efa\u56fe\u7ed3\u679c\u5982\u56fe\u6240\u793a\uff0c\u767d\u8272\u90e8\u5206\u662f\u65e0\u969c\u788d\u7269\u53ef\u4ee5\u8d70\u7684\u5730\u65b9\uff0c\u9ed1\u8272\u5708\u51fa\u90e8\u4f4d\u4e3a\u969c\u788d\u7269\u4fe1\u606f \uff086\uff09\u4fdd\u5b58\u5730\u56fe\uff08map_server\u5305\u91cc\u7684map_save\uff09 \u5982\u679c\u76f4\u63a5\u5173\u95edrviz\u9000\u51fa\uff0c\u90a3\u4e48\u5efa\u597d\u7684\u5730\u56fe\u5c06\u4f1a\u6d88\u5931\uff0c\u6240\u4ee5\u8981\u7f16\u5199launch\u6587\u4ef6\u8fdb\u884c\u4fdd\u5b58\u64cd\u4f5c <launch> <arg name=\"filename\" value=\"$(find mycar_nav)/map/nav\" /> <node name=\"map_save\" pkg=\"map_server\" type=\"map_saver\" args=\"-f $(arg filename)\" /> </launch> \u53ef\u4ee5\u770b\u5230\u5728\u6307\u5b9a\u8def\u5f84\u4e0b\u4ea7\u751f\u4e86\u4e24\u4e2a\u6587\u4ef6map_save.pgm\u548cmap_save.yaml \uff087\uff09\u8bfb\u53d6\u5730\u56fe\u4fe1\u606f\uff08map_server\u5305\u91cc\u7684map_server\uff09 \u65b0\u5efalaunch\u6587\u4ef6\uff0c\u4f7f\u7528map_server\u8c03\u7528\u4e0a\u4e00\u6b65\u4fdd\u5b58\u7684map_save.yaml\u6587\u4ef6 \u4ee3\u7801\u793a\u4f8b\u5982\u4e0b <launch> <node pkg=\"map_server\" type=\"map_server\" name=\"map_server\" args=\"$(find \u529f\u80fd\u5305\u540d)/\u529f\u80fd\u5305\u5185\u5230yaml\u6587\u4ef6\u7684\u8def\u5f84\"/> </launch> \u200b \u8fd9\u6837\uff0c\u6211\u4eec\u4e4b\u524d\u53d1\u5e03\u7684\u4fe1\u606f\u5c31\u4f1a\u4ee5\u8bdd\u9898\u7684\u5f62\u5f0f\u53d1\u5e03\u4e86\uff0c\u8981\u770b\u5230\u5730\u56fe\u7684\u53ef\u89c6\u5316\u6548\u679c\u6211\u4eec\u9700\u8981\u501f\u52a9rviz\uff0c\u53ef\u4ee5\u5728\u7ec8\u7aef\u6253\u5f00rviz\u5e76\u52a0\u5165map\u63d2\u4ef6\uff0c\u9009\u62e9topic\u4e3amap\uff0c\u5373\u53ef\u770b\u5230\u6548\u679c\u3002 3\u3001\u5bfc\u822a\u5b9e\u73b0\uff1aamcl\u5b9a\u4f4d \uff081\uff09\u9996\u5148\u7f16\u5199\u542f\u52a8amcl\u7684launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u5efa\u8bae\u590d\u5236\u7c98\u8d34\u6a21\u677f\uff0c\u518d\u4fee\u6539\u76f8\u5173\u7684\u53c2\u6570\u5373\u53ef\uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a ~\u4e3b\u76ee\u5f55\u4e0b\u8fdb\u5165amcl\u6587\u4ef6:roscd amcl ls\u67e5\u770b\u6587\u4ef6\u7ec4\u6210\uff0cls examples\u8fdb\u5165\u67e5\u770bexamples\u793a\u4f8b\u6587\u4ef6 example\u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u793a\u4f8b\u6587\u4ef6\uff0camcl_diff\u662f\u5dee\u901f\u673a\u5668\u4eba\uff0camcl_omni\u662f\u5168\u5411\u673a\u5668\u4eba \u901a\u8fc7\u6587\u672c\u7f16\u8f91\u5668gedit\u8fdb\u5165\u5bf9\u5e94\u7684launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u9009\u62e9amcl_diff\u6587\u4ef6 gedit example/amcl_diff.launch \u590d\u5236\u5230\u6211\u4eec\u81ea\u5df1\u65b0\u5efa\u7684launch\u6587\u4ef6\u4e2d\u5373\u53ef \uff082\uff09\u4fee\u6539launch\u6587\u4ef6 \u793a\u4f8b\u4e2d\u5df2\u7ecf\u8bbe\u7f6e\u4e86odom\u5750\u6807\u7cfb\uff0c\u6b64\u5916\u8fd8\u9700\u6dfb\u52a0\u673a\u5668\u4eba\u5750\u6807\u7cfb\u548c\u5730\u56fe\u5750\u6807\u7cfb\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb\u4e3abase_footprint\uff0c\u5730\u56fe\u5750\u6807\u7cfb\u53ef\u4ee5\u9009\u62e9\u6682\u4e0d\u8bbe\u7f6e\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684globalmap <launch> <node pkg=\"amcl\" type=\"amcl\" name=\"amcl\" output=\"screen\"> <!-- Publish scans from best pose at a max of 10 Hz --> <param name=\"odom_model_type\" value=\"diff\"/><!-- \u91cc\u7a0b\u8ba1\u6a21\u5f0f\u4e3a\u5dee\u5206 --> <param name=\"odom_alpha5\" value=\"0.1\"/> <param name=\"transform_tolerance\" value=\"0.2\" /> <param name=\"gui_publish_rate\" value=\"10.0\"/> <param name=\"laser_max_beams\" value=\"30\"/> <param name=\"min_particles\" value=\"500\"/> <param name=\"max_particles\" value=\"5000\"/> <param name=\"kld_err\" value=\"0.05\"/> <param name=\"kld_z\" value=\"0.99\"/> <param name=\"odom_alpha1\" value=\"0.2\"/> <param name=\"odom_alpha2\" value=\"0.2\"/> <!-- translation std dev, m --> <param name=\"odom_alpha3\" value=\"0.8\"/> <param name=\"odom_alpha4\" value=\"0.2\"/> <param name=\"laser_z_hit\" value=\"0.5\"/> <param name=\"laser_z_short\" value=\"0.05\"/> <param name=\"laser_z_max\" value=\"0.05\"/> <param name=\"laser_z_rand\" value=\"0.5\"/> <param name=\"laser_sigma_hit\" value=\"0.2\"/> <param name=\"laser_lambda_short\" value=\"0.1\"/> <param name=\"laser_lambda_short\" value=\"0.1\"/> <param name=\"laser_model_type\" value=\"likelihood_field\"/> <!-- <param name=\"laser_model_type\" value=\"beam\"/> --> <param name=\"laser_likelihood_max_dist\" value=\"2.0\"/> <param name=\"update_min_d\" value=\"0.2\"/> <param name=\"update_min_a\" value=\"0.5\"/> <param name=\"odom_frame_id\" value=\"odom\"/><!-- \u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb --> <param name=\"base_frame_id\" value=\"base_footprint\"/><!-- \u6dfb\u52a0\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb --> <param name=\"global_frame_id\" value=\"map\"/><!-- \u6dfb\u52a0\u5730\u56fe\u5750\u6807\u7cfb --> <param name=\"resample_interval\" value=\"1\"/> <param name=\"transform_tolerance\" value=\"0.1\"/> <param name=\"recovery_alpha_slow\" value=\"0.0\"/> <param name=\"recovery_alpha_fast\" value=\"0.0\"/> </node> </launch> \uff083\uff09\u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6 \u5305\u62ec\u542f\u52a8rviz\uff0c\u542f\u52a8\u5730\u56fe\u670d\u52a1\uff0c\u542f\u52a8amcl\u5b9a\u4f4d \uff084\uff09\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\u3001\u542f\u52a8amcl.launch\u6587\u4ef6\u3001\u542f\u52a8\u952e\u76d8\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\u8282\u70b9\uff08teleop_twist_keyboard\uff09\uff0c\u8fd9\u6837\uff0cgazebo\u73af\u5883\u3001rviz\u73af\u5883\u90fd\u6b63\u5e38\u6253\u5f00\u5e76\u53ef\u4ee5\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\u3002 \uff085\uff09\u63a5\u4e0b\u6765\u5728RVIZ\u4e2d\u6dfb\u52a0\u7ec4\u4ef6 RobotModel\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b map\u7ec4\u4ef6\u663e\u793a\u5730\u56fe posearray\u663e\u793a\u5b9a\u4f4d\u7ed3\u679c \uff086\uff09\u89c2\u5bdf\u7ed3\u679c \u542f\u7528\u952e\u76d8\u63a7\u5236\uff0c\u5728rviz\u4e2d\u5373\u53ef\u770b\u5230\u4f4d\u7f6e\u52a8\u6001\u53d8\u5316\u4f30\u8ba1 4\u3001\u5bfc\u822a\u5b9e\u73b0\u4e4b\u8def\u5f84\u89c4\u5212 \u200b move_base \u529f\u80fd\u5305\u63d0\u4f9b\u4e86\u57fa\u4e8e\u52a8\u4f5c(action)\u7684\u8def\u5f84\u89c4\u5212\u5b9e\u73b0\uff0cmove_base \u53ef\u4ee5\u6839\u636e\u7ed9\u5b9a\u7684\u76ee\u6807\u70b9\uff0c\u63a7\u5236\u673a\u5668\u4eba\u5e95\u76d8\u8fd0\u52a8\u81f3\u76ee\u6807\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5728\u8fd0\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u8fde\u7eed\u53cd\u9988\u673a\u5668\u4eba\u81ea\u8eab\u7684\u59ff\u6001\u4e0e\u76ee\u6807\u70b9\u7684\u72b6\u6001\u4fe1\u606f\uff0cmove_base\u4e3b\u8981\u7531\u5168\u5c40\u8def\u5f84\u89c4\u5212\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u7ec4\u6210\u3002 \u200b move_base\u5df2\u7ecf\u88ab\u96c6\u6210\u5230\u4e86navigation\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a sudo apt install ros-<ROS\u7248\u672c>-navigation \uff081\uff09\u6784\u5efa\u9002\u7528\u4e8e\u673a\u5668\u4eba\u5bfc\u822a\u7684\u4ee3\u4ef7\u5730\u56fe \u200b \u7531\u4e8e\u5bfc\u822a\u8fc7\u7a0b\u4e2d\uff0c\u969c\u788d\u7269\u4fe1\u606f\u662f\u53ef\u53d8\u7684\uff0c\u5bfc\u822a\u65f6\u673a\u5668\u4eba\u9700\u8981\u5b9e\u65f6\u83b7\u53d6\u5f53\u524d\u7684\u969c\u788d\u7269\u4fe1\u606f\uff0c\u4e14\u673a\u5668\u4eba\u5728\u9760\u8fd1\u969c\u788d\u7269\u8fb9\u7f18\u65f6\uff0c\u53ef\u80fd\u4f1a\u7531\u4e8e\u60ef\u6027\u3001\u673a\u5668\u4eba\u4f53\u7684\u4e0d\u89c4\u5219\u5916\u5f62\uff0c\u5728\u8f6c\u5f2f\u7b49\u8fc7\u7a0b\u4e2d\u53d1\u751f\u78b0\u649e\uff0cSLAM\u6784\u5efa\u7684\u9759\u6001\u5730\u56fe\u5728\u5bfc\u822a\u4e2d\u662f\u4e0d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7684\uff0c\u9700\u8981\u6784\u5efa\u5b9e\u65f6\u83b7\u53d6\u6570\u636e\u548c\u969c\u788d\u7269\u81a8\u80c0\u540e\u7684\u4ee3\u4ef7\u5730\u56fe\u3002 \u4ee3\u4ef7\u5730\u56fe\uff1a \u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\uff08\u5168\u5c40\u8def\u5f84\u89c4\u5212\uff09 \u672c\u5730\u4ee3\u4ef7\u5730\u56fe\uff08\u672c\u5730\u8def\u5f84\u89c4\u5212\uff09 \uff082\uff09\u4f7f\u7528move_base\u529f\u80fd\u5305\u7f16\u5199\u8def\u5f84\u89c4\u5212\u76f8\u5173\u5f97launch\u6587\u4ef6 \u590d\u5236\u8c03\u7528\u6a21\u677f\uff0c\u5c06\u529f\u80fd\u5305\u4fee\u6539\u4e3a\u81ea\u5df1\u529f\u80fd\u5305\u5f97\u540d\u5b57 <launch> <node pkg=\"move_base\" type=\"move_base\" respawn=\"false\" name=\"move_base\" output=\"screen\" clear_params=\"true\"> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/costmap_common_params.yaml\" command=\"load\" ns=\"global_costmap\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/costmap_common_params.yaml\" command=\"load\" ns=\"local_costmap\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/local_costmap_params.yaml\" command=\"load\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/global_costmap_params.yaml\" command=\"load\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/base_local_planner_params.yaml\" command=\"load\" /> </node> </launch> \uff083\uff09\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 \u5728\u529f\u80fd\u5305\u91cc\u65b0\u5efa\u6587\u4ef6\u5939\u547d\u540d\u4e3aparam\uff0c\u5c06\u4e0a\u6587\u4e2d\u5f97launch\u6587\u4ef6\u91cc\u6d89\u53ca\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u65b0\u5efa\u5230\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e2d \u7c98\u8d34\u6807\u51c6\u4f8b\u7a0b\u4e2d\u7684\u4ee3\u7801\uff0c\u628a\u5404\u79cd\u5750\u6807\u7cfb\u540d\u79f0\u548c\u673a\u5668\u4eba\u51e0\u4f55\u53c2\u6570\u4fee\u6539\u5230\u4e0e\u81ea\u5df1\u7684\u9879\u76ee\u5339\u914d\u3002 costmap_common_params.yaml \u8be5\u6587\u4ef6\u662fmove_base \u5728\u5168\u5c40\u8def\u5f84\u89c4\u5212\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u65f6\u8c03\u7528\u7684\u901a\u7528\u53c2\u6570\uff0c\u5305\u62ec:\u673a\u5668\u4eba\u7684\u5c3a\u5bf8\u3001\u8ddd\u79bb\u969c\u788d\u7269\u7684\u5b89\u5168\u8ddd\u79bb\u3001\u4f20\u611f\u5668\u4fe1\u606f\u7b49\u3002\u914d\u7f6e\u53c2\u8003\u5982\u4e0b: #\u673a\u5668\u4eba\u51e0\u4f55\u53c2\uff0c\u5982\u679c\u673a\u5668\u4eba\u662f\u5706\u5f62\uff0c\u8bbe\u7f6e robot_radius,\u5982\u679c\u662f\u5176\u4ed6\u5f62\u72b6\u8bbe\u7f6e footprint robot_radius: 0.12 #\u5706\u5f62 # footprint: [[-0.12, -0.12], [-0.12, 0.12], [0.12, 0.12], [0.12, -0.12]] #\u5176\u4ed6\u5f62\u72b6 obstacle_range: 3.0 # \u7528\u4e8e\u969c\u788d\u7269\u63a2\u6d4b\uff0c\u6bd4\u5982: \u503c\u4e3a 3.0\uff0c\u610f\u5473\u7740\u68c0\u6d4b\u5230\u8ddd\u79bb\u5c0f\u4e8e 3 \u7c73\u7684\u969c\u788d\u7269\u65f6\uff0c\u5c31\u4f1a\u5f15\u5165\u4ee3\u4ef7\u5730\u56fe raytrace_range: 3.5 # \u7528\u4e8e\u6e05\u9664\u969c\u788d\u7269\uff0c\u6bd4\u5982\uff1a\u503c\u4e3a 3.5\uff0c\u610f\u5473\u7740\u6e05\u9664\u4ee3\u4ef7\u5730\u56fe\u4e2d 3.5 \u7c73\u4ee5\u5916\u7684\u969c\u788d\u7269 #\u81a8\u80c0\u534a\u5f84\uff0c\u6269\u5c55\u5728\u78b0\u649e\u533a\u57df\u4ee5\u5916\u7684\u4ee3\u4ef7\u533a\u57df\uff0c\u4f7f\u5f97\u673a\u5668\u4eba\u89c4\u5212\u8def\u5f84\u907f\u5f00\u969c\u788d\u7269 inflation_radius: 0.2 #\u4ee3\u4ef7\u6bd4\u4f8b\u7cfb\u6570\uff0c\u8d8a\u5927\u5219\u4ee3\u4ef7\u503c\u8d8a\u5c0f cost_scaling_factor: 3.0 #\u5730\u56fe\u7c7b\u578b map_type: costmap #\u5bfc\u822a\u5305\u6240\u9700\u8981\u7684\u4f20\u611f\u5668 observation_sources: scan #\u5bf9\u4f20\u611f\u5668\u7684\u5750\u6807\u7cfb\u548c\u6570\u636e\u8fdb\u884c\u914d\u7f6e\u3002\u8fd9\u4e2a\u4e5f\u4f1a\u7528\u4e8e\u4ee3\u4ef7\u5730\u56fe\u6dfb\u52a0\u548c\u6e05\u9664\u969c\u788d\u7269\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u7528\u6fc0\u5149\u96f7\u8fbe\u4f20\u611f\u5668\u7528\u4e8e\u5728\u4ee3\u4ef7\u5730\u56fe\u6dfb\u52a0\u969c\u788d\u7269\uff0c\u518d\u6dfb\u52a0kinect\u7528\u4e8e\u5bfc\u822a\u548c\u6e05\u9664\u969c\u788d\u7269\u3002 scan: {sensor_frame: laser, data_type: LaserScan, topic: scan, marking: true, clearing: true} Copy global_costmap_params.yaml \u8be5\u6587\u4ef6\u7528\u4e8e\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570\u8bbe\u7f6e: global_costmap: global_frame: map #\u5730\u56fe\u5750\u6807\u7cfb robot_base_frame: base_footprint #\u673a\u5668\u4eba\u5750\u6807\u7cfb # \u4ee5\u6b64\u5b9e\u73b0\u5750\u6807\u53d8\u6362 update_frequency: 1.0 #\u4ee3\u4ef7\u5730\u56fe\u66f4\u65b0\u9891\u7387 publish_frequency: 1.0 #\u4ee3\u4ef7\u5730\u56fe\u7684\u53d1\u5e03\u9891\u7387 transform_tolerance: 0.5 #\u7b49\u5f85\u5750\u6807\u53d8\u6362\u53d1\u5e03\u4fe1\u606f\u7684\u8d85\u65f6\u65f6\u95f4 static_map: true # \u662f\u5426\u4f7f\u7528\u4e00\u4e2a\u5730\u56fe\u6216\u8005\u5730\u56fe\u670d\u52a1\u5668\u6765\u521d\u59cb\u5316\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\uff0c\u5982\u679c\u4e0d\u4f7f\u7528\u9759\u6001\u5730\u56fe\uff0c\u8fd9\u4e2a\u53c2\u6570\u4e3afalse. Copy local_costmap_params.yaml \u8be5\u6587\u4ef6\u7528\u4e8e\u5c40\u90e8\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570\u8bbe\u7f6e: local_costmap: global_frame: odom #\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb robot_base_frame: base_footprint #\u673a\u5668\u4eba\u5750\u6807\u7cfb update_frequency: 10.0 #\u4ee3\u4ef7\u5730\u56fe\u66f4\u65b0\u9891\u7387 publish_frequency: 10.0 #\u4ee3\u4ef7\u5730\u56fe\u7684\u53d1\u5e03\u9891\u7387 transform_tolerance: 0.5 #\u7b49\u5f85\u5750\u6807\u53d8\u6362\u53d1\u5e03\u4fe1\u606f\u7684\u8d85\u65f6\u65f6\u95f4 static_map: false #\u4e0d\u9700\u8981\u9759\u6001\u5730\u56fe\uff0c\u53ef\u4ee5\u63d0\u5347\u5bfc\u822a\u6548\u679c rolling_window: true #\u662f\u5426\u4f7f\u7528\u52a8\u6001\u7a97\u53e3\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u5728\u9759\u6001\u7684\u5168\u5c40\u5730\u56fe\u4e2d\uff0c\u5730\u56fe\u4e0d\u4f1a\u53d8\u5316 width: 3 # \u5c40\u90e8\u5730\u56fe\u5bbd\u5ea6 \u5355\u4f4d\u662f m height: 3 # \u5c40\u90e8\u5730\u56fe\u9ad8\u5ea6 \u5355\u4f4d\u662f m resolution: 0.05 # \u5c40\u90e8\u5730\u56fe\u5206\u8fa8\u7387 \u5355\u4f4d\u662f m\uff0c\u4e00\u822c\u4e0e\u9759\u6001\u5730\u56fe\u5206\u8fa8\u7387\u4fdd\u6301\u4e00\u81f4 Copy base_local_planner_params \u57fa\u672c\u7684\u5c40\u90e8\u89c4\u5212\u5668\u53c2\u6570\u914d\u7f6e\uff0c\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u8bbe\u5b9a\u4e86\u673a\u5668\u4eba\u7684\u6700\u5927\u548c\u6700\u5c0f\u901f\u5ea6\u9650\u5236\u503c\uff0c\u4e5f\u8bbe\u5b9a\u4e86\u52a0\u901f\u5ea6\u7684\u9608\u503c\u3002 TrajectoryPlannerROS: # Robot Configuration Parameters max_vel_x: 0.5 # X \u65b9\u5411\u6700\u5927\u901f\u5ea6 min_vel_x: 0.1 # X \u65b9\u5411\u6700\u5c0f\u901f\u901f max_vel_theta: 1.0 # min_vel_theta: -1.0 min_in_place_vel_theta: 1.0 acc_lim_x: 1.0 # X \u52a0\u901f\u9650\u5236 acc_lim_y: 0.0 # Y \u52a0\u901f\u9650\u5236 acc_lim_theta: 0.6 # \u89d2\u901f\u5ea6\u52a0\u901f\u9650\u5236 # Goal Tolerance Parameters\uff0c\u76ee\u6807\u516c\u5dee xy_goal_tolerance: 0.10 yaw_goal_tolerance: 0.05 # Differential-drive robot configuration # \u662f\u5426\u662f\u5168\u5411\u79fb\u52a8\u673a\u5668\u4eba holonomic_robot: false # Forward Simulation Parameters\uff0c\u524d\u8fdb\u6a21\u62df\u53c2\u6570 sim_time: 0.8 vx_samples: 18 vtheta_samples: 20 sim_granularity: 0.05 \uff084\uff09\u65b0\u5efalaunch\u6587\u4ef6\uff0c\u5c06\u9700\u8981\u7684map_server\u670d\u52a1\u3001amcl\u670d\u52a1\u3001rviz\u542f\u52a8\u96c6\u6210 <launch> <!-- \u8bbe\u7f6e\u5730\u56fe\u7684\u914d\u7f6e\u6587\u4ef6 --> <arg name=\"map\" default=\"nav.yaml\" /> <!-- \u8fd0\u884c\u5730\u56fe\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u52a0\u8f7d\u8bbe\u7f6e\u7684\u5730\u56fe--> <node name=\"map_server\" pkg=\"map_server\" type=\"map_server\" args=\"$(find navigation)/map/$(arg map)\"/> <!-- \u542f\u52a8AMCL\u8282\u70b9 --> <include file=\"$(find navigation)/launch/amcl.launch\" /> <!-- \u8fd0\u884cmove_base\u8282\u70b9 --> <include file=\"$(find navigation)/launch/path.launch\" /> <!-- \u8fd0\u884crviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find navigation)/rviz/navigation_test.rviz\" /> </launch> \uff085\uff09\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\uff0c\u8fd0\u884c\u96c6\u6210\u540e\u7684launch\u6587\u4ef6\uff0c\u5373\u53ef\u5b9e\u73b0\u5bfc\u822a \uff086\uff09\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u770b\u5230gazebo\u548crviz\u90fd\u542f\u52a8\u4e86\uff0c\u6dfb\u52a0rviz\u7ec4\u4ef6\uff1aRobotModel\u3001Map\u3001Posearray\u3001odometry \u901a\u8fc7\u83dc\u5355\u680f\u4e0a\u65b9\u76842D Nav Goal\u8bbe\u7f6e\u76ee\u6807\u70b9\uff0c\u4f1a\u53d1\u73b0\u5c0f\u8f66\u4f1a\u81ea\u884c\u671d\u76ee\u6807\u70b9\u8fd0\u52a8 \u200b \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7ee7\u7eed\u9009\u62e9map\u7684\u4e0d\u540c\u8bdd\u9898\uff0c\u5f97\u5230\u5168\u5c40\u548c\u5c40\u90e8\u7684\u4ee3\u4ef7\u5730\u56fe\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u6dfb\u52a0Path\uff0c\u770b\u5230\u5168\u5c40\u8def\u5f84\u89c4\u5212\u548c\u5c40\u90e8\u8def\u5f84\u89c4\u5212\u7684\u53ef\u89c6\u5316\u7ed3\u679c \u200b \u5982\u679c\u673a\u5668\u4eba\u51fa\u73b0\u8d70\u7684\u4e0d\u7a33\u7684\u60c5\u51b5\uff0c\u6447\u6447\u6643\u6643\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u53bb\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684base_local_planner_param\u4e2d\u8bbe\u7f6e\u524d\u8fdb\u6a21\u62df\u53c2\u6570\uff0c\u5c06sim_time\u8c03\u7684\u7a0d\u5fae\u5927\u4e9b","title":"ROS\u5b66\u4e60\u7b14\u8bb0"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros","text":"\u53c2\u8003\u8d44\u6599\uff1a B\u7ad9\u8d75\u865a\u5de6\uff1ahttps://www.bilibili.com/video/BV1Ci4y1L7ZZ?p=19&vd_source=a8e8676617fb04db42af59b530b145fd \u6240\u7528\u73af\u5883\uff1alinux20.04+ROS1 noetic demo\u6848\u4f8b\uff1a\u4f7f\u7528python\u5b9e\u73b0ROS\u7248\u672c\u7684hello world \uff08ROS\u5de5\u4f5c\u7a7a\u95f4\u53ca\u529f\u80fd\u5305\u521b\u5efa\u6d41\u7a0b\uff09","title":"ROS\u5b66\u4e60\u7b14\u8bb0"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#rospython","text":"","title":"\u4e00\u3001ROS\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\u53ca\u529f\u80fd\u5305\u6d41\u7a0b\u603b\u7ed3\u6574\u7406\uff08python\uff09"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1","text":"\u9009\u53d6\u81ea\u5df1\u8ba1\u7b97\u673a\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u4f5c\u4e3a\u81ea\u5df1\u7684\u5de5\u4f5c\u7a7a\u95f4 mkdir -p demo_ws/src \u8fd9\u91cc\u7684demo_ws\u662f\u7b14\u8005\u5de5\u4f5c\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002\u4e00\u5b9a\u8981\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u8bbe\u7f6e\u4e8c\u7ea7\u5b50\u6587\u4ef6\u5939\u5e76\u547d\u540d\u4e3asrc\uff0c\u4f5c\u4e3a\u4ee3\u7801\u7a7a\u95f4\u7528\u4e8e\u5b58\u653e\u540e\u7eed\u7f16\u5199\u7684\u529f\u80fd\u5305\u6e90\u4ee3\u7801\uff0c\u540d\u5b57\u4e0d\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002","title":"1\u3001\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2","text":"catkin_make \u6b63\u5e38\u60c5\u51b5\u4e0b\u5c31\u53ef\u4ee5\u770b\u5230\u7ec8\u7aef\u8f93\u51fa\u4e00\u4e9b\u65e5\u5fd7\u5e76\u770b\u5230\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u51fa\u73b0build\u548cdevel\u4e24\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u5373\u7f16\u8bd1\u6210\u529f\u3002 \u4f46\u662f\u5bf9\u4e8e\u7cfb\u7edf\u4e2d\u5b89\u88c5\u4e86anaconda\u7684\u7528\u6237\uff0c\u53ef\u80fd\u5b58\u5728\u4e0d\u6b62\u4e00\u4e2apython\u3002\u8fd9\u65f6\u5019\u5f88\u53ef\u80fd\u4f1a\u56e0\u4e3aROS\u548canaconda\u4e2dpython\u7248\u672c\u51b2\u7a81\u62a5\u9519\uff1aInvoking \u201ccmake\u201d failed\u3002\u51fa\u73b0\u8be5\u95ee\u9898\u7684\u7528\u6237\u53ea\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u6307\u540d\u6240\u7528\u7684python\u7248\u672c\uff08\u547d\u4ee4\u5982\u4e0b\uff09\u5373\u53ef\u6210\u529f\u7f16\u8bd1\u3002 catkin_make -DPYTHON_EXECUTABLE=/usr/bin/python3","title":"2\u3001\u7f16\u8bd1\u5de5\u4f5c\u7a7a\u95f4"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3","text":"\u8fdb\u5165src\u6587\u4ef6\u5939\u4e2d cd src \u521b\u5efa\u529f\u80fd\u5305 catkin_create_pkg helloworld roscpp rospy std_msgs helloworld\u662f\u529f\u80fd\u5305\u540d\uff0c\u529f\u80fd\u5305\u540d\u53ef\u81ea\u884c\u8bbe\u7f6e\uff0c\u540e\u9762\u9700\u8981\u8ddf\u4e0aroscpp\u3001rospy\u3001std-msgs\u8fd9\u4e9b\u5e38\u7528\u4f9d\u8d56\u3002\u5176\u4e2droscpp\u662f\u4f7f\u7528C++\u5b9e\u73b0\u7684\u5e93\uff0c\u800crospy\u5219\u662f\u4f7f\u7528python\u5b9e\u73b0\u7684\u5e93\uff0cstd_msgs\u662f\u6807\u51c6\u6d88\u606f\u5e93\uff0c\u521b\u5efaROS\u529f\u80fd\u5305\u65f6\uff0c\u4e00\u822c\u90fd\u4f1a\u4f9d\u8d56\u8fd9\u4e09\u4e2a\u5e93\u5b9e\u73b0\u3002 \u521b\u5efa\u6210\u529f\u540e\u53ef\u4ee5\u5728src\u76ee\u5f55\u4e0b\u770b\u5230\u4ee5\u529f\u80fd\u5305\u540d\u5b57\u547d\u540d\u7684\u6587\u4ef6\u5939\u548c\u914d\u7f6e\u6587\u4ef6CMakelist.txt.","title":"3\u3001\u521b\u5efa\u529f\u80fd\u5305"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4","text":"","title":"4\u3001\u7f16\u8f91\u6e90\u6587\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1ros","text":"cd helloworld","title":"\uff081\uff09\u8fdb\u5165ROS\u529f\u80fd\u5305"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2scripts","text":"\u6211\u4eec\u540e\u7eed\u7684python\u6e90\u6587\u4ef6\u90fd\u5b58\u653e\u5728\u8be5scripts\u6587\u4ef6\u4e2d mkdir scripts","title":"\uff082\uff09\u6dfb\u52a0scripts\u76ee\u5f55"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3python","text":"touch helloworld.py \u8fdb\u5165\u65b0\u5efa\u7684python\u6587\u4ef6\uff0c\u8f93\u5165python\u4ee3\u7801 #! /usr/bin/env python \"\"\" Python \u7248 HelloWorld \"\"\" #\u5bfc\u5305\uff1a import rospy #\u7f16\u5199\u4e3b\u5165\u53e3\uff1a if __name__ == \"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"Hello\") #\u8f93\u51fa\u65e5\u5fd7helloworld rospy.loginfo(\"Hello World!!!!\")","title":"\uff083\uff09\u65b0\u5efa\u4e00\u4e2apython\u6587\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4-python","text":"chmod +x \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d.py chmod\u662flinux\u4e2d\u7528\u4e8e\u6539\u53d8\u6587\u4ef6\u6743\u9650\u7684\u547d\u4ee4\uff0c\u6587\u4ef6\u6709rwx\uff0c\u5373\u8bfb\u53d6\uff08r\uff09\u3001\u5199\u5165\uff08w\uff09\u3001\u6267\u884c\uff08x\uff09\u3002\u6211\u4eec\u540e\u9762\u9700\u8981\u6267\u884cpython\u6587\u4ef6\uff0c\u6240\u4ee5\u8fd9\u91cc\u9700\u8981\u6253\u5f00\u8be5\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\u3002","title":"\uff084\uff09\u4e3a python \u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#5camkelisttxt","text":"162\u2014165\u884c\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u628a\u81ea\u5b9a\u4e49\u6587\u4ef6\u540d\u586b\u5165\u3002\u8be5\u914d\u7f6e\u53ef\u4ee5\u4e3apython\u6587\u4ef6\u9009\u62e9\u5408\u9002\u7684\u89e3\u91ca\u5668\uff0cnoetic\u7248\u672c\u4e4b\u524d\u7684\u7528\u6237\u53ef\u80fd\u4e0d\u9700\u8981\u914d\u7f6e\u4e5f\u53ef\u4ee5\u6210\u529f\u8fd0\u884c\u3002 catkin_install_python(PROGRAMS scripts/\u81ea\u5b9a\u4e49\u6587\u4ef6\u540d.py DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION} )","title":"5\u3001\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6CamkeList.txt"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#6","text":"cd \u81ea\u5b9a\u4e49\u7a7a\u95f4\u540d\u79f0 catkin_make","title":"6\u3001\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u76ee\u5f55\u5e76\u7f16\u8bd1"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#7","text":"","title":"7\u3001\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u76ee\u5f55\u5e76\u6267\u884c"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#11","text":"roscore roscore\u7528\u4e8e\u542f\u52a8ros\u6838\u5fc3\uff0c\u5728ros\u4e2d\uff0c\u6240\u6709\u7684\u8282\u70b9\u90fd\u662f\u4f9d\u8d56\u4e8eroscore","title":"\uff081\uff09\u5148\u542f\u52a8\u547d\u4ee4\u884c1\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#22","text":"\u56de\u5230\u7f16\u8bd1\u7ed3\u675f\u7684\u7a97\u53e3\uff0c\u8fdb\u5165\u5f00\u53d1\u7a7a\u95f4\uff08devel\uff09\u6267\u884csetup.bash\uff0c\u8fd9\u4e00\u6b65\u662f\u4e3a\u4e86\u5237\u65b0\u73af\u5883\u53d8\u91cf\u3002 \u6267\u884c\u6587\u4ef6\u547d\u4ee4\uff1arosrun \u529f\u80fd\u5305\u540d \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d cd \u5de5\u4f5c\u7a7a\u95f4 source ./devel/setup.bash rosrun helloworld helloworld.py \u8f93\u51fa\u7ed3\u679c: Hello World!!!!","title":"\uff082\uff09\u518d\u542f\u52a8\u547d\u4ee4\u884c2\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_1","text":"","title":"\u4e8c\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u8bdd\u9898\u901a\u4fe1"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_1","text":"import rospy from std_msgs.msg import String #\u53d1\u5e03\u6d88\u606f\u7c7b\u578b \"\"\" \u4f7f\u7528python\u5b9e\u73b0\u6d88\u606f\u7684\u53d1\u5e03\u65b9\u7684\u6d41\u7a0b: 1 \u5bfc\u5305 2 \u521d\u59cb\u5316ros\u8282\u70b9 3 \u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 4 \u7f16\u5199\u53d1\u5e03\u903b\u8f91\u5e76\u53d1\u5e03\u6570\u636e \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9(\u4f20\u5165\u8282\u70b9\u540d\u79f0\u5373\u53ef) rospy.init_node(\"huati\") #\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 pub = rospy.Publisher(\"secret\",String,queue_size=10) #\u7f16\u5199\u53d1\u5e03\u903b\u8f91\u5e76\u53d1\u5e03\u6570\u636e #\u521b\u5efa\u6570\u636e msg = String() #\u6307\u5b9a\u53d1\u5e03\u9891\u7387 rate = rospy.Rate(1)#\u5355\u4f4d\u662fHz #\u8bbe\u7f6e\u8ba1\u6570\u5668 count = 0 #\u4f7f\u7528\u6b7b\u5faa\u73af\u53d1\u5e03\u6570\u636e while not rospy.is_shutdown():#\u5224\u65adros\u8282\u70b9\u662f\u5426\u5173\u95ed\uff0c\u672a\u5173\u95ed\u5219\u8f93\u51fafalse\uff0c\u5173\u95edTRUE,\u8fd9\u91cc\u6ca1\u6709\u5173\u95ed\u7684\u65f6\u5019\u8fdb\u5165\u5faa\u73af\u4f53\u53d1\u5e03\u6570\u636e count +=1 msg.data = \"hello\"+str(count) #\u53d1\u5e03\u6570\u636e pub.publish(msg) #\u65e5\u5fd7\u8f93\u51fa rospy.loginfo(\"\u8bdd\u9898\u53d1\u5e03\u7684\u6570\u636e\u662f\uff1a%s\",msg.data) rate.sleep()#\u6839\u636e\u524d\u9762\u8bbe\u7f6e\u7684rate\uff0c\u4f11\u7720\u4e00\u5b9a\u65f6\u95f4\uff0c\u4f7f\u7a0b\u5e8f\u6309\u7167\u6307\u5b9a\u9891\u7387\u8f93\u51fa\u76f8\u5173\u6d88\u606f #\u663e\u793a\u8bdd\u9898\u53d1\u5e03\u4fe1\u606f\uff1arostopic echo secret\uff0c\u540e\u9762\u8fd9\u4e2a\u662f\u8bdd\u9898\u53d1\u5e03\u65b9\u7684\u540d\u5b57 #\u5bfc\u5305 import rospy from std_msgs.msg import String #\u5bfc\u5165\u6d88\u606f\u683c\u5f0f def doMsg(msg): rospy.loginfo(\"\u6211\u8ba2\u9605\u7684\u6570\u636e\uff1a%s\",msg.data) #\u7f16\u5199\u7a0b\u5e8f\u4e3b\u5165\u53e3 if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"huahua\") #\u521b\u5efa\u8ba2\u9605\u8005\u5bf9\u8c61 sub = rospy.Subscriber(\"secret\",String,doMsg,queue_size=10)#\u6ce8\u610f\u5927\u5199 #\u56de\u8c03\u51fd\u6570 #\u5728def doMsg rospy.spin()#ros\u6d88\u606f\u56de\u8c03\u5904\u7406\u51fd\u6570\uff0c\u52a0\u4e86\u8fd9\u4e2a\u8ba2\u9605\u65b9\u624d\u80fd\u6536\u5230\u6d88\u606f","title":"1\u3001\u901a\u4fe1\u673a\u5236\u53ca\u76f8\u5173\u4ee3\u7801"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2ros","text":"\u5373\u4f7f\u662f\u4e0d\u540c\u8bed\u8a00\u7f16\u5199\u7684\u8282\u70b9\u4e5f\u53ef\u4ee5\u4e92\u76f8\u901a\u4fe1\uff0c\u53ea\u8981\u4fdd\u8bc1\u53d1\u5e03\u65b9\u548c\u8ba2\u9605\u65b9\u4e4b\u95f4\u6709\u76f8\u540c\u7684\u8bdd\u9898\u5373\u53ef\u3002","title":"2\u3001ros\u7684\u89e3\u8026\u5408\u673a\u5236\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3_1","text":"\u200b \u5728 ROS \u901a\u4fe1\u534f\u8bae\u4e2d\uff0c\u6570\u636e\u8f7d\u4f53\u662f\u4e00\u4e2a\u8f83\u4e3a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u5728\u4e0a\u4e00\u6848\u4f8b\u4e2d\uff0cROS \u4e2d\u901a\u8fc7 std_msgs \u5c01\u88c5\u4e86\u4e00\u4e9b\u539f\u751f\u7684\u6570\u636e\u7c7b\u578b,\u6bd4\u5982:String\u3001Int32\u3001Int64\u3001Char\u3001Bool\u3001Empty.... \u4f46\u662f\uff0c\u8fd9\u4e9b\u6570\u636e\u4e00\u822c\u53ea\u5305\u542b\u4e00\u4e2a data \u5b57\u6bb5\uff0c\u7ed3\u6784\u7684\u5355\u4e00\u610f\u5473\u7740\u529f\u80fd\u4e0a\u7684\u5c40\u9650\u6027\uff0c\u5f53\u4f20\u8f93\u4e00\u4e9b\u590d\u6742\u7684\u6570\u636e\uff0c\u6bd4\u5982: \u6fc0\u5149\u96f7\u8fbe\u7684\u4fe1\u606f... std_msgs \u7531\u4e8e\u63cf\u8ff0\u6027\u8f83\u5dee\u800c\u663e\u5f97\u529b\u4e0d\u4ece\u5fc3\uff0c\u8fd9\u79cd\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6d88\u606f\u7c7b\u578b \u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b\uff0c\u7c7b\u4f3cC\u8bed\u8a00\u4e2d\u7684\u7ed3\u6784\u4f53\uff0c\u5728\u6240\u7528\u5230\u7684\u6570\u636e\u7ed3\u6784\u8f83\u4e3a\u590d\u6742\u7684\u65f6\u5019\u4f7f\u7528\u3002 \u7ed3\u6784\u662f\uff1a\u6570\u636e\u7c7b\u578b \u6570\u636e\u540d\u79f0 \u6d41\u7a0b\uff1a","title":"3\u3001\u81ea\u5b9a\u4e49\u53d1\u5e03\u6d88\u606f\u7c7b\u578b\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1msg","text":"\u5728\u529f\u80fd\u5305\u4e2d\u65b0\u5efa\u4e00\u4e2amsg\u6587\u4ef6\uff0c\u5199\u4e0a\u6570\u636e\u7c7b\u578b\u548c\u6570\u636e\u540d\u79f0 string name uint16 age float64 height","title":"\uff081\uff09\u65b0\u5efamsg\u6587\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2msg","text":"\u2460\u521b\u5efa\u5b8c\u6210\u540e\u8fd8\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u9700\u8981\u5728package.xml\u4e2d\u505a\u76f8\u5e94\u914d\u7f6e\uff0c\u6dfb\u52a0\u4f9d\u8d56\u201cmessage_generation\u201d\u6d88\u606f\u751f\u6210\uff0c\u9700\u8981\u8fd0\u884c\uff0c\u6240\u4ee5\u9700\u8981\u5bfc\u5165message_runtime \u2461\u914d\u7f6eCMakelist \u6dfb\u52a0\u4f9d\u8d56\u5305\uff1amessage_generation \u8fd9\u91ccfind_package\u662f\u5728\u7f16\u8bd1\u81ea\u5b9a\u4e49\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u73b0\u6709\u529f\u80fd\u5305\uff0c\u5982\u679c\u8fd9\u91cc\u6dfb\u52a0\u7684\u4f9d\u8d56\u5305\u6709\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u5728\u7f16\u8bd1\u65f6\u62a5\u9519\u3002 \u6dfb\u52a0\u81ea\u5b9a\u4e49message\u6587\u4ef6\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u5c06\u793a\u4f8b\u6587\u4ef6\u540d\u6539\u4e3a\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u6587\u4ef6\u540d\u201cPerson.msg\u201c \u5c06generation message\u6ce8\u91ca\u653e\u5f00 \u653e\u5f00\u6ce8\u91ca\u5e76\u6dfb\u52a0message_runtime\u3002 \u8fd9\u91cc\u7684catkin_package\u4e0e\u524d\u6587\u4e2d\u7684find_package\u662f\u4e00\u79cd\u5bf9\u5e94\u5173\u7cfb\uff0c\u81ea\u5b9a\u4e49\u529f\u80fd\u5305\u4f9d\u8d56\u4e8efind_package\u4e2d\u7684\u529f\u80fd\u5305\uff0c\u800cfind-package\u4e2d\u7684\u529f\u80fd\u5305\u53c8\u4f9d\u8d56\u4e8ecatkin_package\u4e2d\u7684\u529f\u80fd\u5305 \u3002\u4ed6\u4eec\u4e4b\u95f4\u662f\u5c42\u5c42\u4f9d\u8d56\u7684\u5173\u7cfb\u3002\u5982\u679c\u8fd9\u91cc\u6dfb\u52a0\u7684\u4f9d\u8d56\u5305\u6709\u95ee\u9898\uff0c\u90a3\u4e48\u5373\u4f7f\u7f16\u8bd1\u901a\u8fc7\uff0c\u8fd0\u884c\u65f6\u53ef\u80fd\u4f9d\u7136\u4f1a\u51fa\u73b0\u62a5\u9519\u3002","title":"\uff082\uff09\u81ea\u5b9a\u4e49msg\u6587\u4ef6\u6240\u9700\u76f8\u5173\u914d\u7f6e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3_2","text":"ctrl+shift+B\u5373\u5f00\u59cb\u7f16\u8bd1\u529f\u80fd\u5305\uff0c\u672a\u629b\u51fa\u5f02\u5e38\u5373\u7f16\u8bd1\u6210\u529f \u7f16\u8bd1\u6210\u529f\u540e\u4f1a\u751f\u6210\u4e00\u4e9b\u4e2d\u95f4\u6587\u4ef6\uff0c\u6211\u4eec\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684\u5f00\u53d1\u7a7a\u95f4\uff08devel\u6587\u4ef6\u5939\uff09\uff0c\u53ef\u4ee5\u770b\u5230lib\u6587\u4ef6\u5939\u4e0bpython3\u6587\u4ef6\u5939\u4e2d\u751f\u6210\u4e86_Person.py\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542b\u4e86\u521a\u624d\u65b0\u5efa\u7684\u51e0\u4e2a\u91cf\uff0c\u540e\u7eed\u5c31\u53ef\u4ee5\u8c03\u7528\u3002","title":"\uff083\uff09\u7f16\u8bd1"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_2","text":"","title":"\u4e09\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u670d\u52a1\u901a\u4fe1"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_2","text":"\u670d\u52a1\u901a\u4fe1\u9002\u7528\u4e8e\u5bf9\u5b9e\u65f6\u6027\u6709\u8981\u6c42\uff0c\u5177\u6709\u4e00\u5b9a\u903b\u8f91\u5904\u7406\u529f\u80fd\u7684\u5e94\u7528\u573a\u666f\u3002\u4ee5\u8bf7\u6c42\u76f8\u5e94\u7684\u6a21\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u4e00\u79cd\u901a\u4fe1\u65b9\u5f0f\u3002\u670d\u52a1\u901a\u4fe1\u548c\u8bdd\u9898\u901a\u4fe1\u7684\u533a\u522b\u5728\u4e8e\uff0c\u670d\u52a1\u901a\u4fe1\u662f\u8bf7\u6c42\u5e94\u7b54\u673a\u5236\uff0c\u5f53\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u670d\u52a1\u7aef\u624d\u4f1a\u53d1\u9001\u6570\u636e\uff0c\u800c\u8bdd\u9898\u901a\u4fe1\u662f\u8ba2\u9605\u540e\uff0c\u8ba2\u9605\u65b9\u88ab\u52a8\u63a5\u6536\u53d1\u5e03\u65b9\u6240\u6709\u4fe1\u606f\u3002\u4e14\u670d\u52a1\u901a\u4fe1\u673a\u5236\u662f\u53ef\u4ee5\u591a\u5bf9\u591a\u7684\u3002 \u670d\u52a1\u901a\u4fe1\u673a\u5236\u793a\u610f\u56fe\uff1a","title":"1\u3001\u670d\u52a1\u901a\u4fe1\u673a\u5236\u53ca\u793a\u610f\u56fe"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2_1","text":"demo\uff1a\u5b9e\u73b0\u4e24\u4e2a\u6574\u578b\u6570\u76f8\u52a0\u6c42\u548c\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u4e24\u4e2a\u6574\u578b\u6570\uff0c\u670d\u52a1\u7aef\u5bf9\u5176\u6c42\u548c\u3002 \u200b \u670d\u52a1\u901a\u4fe1\u4e5f\u9700\u8981\u81ea\u5b9a\u4e49\u670d\u52a1\u6570\u636e\u7c7b\u578b\uff0c\u5373\u81ea\u5b9a\u4e49srv\u6587\u4ef6\uff0c\u8be5\u8fc7\u7a0b\u548c\u81ea\u5b9a\u4e49msg\u6587\u4ef6\u975e\u5e38\u7c7b\u4f3c\u3002\u4e3b\u8981\u5b9e\u73b0\u6d41\u7a0b\u5206\u4e3a\u4ee5\u4e0b\u4e09\u6b65\uff1a\u2460\u6309\u7167\u56fa\u5b9a\u683c\u5f0f\u521b\u5efasrv\u6587\u4ef6\u2461\u7f16\u8f91\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u2462\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 \u200b \u5f00\u59cb\u4e4b\u524d\u9996\u5148\u8981\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u7684src\u6587\u4ef6\u5939\u4e2d\u65b0\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\uff0c\u53ef\u4ee5\u7528catkin_create_pkg \u529f\u80fd\u5305\u540d \u4f9d\u8d56\uff0c\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u529f\u80fd\u5305\u3002\u8fd9\u91cc\u6211\u547d\u540d\u4e3aserver_client\u3002","title":"2\u3001\u670d\u52a1\u901a\u4fe1\u5177\u4f53\u5b9e\u73b0\u6d41\u7a0b"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1srv","text":"\u200b \u5728\u65b0\u5efa\u529f\u80fd\u5305server_client\u4e2d\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u547d\u540d\u4e3asrv,\u5728srv\u6587\u4ef6\u4e2d\u65b0\u5efa\u6587\u4ef6\u547d\u540d\u4e3aAddInts.srv\u7528\u4e8e\u5b58\u653e\u6211\u4eec\u7684\u6d88\u606f\u8f7d\u4f53\u3002 srv\u6587\u4ef6\u4e2d\u5b58\u653e\u7684\u53d8\u91cf\u7ed3\u6784\u4f53\u6309\u7167\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u7528---\u9694\u5f00","title":"\uff081\uff09\u6309\u7167\u56fa\u5b9a\u683c\u5f0f\u521b\u5efasrv\u6587\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2packagexmlcmakelisttxt","text":"\u2460\u9996\u5148\u7f16\u8f91package.xml\u6587\u4ef6 \u2461\u7f16\u8f91CMakelist.txt\u6587\u4ef6 \u6ce8\u610f\u4e0b\u9762\u8fd9\u4e2a\u4e0d\u540c\u4e8e\u8bdd\u9898\u901a\u4fe1\uff0c\u9700\u8981\u914d\u7f6esrv\u76f8\u5173\u90e8\u5206\uff0c\u5c06\u6ce8\u91ca\u653e\u5f00\uff0c\u5e76\u628a\u6211\u4eec\u65b0\u5efa\u7684AddInts.srv\u66f4\u6362\u5230\u6587\u4ef6\u4e0b\u9762 \u5c06generate_messages\u6ce8\u91ca\u653e\u5f00\uff0c\u56e0\u4e3a\u8fd9\u91cc\u867d\u7136\u6211\u4eec\u7684\u901a\u4fe1\u6570\u636e\u683c\u5f0f\u662f\u81ea\u5b9a\u4e49\u7684\uff0c\u4f46\u662f\u5b83\u7684\u4ea7\u751f\u4f9d\u7136\u4f9d\u8d56\u4e8e\u6807\u51c6\u5305std_msgs \u653e\u5f00\u6ce8\u91cacatkin_packages\uff0c\u7c7b\u4f3c\u8bdd\u9898\u901a\u4fe1\uff0c\u8fd9\u91cc\u4e5f\u662f\u4e3a\u4e86\u6ee1\u8db3\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5230\u8fd9\u91cc\u5462\uff0c\u6211\u4eec\u7684\u914d\u7f6e\u5c31\u7ec8\u4e8e\u5b8c\u6210\u5566~\u63a5\u4e0b\u6765\u8fdb\u5165\u7f16\u8bd1\u73af\u8282 \uff083\uff09\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 ctrl+shift+B \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u7684\u7f16\u8bd1\u5e76\u672a\u629b\u51fa\u5f02\u5e38 \u5982\u679c\u8fd9\u91cc\u62a5\u9519\u201cInvoking \u201ccmake\u201dfailed\uff0c\u5f88\u6709\u53ef\u80fd\u662f\u5305\u540d\u5199\u9519\u5566\uff0c\u56de\u53bb\u68c0\u67e5\u4e00\u4e0b\u91cd\u65b0\u7f16\u8bd1\u5c31\u597d\u5566","title":"\uff082\uff09\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6package.xml\u548cCMakelist.txt"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3_3","text":"\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u5df2\u7ecf\u5728\u5f00\u53d1\u7a7a\u95f4devel\u4e2d\u4ea7\u751f\u4e86\u4e00\u4e9b\u540e\u7eed\u88ab\u8c03\u7528\u5230\u7684\u6587\u4ef6\u3002\u8fd9\u6837\u6211\u4eec\u7684\u6570\u636e\u7ed3\u6784\u6587\u4ef6\u5c31\u914d\u7f6e\u597d\u5566~\u53ef\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b65\u7684\u5f00\u53d1\u54af","title":"\uff083\uff09\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4srv","text":"\u6a21\u578b\u5b9e\u73b0\u4e2d\uff1arosmaster\u53ef\u4ee5\u901a\u8fc7roscore\u542f\u52a8\uff0c\u5efa\u7acb\u8fde\u63a5\u7684\u5177\u4f53\u8fc7\u7a0b\u5df2\u88ab\u5b98\u65b9\u5c01\u88c5\u597d \u6211\u4eec\u9700\u8981\u505a\u7684\u5de5\u4f5c\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u90e8\u5206\uff1a\u2460\u670d\u52a1\u7aef\u7a0b\u5e8f\u7f16\u5199\u2461\u5ba2\u6237\u7aef\u7a0b\u5e8f\u7f16\u5199\u2462\u6570\u636e","title":"\uff084\uff09\u81ea\u5b9a\u4e49srv\u6587\u4ef6\u7684\u8c03\u7528"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#vscode","text":"\u200b \u4f7f\u7528\u81ea\u5b9a\u4e49srv\u6587\u4ef6\u65f6\uff0c\u9700\u8981\u5bf9VScode\u8fdb\u884c\u4e00\u4e9b\u914d\u7f6e\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f7fVS\u63d0\u4f9b\u5bf9\u5e94\u7684\u8bed\u6cd5\u9ad8\u4eae\uff0c\u4fbf\u4e8e\u6211\u4eec\u7f16\u7a0b\uff0c\u4e5f\u80fd\u9632\u6b62VScode\u8bef\u629b\u5f02\u5e38\u3002\u4e0d\u914d\u7f6e\u4e5f\u4e0d\u5f71\u54cd\u4f7f\u7528\u3002","title":"VScode\u914d\u7f6e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#_1","text":"\u5b9a\u4f4d\u5230\u529f\u80fd\u5305\uff0c\u65b0\u5efa\u6587\u4ef6\u5939scripts\uff0c\u65b0\u5efa\u6587\u4ef6server.py \u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u7528\u5230\u7684\u51fd\u6570rospy.Service\uff08\u201d\u8bdd\u9898\u540d\u201c\uff0c\u6570\u636e\u7c7b\u578b\uff0c\u56de\u8c03\u51fd\u6570\uff09\uff0c\u8bdd\u9898\u540d\u81ea\u5b9a\u4e49\uff08\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff09\uff0c\u6570\u636e\u7c7b\u578b\u53d6\u51b3\u4e8esrv\u6587\u4ef6\u7684\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u56de\u8c03\u51fd\u6570\u81ea\u5df1\u7f16\u5199\u548cspin()\u6210\u5bf9\u51fa\u73b0\u3002 #! /usr/bin/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse #\u8fd9\u91cc\u53ef\u4ee5import*\uff0c\u4e0d\u7528\u5199\u6e05\u695a\u5177\u4f53\u7684\u7c7b\u548c\u5bf9\u8c61\uff0c\u8fd9\u6837\u4f1a\u628a\u8be5\u6587\u4ef6\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u5bfc\u5165\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u6587\u4ef6\u5927\u7684\u65f6\u5019\u8fd9\u6837\u5904\u7406\u4f1a\u53d8\u6162\u5f88\u591a \"\"\" \u670d\u52a1\u7aef\uff1a\u89e3\u6790\u5ba2\u6237\u9700\u6c42\uff0c\u4ea7\u751f\u54cd\u5e94 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u670d\u52a1\u7aef\u5bf9\u8c61 4\u3001\u6570\u636e\u5904\u7406\u903b\u8f91(\u56de\u8c03\u51fd\u6570) 5\u3001spin() \"\"\" #\u53c2\u6570\uff1a\u5c01\u88c5\u4e86\u8bf7\u6c42\u6570\u636e #\u8fd4\u56de\u503c\uff1a\u54cd\u5e94\u6570\u636e def doAdd(request): #\u89e3\u6790\u8bf7\u6c42\u63d0\u4ea4\u7684\u4e24\u4e2a\u6570\u5b57 num1 = request.num1 num2 = request.num2 #\u5bf9\u89e3\u6790\u51fa\u7684\u6570\u5b57\u8fdb\u884c\u6c42\u548c sum = num1+num2 #\u521b\u5efa\u54cd\u5e94\u5bf9\u8c61\uff0c\u5c06\u8fd4\u56de\u503c\u5c01\u88c5\u5165\u54cd\u5e94\u5bf9\u8c61 response = AddIntsResponse() response.sum = sum rospy.loginfo(\"\u670d\u52a1\u5668\u89e3\u6790\u7684\u6570\u636e\u662fnum1=%d,num2=%d,\u6c42\u548c\u7ed3\u679csum=%d\",num1,num2,sum) return response if __name__==\"__main__\": #\u521d\u59cb\u5316ROS\u8282\u70b9 rospy.init_node(\"fuwu\") #\u521b\u5efa\u670d\u52a1\u5bf9\u8c61,\u6ce8\u610f\u51fd\u6570\u5927\u5c0f\u5199,\u6570\u636e\u7c7b\u578b\u53d6\u51b3\u4e8esrv\u6587\u4ef6\u7684\u6587\u4ef6\u540d server = rospy.Service(\"addints\",AddInts,doAdd) rospy.loginfo(\"\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\u4e86\") rospy.spin() \u914d\u7f6eCMakelist.txt \u6539\u53d8\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650\uff0csource\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0crosrun\u8fd0\u884c\uff0c\u53ef\u4ee5\u770b\u5230\u670d\u52a1\u5668\u542f\u52a8\u4e86 \u5ba2\u6237\u7aef\u8fd8\u672a\u7f16\u5199\uff0c\u6211\u4eec\u8fd9\u91cc\u53ef\u4ee5\u7528\u547d\u4ee4\u6a21\u62df\u5ba2\u6237\u7aef\u6765\u6d4b\u8bd5\u670d\u52a1\u7aef\u7684\u529f\u80fd,call\u540e\u9762\u8981\u52a0\u81ea\u5b9a\u4e49\u7684\u5efa\u7acb\u901a\u4fe1\u94fe\u63a5\u7684\u8bdd\u9898\u540d,\u4e4b\u540e\u53ef\u4ee5tab\u952e\u81ea\u52a8\u8865\u9f50\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff0c\u624b\u52a8\u4fee\u6539\u6570\u636e\u5e76\u6267\u884c\u5373\u53ef\u6d4b\u8bd5\u3002 rosservice call addints \"num1:1,num2:2\"","title":"\u670d\u52a1\u7aef\u4ee3\u7801\u5b9e\u73b0"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#_2","text":"\u5b9a\u4f4d\u5230\u529f\u80fd\u5305\uff0c\u65b0\u5efa\u6587\u4ef6\u5939scripts\uff0c\u65b0\u5efa\u6587\u4ef6client.py \u521b\u5efa\u5ba2\u6237\u5bf9\u8c61\u7528\u5230\u7684\u51fd\u6570rospy.ServiceProxy\uff08\u201d\u8bdd\u9898\u540d\u201c\uff0c\u6d88\u606f\u6570\u636e\u7c7b\u578b\uff09\uff0c\u8bdd\u9898\u540d\u548c\u670d\u52a1\u7aef\u4fdd\u6301\u4e00\u81f4\uff0c\u6570\u636e\u7c7b\u578b\u540c\u670d\u52a1\u7aef\uff0c\u53d6\u51b3\u4e8esrv\u6587\u4ef6\uff0c\u8fd9\u91cc\u662fAddInts\u3002 \u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\u8bf7\u6c42\uff1aclient.call(num1,num2) #! /usr/lib/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse \"\"\" 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 5\u3001\u5904\u7406\u54cd\u5e94 \"\"\" if __name__==\"__main__\": rospy.init_node(\"kehu\") #\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 client = rospy.ServiceProxy(\"addints\",AddInts) #\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 response = client.call(12,23) #\u5904\u7406\u54cd\u5e94,\u8fd9\u91cc\u76f4\u63a5\u6253\u5370\u4e00\u4e0b rospy.loginfo(\"\u54cd\u5e94\u6c42\u548c\u4e4b\u540e\u7684\u6570\u636e\u662f%d\",response.sum) \u7a0b\u5e8f\u6267\u884c\u7ed3\u679c \u4f18\u5316\u5b9e\u73b0\uff1a \u53ef\u4ee5\u5728\u6267\u884c\u8282\u70b9\u65f6\uff0c\u52a8\u6001\u4f20\u5165\u53c2\u6570 \u7528\u5230\u6a21\u5757sys\u4e2d\u7684argv\u3002\u8fd9\u4e2a\u53ef\u4ee5\u5305\u542b\u8282\u70b9\u540d\u79f0\u548c\u4f20\u5165\u7684\u6570\u636e #! /usr/lib/env python import rospy from server_client.srv import AddInts,AddIntsRequest,AddIntsResponse import sys \"\"\" 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42 5\u3001\u5904\u7406\u54cd\u5e94 \u95ee\u9898\uff1a \u5f53\u5ba2\u6237\u7aef\u5148\u4e8e\u670d\u52a1\u7aef\u542f\u52a8\u65f6,\u7a0b\u5e8f\u4f1a\u629b\u51fa\u5f02\u5e38,\u4f46\u662fROS\u8282\u70b9\u5728\u542f\u52a8\u65f6\u662f\u6ca1\u6709\u5148\u540e\u987a\u5e8f\u7684,\u90a3\u4e48\u5728\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e9b\u95ee\u9898 \u89e3\u51b3\u65b9\u6848\uff1a \u5f53\u5ba2\u6237\u7aef\u5148\u4e8e\u670d\u52a1\u7aef\u542f\u52a8\u65f6\uff0c\u4e0d\u8981\u629b\u51fa\u5f02\u5e38\uff0c\u800c\u662f\u8981\u6302\u8d77\u7b49\u5f85\u3002\u7b49\u5f85\u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u518d\u6b21\u53d1\u9001\u8bf7\u6c42 \u5b9e\u73b0\u4ee3\u7801\uff1a ROS\u4e2d\u7684\u5185\u7f6e\u51fd\u6570\uff0c\u5224\u65ad\u670d\u52a1\u5668\u7684\u72b6\u6001\uff0c\u670d\u52a1\u7aef\u672a\u542f\u52a8\u65f6\u5ba2\u6237\u7aef\u6302\u8d77\u3002 \u6cd5\u4e00\uff1aclient.wait_for_service()\uff0c\u4e0d\u9700\u8981\u4f20\u5165\u8bdd\u9898\u540d\u79f0\uff0c\u5b83\u672c\u8eab\u53ef\u4ee5\u67e5\u627e\u8bdd\u9898\u540d \u6cd5\u4e8c\uff1arospy.wait_for_service(\"\u8bdd\u9898\")rospy\u9700\u8981\u4f20\u5165\u53c2\u6570\u8bdd\u9898\u540d\u79f0 \"\"\" if __name__==\"__main__\": #\u5224\u65ad\u53c2\u6570\u957f\u5ea6,\u7531\u4e8e\u8282\u70b9\u540d\u4e5f\u7b97\u4e00\u4e2a\u53c2\u6570\uff0cargv[0]\u662f\u8282\u70b9\u540d\uff0c\u6240\u4ee5\u8fd9\u91cc\u662f3 if len(sys.argv)!=3: rospy.logerr(\"\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u4e0d\u5bf9\") sys.exit(1) rospy.init_node(\"kehu\") #\u521b\u5efa\u5ba2\u6237\u7aef\u5bf9\u8c61 client = rospy.ServiceProxy(\"addints\",AddInts) #\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e,\u5e76\u53d1\u9001\u8bf7\u6c42\uff0cargv[1]\u8fd9\u91cc\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9700\u8981\u5f3a\u884c\u5c06\u5176\u8f6c\u6362\u4e3aint\u7c7b\u578b num1 = int(sys.argv[1]) num2 = int(sys.argv[2]) #\u7b49\u5f85\u670d\u52a1\u5668\u542f\u52a8 #client.wait_for_service() #\u6cd5\u4e8c rospy.wait_for_service(\"addints\") response = client.call(num1,num2) #\u5904\u7406\u54cd\u5e94,\u8fd9\u91cc\u76f4\u63a5\u6253\u5370\u4e00\u4e0b rospy.loginfo(\"\u54cd\u5e94\u6c42\u548c\u4e4b\u540e\u7684\u6570\u636e\u662f%d\",response.sum) \u200b \u4ece\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c\u53ef\u4ee5\u52a8\u6001\u8f93\u5165num1\u548cnum2\uff0ccrtl C\u5173\u95ed\u670d\u52a1\u7aef\u540e\uff0c\u5148\u6267\u884c\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u800c\u662f\u4f1a\u6302\u8d77\u7b49\u5f85\uff0c\u5f00\u542f\u670d\u52a1\u7aef\u540e\u6b63\u5e38\u54cd\u5e94\u3002","title":"\u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_3","text":"\u200b \u53c2\u6570\u670d\u52a1\u5668\u5728ROS\u4e2d\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u5171\u4eab\u3002\u53c2\u6570\u670d\u52a1\u5668\u76f8\u5f53\u4e8e\u662f\u72ec\u7acb\u4e8e\u6240\u6709\u8282\u70b9\u7684\u4e00\u4e2a\u516c\u5171\u5bb9\u5668\uff0c\u53ef\u4ee5\u5c06\u6570\u636e\u5b58\u50a8\u5728\u8be5\u5bb9\u5668\u4e2d\uff0c\u88ab\u4e0d\u540c\u7684\u8282\u70b9\u8c03\u7528\uff0c\u5f53\u7136\u4e0d\u540c\u7684\u8282\u70b9\u4e5f\u53ef\u4ee5\u5f80\u5176\u4e2d\u5b58\u50a8\u6570\u636e\uff0c\u5173\u4e8e\u53c2\u6570\u670d\u52a1\u5668\u7684\u5178\u578b\u5e94\u7528\u573a\u666f\u5982\u4e0b: \u5bfc\u822a\u5b9e\u73b0\u65f6\uff0c\u4f1a\u8fdb\u884c\u8def\u5f84\u89c4\u5212\uff0c\u6bd4\u5982: \u5168\u5c40\u8def\u5f84\u89c4\u5212\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u4ece\u51fa\u53d1\u70b9\u5230\u76ee\u6807\u70b9\u7684\u5927\u81f4\u8def\u5f84\u3002\u672c\u5730\u8def\u5f84\u89c4\u5212\uff0c\u4f1a\u6839\u636e\u5f53\u524d\u8def\u51b5\u751f\u6210\u65f6\u65f6\u7684\u884c\u8fdb\u8def\u5f84\uff0c\u4e0a\u8ff0\u573a\u666f\u4e2d\uff0c\u5168\u5c40\u8def\u5f84\u89c4\u5212\u548c\u672c\u5730\u8def\u5f84\u89c4\u5212\u65f6\uff0c\u5c31\u4f1a\u4f7f\u7528\u5230\u53c2\u6570\u670d\u52a1\u5668\uff1a\u8def\u5f84\u89c4\u5212\u65f6\uff0c\u9700\u8981\u53c2\u8003\u5c0f\u8f66\u7684\u5c3a\u5bf8\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5c3a\u5bf8\u4fe1\u606f\u5b58\u50a8\u5230\u53c2\u6570\u670d\u52a1\u5668\uff0c\u5168\u5c40\u8def\u5f84\u89c4\u5212\u8282 \u70b9\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u8282\u70b9\u90fd\u53ef\u4ee5\u4ece\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8c03\u7528\u8fd9\u4e9b\u53c2\u6570 \u200b \u53c2\u6570\u670d\u52a1\u5668\uff0c\u4e00\u822c\u9002\u7528\u4e8e\u5b58\u5728\u6570\u636e\u5171\u4eab\u7684\u4e00\u4e9b\u5e94\u7528\u573a\u666f\u3002\u5b58\u50a8\u4e00\u4e9b\u591a\u8282\u70b9\u5171\u4eab\u7684\u6570\u636e\uff0c\u7c7b\u4f3c\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5168\u5c40\u53d8\u91cf\u3002 \u53c2\u6570\u670d\u52a1\u5668\u5b9e\u73b0\u662f\u6700\u4e3a\u7b80\u5355\u7684\uff0c\u8be5\u6a21\u578b\u5982\u4e0b\u56fe\u6240\u793a,\u8be5\u6a21\u578b\u4e2d\u6d89\u53ca\u5230\u4e09\u4e2a\u89d2\u8272: ROS Master (\u7ba1\u7406\u8005) Talker (\u53c2\u6570\u8bbe\u7f6e\u8005) Listener (\u53c2\u6570\u8c03\u7528\u8005) ROS Master \u4f5c\u4e3a\u4e00\u4e2a\u516c\u5171\u5bb9\u5668\u4fdd\u5b58\u53c2\u6570\uff0cTalker \u53ef\u4ee5\u5411\u5bb9\u5668\u4e2d\u8bbe\u7f6e\u53c2\u6570\uff0cListener \u53ef\u4ee5\u83b7\u53d6\u53c2\u6570\u3002","title":"\u56db\u3001ROS\u901a\u4fe1\u673a\u5236\uff1a\u53c2\u6570\u670d\u52a1\u5668"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_3","text":"#! /usr/bin/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u670d\u52a1\u5668\u53c2\u6570\u7684\u65b0\u589e\u4e0e\u4fee\u6539 \u9700\u6c42\uff1a\u5728\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u673a\u5668\u4eba\u7684\u5c5e\u6027\u3001\u578b\u53f7\u3001\u534a\u5f84 \u6240\u7528\u51fd\u6570:rospy.set_param() \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ROS\u8282\u70b9 rospy.init_node(\"param_set\") #\u65b0\u589e\u53c2\u6570,\u952e\u503c\u5bf9\uff08\u7c7b\u4f3cpython\u5b57\u5178\u8bed\u6cd5\uff09 rospy.set_param(\"name\",\"car\") rospy.set_param(\"radius\",0.15) \u4e4b\u540e\u6b63\u5e38\u4fee\u6539\u914d\u7f6e\u6587\u4ef6CMakelist\uff0c\u589e\u52a0\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650\uff0cctrl+shift+B\u7f16\u8bd1\uff0c\u518dsourece\u540e\u6267\u884c\u6587\u4ef6\u5373\u53ef\u6267\u884c\u6210\u529f\uff0c\u7531\u4e8e\u8be5\u7a0b\u5e8f\u6ca1\u6709\u65e5\u5fd7\u8f93\u51fa\uff0c\u6240\u4ee5\u7ec8\u7aef\u6ca1\u6709\u4efb\u4f55\u663e\u793a\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7ros\u547d\u4ee4\u6765\u67e5\u770b\u6211\u4eec\u521a\u624d\u8bbe\u7f6e\u7684\u670d\u52a1\u5668\u53c2\u6570\u548c\u503c \u67e5\u770b\u53c2\u6570\u5217\u8868\uff1arosparam list \u83b7\u53d6\u53c2\u6570\u503c\uff1arosparam get \u952e\u540d \u4fee\u6539\u53c2\u6570\u53ea\u9700\u8981\u7528\u540c\u6837\u7684\u51fd\u6570\u8f93\u5165\u952e\u503c\u7136\u540e\u4f20\u5165\u65b0\u7684\u53c2\u6570\u5373\u53ef\u3002","title":"1\u3001\u53c2\u6570\u670d\u52a1\u5668\u7684\u65b0\u589e\u548c\u4fee\u6539"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2_2","text":"\u53ef\u7528\u51fd\u6570\uff1a \uff081\uff09get_param(\u952e\uff0c\u9ed8\u8ba4\u503c)\u5f53\u8be5\u952e\u5b58\u5728\u65f6\u8fd4\u56de\u5b83\u7684\u503c\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u5b9a\u7684\u9ed8\u8ba4\u503c \uff082\uff09get_param_cached\uff0c\u548c\uff081\uff09\u76f8\u540c\uff0c\u4f46\u662f\u67e5\u8be2\u8fc7\u4f1a\u653e\u5728\u7f13\u5b58\u4e2d\uff0c\u4e0b\u6b21\u4e0d\u7528\u53cd\u590d\u5230\u670d\u52a1\u5668\u67e5\u8be2\uff0c\u6548\u7387\u66f4\u9ad8 \uff083\uff09get_param_names\u3002\u5217\u51fa\u5f53\u524d\u53c2\u6570\u5217\u8868\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u548c\u7cfb\u7edf\u81ea\u5e26\u7684 \uff084\uff09has_param\uff0c\u67e5\u8be2\u67d0\u4e2a\u53c2\u6570\u662f\u5426\u5b58\u5728\uff0c\u8fd4\u56debool\u7c7b\u578b\uff0c\u662f/\u5426 \uff085\uff09search_param\uff0c\u67e5\u8be2\u67d0\u4e2a\u53c2\u6570\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u5219\u8fd4\u56de\u952e\u540d #! /usr/lib/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u53c2\u6570\u7684\u67e5\u8be2 \u53ef\u7528\u51fd\u6570\uff1a get_param(\u952e\uff0c\u9ed8\u8ba4\u503c)\u5f53\u8be5\u952e\u5b58\u5728\u65f6\u8fd4\u56de\u5b83\u7684\u503c\uff0c\u4e0d\u5b58\u5728\u65f6\u4f1a\u8fd4\u56de\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u5b9a\u7684\u9ed8\u8ba4\u503c get_param_cached get_param_names has_param search_param \"\"\" if __name__==\"__main__\": rospy.init_node(\"get_param\") radius = rospy.get_param(\"radius\",0.5) radius22 = rospy.get_param(\"radius22\",0.6) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius) rospy.loginfo(\"radius22\u7684\u503c\u662f%.2f\",radius22) #get_param_cached \u548cget_param\u529f\u80fd\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff0c\u4f46\u662fcached\u67e5\u8be2\u8fc7\u540e\u4f1a\u5c06\u7ed3\u679c\u653e\u5728\u7f13\u5b58\u91cc\uff0c\u4e0b\u6b21\u65e0\u9700\u5230\u670d\u52a1\u5668\u67e5\u8be2\uff0c\u6548\u7387\u66f4\u9ad8\u3002 radius = rospy.get_param_cached(\"radius\",0.5) radius22 = rospy.get_param_cached(\"radius22\",0.6) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius) rospy.loginfo(\"radius\u7684\u503c\u662f%.2f\",radius22) #get_param_names,\u5217\u51fa\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684\u53c2\u6570\u5217\u8868\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u548c\u7cfb\u7edf\u81ea\u5e26\u7684 # names = rospy.get_param_names() # for name in names: # rospy.loginfo = (\"name=%s\",name) #has_param,\u5224\u65ad\u8be5\u53c2\u6570\u662f\u5426\u5b58\u5728 flag1 = rospy.has_param(\"radius\") if flag1: rospy.loginfo(\"radius \u5b58\u5728\") else: rospy.loginfo(\"radius \u4e0d\u5b58\u5728\") #search_param,\u7528\u4e8e\u67e5\u8be2\u67d0\u4e2a\u5efa\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u5373\u8fd4\u56de\u952e\u7684\u540d\u79f0 key = rospy.search_param(\"radius\") rospy.loginfo(\"key = %s\",key)","title":"2\u3001\u53c2\u6570\u670d\u52a1\u5668\u83b7\u53d6\u53c2\u6570\uff08\u53c2\u6570\u67e5\u8be2\uff09"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3_4","text":"\u4f7f\u7528\u51fd\u6570\uff1arospy.delete_param(\"radius\") \u4f46\u662f\u53ea\u4f7f\u7528\u8fd9\u4e00\u53e5\u547d\u4ee4\u8fdb\u884c\u53c2\u6570\u5220\u9664\u65f6\uff0c\u5982\u679c\u91cd\u590d\u6267\u884c\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u8be5\u53c2\u6570\u4e0d\u5b58\u5728\u3002\u6545\u800c\u8fd9\u91cc\u7528try\uff1aexcept\uff0celse\u8bed\u53e5\u8fdb\u884c\u5904\u7406\uff0c\u5982\u679c\u5f02\u5e38\u5c31\u8f93\u51fa\u8be5\u53c2\u6570\u4e0d\u5b58\u5728\uff0c\u6267\u884c\u6210\u529f\u5373\u8f93\u51fa\u8be5\u53c2\u6570\u88ab\u6210\u529f\u5220\u9664\u3002 #! /usr/lib/env python import rospy \"\"\" \u793a\u4f8b\uff1a\u53c2\u6570\u7684\u5220\u9664 \u51fd\u6570\uff1adelete_param() \"\"\" if __name__ == \"__main__\": rospy.init_node(\"delete_param\") try: rospy.delete_param(\"radius\") except Exception: rospy.loginfo(\"\u4e0d\u5b58\u5728\u8be5\u53c2\u6570\u6216\u8be5\u53c2\u6570\u5df2\u7ecf\u88ab\u5220\u9664\u8fc7\u4e86\") else: rospy.loginfo(\"\u53c2\u6570\u5220\u9664\u6210\u529f\uff01\")","title":"3\u3001\u53c2\u6570\u670d\u52a1\u5668\u5220\u9664\u53c2\u6570"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_4","text":"\u672c\u8282\u4e2d\u7684ros\u547d\u4ee4\u662f\u52a8\u6001\u7684\uff0c\u662f\u5728ros\u8282\u70b9\u542f\u52a8\u540e\u52a8\u6001\u7684\u83b7\u53d6\u5176\u76f8\u5173\u53c2\u6570\u4fe1\u606f\u7684\u65b9\u5f0f 1\u3001rosnode\uff1a\u64cd\u4f5c\u8282\u70b9 rosnode ping \u6d4b\u8bd5\u5230\u8282\u70b9\u7684\u8fde\u63a5\u72b6\u6001 rosnode list \u5217\u51fa\u6d3b\u52a8\u8282\u70b9 rosnode info \u6253\u5370\u8282\u70b9\u4fe1\u606f rosnode machine \u5217\u51fa\u6307\u5b9a\u8bbe\u5907\u4e0a\u8282\u70b9 rosnode kill \u6740\u6b7b\u67d0\u4e2a\u8282\u70b9 rosnode cleanup \u6e05\u9664\u4e0d\u53ef\u8fde\u63a5\u7684\u8282\u70b9\uff08ctrl+C\u9000\u51fa\u540e\uff0croscore\u5217\u8868\u4e2d\u4ecd\u7136\u5b58\u5728\uff0c\u8be5\u547d\u4ee4\u53ef\u4ee5\u6e05\u9664\u8fd9\u4e9b\u50f5\u5c38\u8282\u70b9\uff09 2\u3001rostopic rostopic bw \u8bdd\u9898\u540d \uff1a\u663e\u793a\u4e3b\u9898\u4f7f\u7528\u7684\u5e26\u5bbd rostopic delay \u8bdd\u9898\u540d \uff1a\u663e\u793a\u5e26\u6709 header \u7684\u4e3b\u9898\u5ef6\u8fdf rostopic echo \u8bdd\u9898\u540d\uff1a \u6253\u5370\u6d88\u606f\u5230\u5c4f\u5e55 rostopic find \u6839\u636e\u7c7b\u578b\u67e5\u627e\u4e3b\u9898 rostopic hz \u663e\u793a\u4e3b\u9898\u7684\u53d1\u5e03\u9891\u7387 rostopic info \u8bdd\u9898\u540d\uff1a \u663e\u793a\u4e3b\u9898\u76f8\u5173\u4fe1\u606f rostopic list \u663e\u793a\u6240\u6709\u6d3b\u52a8\u72b6\u6001\u4e0b\u7684\u4e3b\u9898 rostopic pub \u8bdd\u9898\u540d\uff1a\u5c06\u6570\u636e\u53d1\u5e03\u5230\u4e3b\u9898\uff0c\u81ea\u5b9a\u4e49\u6d88\u606f\u6309tab\u81ea\u52a8\u8865\u9f50\uff0c\u624b\u52a8\u586b\u5165\u76f8\u5173\u4fe1\u606f\u5373\u53ef\u53d1\u5e03 rostopic type \u6253\u5370\u4e3b\u9898\u7c7b\u578b 3\u3001rosmsg\uff1a rosmsg show \u5305\u540d/\u6d88\u606f\u540d\u79f0 \uff1a \u663e\u793a\u6d88\u606f\u63cf\u8ff0 rosmsg info \u5305\u540d/\u6d88\u606f\u540d\u79f0 \uff1a \u663e\u793a\u6d88\u606f\u4fe1\u606f rosmsg list \uff1a \u5217\u51fa\u6240\u6709\u6d88\u606f rosmsg list |grep -i \u6d88\u606f\u540d\uff1a\u4f7f\u7528\u7ba1\u9053\u5217\u51fa\u8be5\u6d88\u606f\u6587\u4ef6\u91cc\u7684\u6d88\u606f rosmsg md5 \u663e\u793a md5 \u52a0\u5bc6\u540e\u7684\u6d88\u606f rosmsg package \u663e\u793a\u67d0\u4e2a\u529f\u80fd\u5305\u4e0b\u7684\u6240\u6709\u6d88\u606f rosmsg packages \u5217\u51fa\u5305\u542b\u6d88\u606f\u7684\u529f\u80fd\u5305 4\u3001rosservice\uff1a rosservice args \u670d\u52a1\u540d\uff1a\u6253\u5370\u670d\u52a1\u53c2\u6570 rosservice call \u4f7f\u7528\u63d0\u4f9b\u7684\u53c2\u6570\u8c03\u7528\u670d\u52a1 rosservice find \u6309\u7167\u670d\u52a1\u7c7b\u578b\u67e5\u627e\u670d\u52a1 rosservice info \u5305\u540d/\u670d\u52a1\u540d\uff1a \u6253\u5370\u6709\u5173\u670d\u52a1\u7684\u4fe1\u606f rosservice list \u5217\u51fa\u6240\u6709\u6d3b\u52a8\u7684\u670d\u52a1 rosservice type \u6253\u5370\u670d\u52a1\u7c7b\u578b rosservice uri \u6253\u5370\u670d\u52a1\u7684 ROSRPC uri 5\u3001rosparam rosparam\u5305\u542brosparam\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u4f7f\u7528YAML\u7f16\u7801\u6587\u4ef6\u5728\u53c2\u6570\u670d\u52a1\u5668\u4e0a\u83b7\u53d6\u548c\u8bbe\u7f6eROS\u53c2\u6570\u3002 rosparam set \u8bbe\u7f6e\u53c2\u6570 rosparam get \u83b7\u53d6\u53c2\u6570 rosparam load \u4ece\u5916\u90e8\u6587\u4ef6\u52a0\u8f7d\u53c2\u6570 rosparam dump \u5c06\u53c2\u6570\u5199\u51fa\u5230\u5916\u90e8\u6587\u4ef6 rosparam delete \u5220\u9664\u53c2\u6570 rosparam list \u5217\u51fa\u6240\u6709\u53c2\u6570","title":"\u4e94\u3001ROS\u5e38\u7528\u547d\u4ee4"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_5","text":"","title":"\u516d\u3001ROS\u901a\u4fe1\u673a\u5236\u5b9e\u64cd\u6848\u4f8b\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#demo-01","text":"1\u3001\u6b63\u5e38\u542f\u52a8\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8282\u70b9\uff1a roscore\u2014\u2014rosrun turtlesim turtlesim_node\u2014\u2014rosrun turtlesim turtle_teleop_key 2\u3001\u7528ros\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u8bdd\u9898\u540d\u548c\u6d88\u606f\u7c7b\u578b\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b65\u81ea\u884c\u7f16\u7801\u5b8c\u6210\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8 \uff081\uff09rostopic list\u67e5\u770b\u5f53\u524d\u8bdd\u9898\u540d\u79f0\uff0crqt_graph\u67e5\u770b\u8ba1\u7b97\u56fe\u7684\u7ed3\u6784\uff0c\u53ef\u4ee5\u770b\u5230\u8bdd\u9898\u540d \u770b\u5230\u5f53\u524d\u4e24\u4e2a\u8282\u70b9\u901a\u4fe1\u7684\u8bdd\u9898\u662f/turtle1/cmd_vel \uff082\uff09\u83b7\u53d6\u8bdd\u9898\u7684\u6d88\u606f\u7c7b\u578b rostopic info rostopic type (3)\u83b7\u53d6\u6d88\u606f\u683c\u5f0f rosmsg show/info \u7ebf\u901f\u5ea6\u89d2\u901f\u5ea6\u7684\u542b\u4e49\u4e5f\u8bb2\u4e86 \uff084\uff09\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u5b8c\u5168\u7c7b\u4f3c\u8bdd\u9898\u53d1\u5e03\u65b9\u7a0b\u5e8f\u7684\u7f16\u5199 #! /usr/bin/env python import rospy from geometry_msgs.msg import Twist \"\"\" \u53d1\u5e03\u65b9\uff1a \u9700\u8981\u83b7\u53d6\u8bdd\u9898\u540d\u548c\u6d88\u606f\u7c7b\u578b \u8bdd\u9898\uff1a/turtle1/cmd_vel \u6d88\u606f\u7c7b\u578b:geometry/Twist \"\"\" if __name__==\"__main__\": rospy.init_node(\"control\") #\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 pub = rospy.Publisher(\"/turtle1/cmd_vel\",Twist,queue_size=10) #\u7ec4\u7ec7\u5e76\u53d1\u5e03\u6570\u636e #\u8bbe\u7f6e\u53d1\u5e03\u9891\u7387 rate = rospy.Rate(10) #\u521b\u5efa\u901f\u5ea6\u6d88\u606f twist = Twist() twist.angular.z = 1 twist.angular.x = 0 twist.angular.y = 0 twist.linear.x = 1 twist.linear.y = 0 twist.linear.z = 0 #\u5faa\u73af\u53d1\u5e03\u6570\u636e while not rospy.is_shutdown(): pub.publish(twist) rate.sleep()","title":"demo 01 \u63a7\u5236\u5c0f\u4e4c\u9f9f\u505a\u5706\u5468\u8fd0\u52a8"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#demo-02","text":"\u5b8c\u5168\u7c7b\u4f3c\u8bdd\u9898\u8ba2\u9605\u65b9\u7a0b\u5e8f\u7684\u7f16\u5199 #! /usr/bin/env python import rospy from turtlesim.msg import Pose \"\"\" \u9700\u6c42\uff1a\u8ba2\u9605\u8f93\u51fa\u4e4c\u9f9f\u4f4d\u8d44 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f 5\u3001spin \"\"\" def sub_pose(pose): rospy.loginfo(\"\u4e4c\u9f9f\u4f4d\u59ff\u4fe1\u606f\uff1a\u5750\u6807\uff08%.2f,%.2f\uff09,\u671d\u5411\uff1a%.2f\uff0c\u7ebf\u901f\u5ea6\uff1a%.2f\uff0c\u89d2\u901f\u5ea6\uff1a%.2f\u3002\",pose.x,pose.y,pose.theta,pose.linear_velocity,pose.angular_velocity) if __name__==\"__main__\": rospy.init_node(\"subpose\") sub = rospy.Subscriber(\"/turtle1/pose\",Pose,sub_pose,queue_size = 100) rospy.spin() \u5728\u8fd9\u91cc\u7f16\u5199\u7a0b\u5e8f\u6709\u4e00\u4e2a\u8bef\u533a\uff0c\u8bef\u4ee5\u4e3a\u8fd9\u4e2a\u662f\u548c\u52a8\u4f5c\u53d1\u5e03\u65b9\u76f4\u63a5\u901a\u4fe1\u7684\uff0c\u6240\u4ee5\u8bdd\u9898\u4e00\u5f00\u59cb\u91c7\u7528/turtle1/cmd_vel\u65f6\u4e00\u76f4\u62a5\u9519\uff0c\u540e\u6765\u53d1\u73b0\u8fd9\u4e2a\u662f\u8ba2\u9605\u4e86/turtle1/pose\u8bdd\u9898\uff0c\u8f93\u51farqt\u56fe\u5c31\u53ef\u4ee5\u975e\u5e38\u6e05\u6670\u7684\u770b\u5230\u8fd9\u4e9b\u8282\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb\u3002","title":"demo 02 \u8ba2\u9605\u4e4c\u9f9f\u7684\u4f4d\u59ff"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#demo-03","text":"\uff081\uff09\u4f7f\u7528rosservice list\u547d\u4ee4\u83b7\u53d6\u5f53\u524d\u5b58\u5728\u7684\u670d\u52a1\u5217\u8868\uff0c/spawn\u662f\u751f\u6210\u4e4c\u9f9f\u7684\u670d\u52a1 \uff082\uff09\u4f7f\u7528rosservice info spawn\u53ef\u4ee5\u770b\u5230\u8be5\u670d\u52a1\u7684\u4e00\u4e9b\u7ec6\u8282\u4fe1\u606f \u53ef\u4ee5\u770b\u5230\u2460/turtlesim\u8282\u70b9\u63d0\u4f9b\u4e86\u8be5\u670d\u52a1\u2461URI\u2462\u670d\u52a1\u7684\u6d88\u606f\u7c7b\u578b\uff08\u91cd\u8981\uff09\u2463\u670d\u52a1\u7684\u53c2\u6570\uff08xy\u5750\u6807\u4f4d\u7f6e\uff0c\u89d2\u5ea6\uff0c\u540d\u5b57\uff09 \uff083\uff09\u8c03\u7528rossrv info/show \u6d88\u606f\u7c7b\u578b\u540d\uff0c\u67e5\u770b\u8be5\u6d88\u606f\u7c7b\u578b\u7684\u5177\u4f53\u4fe1\u606f\u683c\u5f0f \uff084\uff09\u901a\u8fc7\u547d\u4ee4\u7684\u65b9\u5f0f\u8c03\u7528\u670d\u52a1\u5e76\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f rosservice call \u670d\u52a1\u540d\u5b57 tab\u952e\u8865\u9f50\u4f1a\u663e\u793a\u9700\u8981\u8f93\u5165\u670d\u52a1\u8bf7\u6c42\u53c2\u6570 rosservice call /spawn \uff085\uff09\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u8c03\u7528\u670d\u52a1\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f #! /usr/bin/env python import rospy from turtlesim.srv import Spawn,SpawnRequest,SpawnResponse \"\"\" \u9700\u6c42\uff1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u751f\u6210\u4e00\u53ea\u5c0f\u4e4c\u9f9f \u8bdd\u9898\uff1aspawn \u6d88\u606f\u7c7b\u578b\uff1a/turtlesim/Spawn \"\"\" #\u7f16\u5199\u4e3b\u5165\u53e3 if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"generate_turtle\") #\u521b\u5efa\u8bf7\u6c42\u5bf9\u8c61 client_gene = rospy.ServiceProxy(\"/spawn\",Spawn) #\u7ec4\u7ec7\u6570\u636e\u5e76\u53d1\u9001\u8bf7\u6c42 request = SpawnRequest() request.x = 3.0 request.y = 9.0 request.theta = 0.9 request.name = \"littleturtle2\" #\u5224\u65ad\u670d\u52a1\u7aef\u662f\u5426\u5f00\u542f\uff0c\u672a\u5f00\u542f\u5219\u6302\u8d77\u7b49\u5f85 client_gene.wait_for_service() try: reponse = client_gene.call(request) #\u5904\u7406\u54cd\u5e94\u7ed3\u679c rospy.loginfo(\"\u751f\u6210\u4e4c\u9f9f\u7684\u540d\u5b57\u53eb\uff1a%s\",reponse.name) except: rospy.logerr(\"\u8bf7\u6c42\u5931\u8d25\uff01\u91cd\u590d\u6267\u884c\u6216\u5176\u4ed6\u5f02\u5e38\")","title":"demo 03 \u901a\u8fc7\u670d\u52a1\u901a\u4fe1\u5b9e\u73b0\u5728\u6307\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#demo-04","text":"\uff081\uff09\u901a\u8fc7ros\u547d\u4ee4\u7684\u65b9\u5f0f\u4fee\u6539 rosparam list rosparam get rosparam set \uff082\uff09\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u5b9e\u73b0 #! /usr/bin/env python import rospy \"\"\" \u9700\u6c42\uff1a\u4fee\u6539\u4e4c\u9f9fgui\u80cc\u666f\u8272 1\u3001\u521d\u59cb\u5316ros\u8282\u70b9 2\u3001\u8bbe\u7f6e\u53c2\u6570 \"\"\" if __name__==\"__main__\": rospy.init_node(\"set_param\") rospy.set_param(\"/turtlesim/background_r\",10) rospy.set_param(\"/turtlesim/backgroung_g\",200) rospy.set_param(\"/turtlesim/background_b\",40)","title":"demo 04 \u4fee\u6539\u80cc\u666f\u53c2\u6570"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#api","text":"1\u3001rospy.init_node() 2\u3001rospy.Publisher()\u521b\u5efa\u53d1\u5e03\u8005\u5bf9\u8c61 3\u3001spin\uff08\uff09\u56de\u65cb\u51fd\u6570\uff1a\u8fdb\u5165\u5faa\u73af\uff0c\u5728\u5faa\u73af\u4e2d\u5904\u7406\u56de\u8c03\u51fd\u6570 4\u3001\u65f6\u95f4\u76f8\u5173\u7684API 5\u3001\u8282\u70b9\u5173\u95ed\u76f8\u5173\u7684API","title":"\u5e38\u7528API\u4ecb\u7ecd"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#python","text":"\u9700\u8981\u81ea\u5df1\u5bfc\u5165\u4e34\u65f6\u73af\u5883\u53d8\u91cf\uff0c\u6307\u660e\u65b0\u589e\u6587\u4ef6\u7684\u8def\u5f84\u3002","title":"\u81ea\u5b9a\u4e49python\u6a21\u5757\u7684\u5bfc\u5165"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_6","text":"ros\u662f\u591a\u8fdb\u7a0b\u7684\u5206\u5e03\u5f0f\u6846\u67b6","title":"\u4e03\u3001ROS\u8fd0\u884c\u7ba1\u7406"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_4","text":"\u200b \u5c06\u5b9e\u73b0\u67d0\u4e00\u529f\u80fd\u7684\u5177\u6709\u5185\u5728\u903b\u8f91\u8054\u7cfb\u7684\u4e00\u4e9b\u529f\u80fd\u5305\u6253\u5305\u5728\u4e00\u8d77\u6210\u4e3a\u5143\u529f\u80fd\u5305\u3002\u5143\u529f\u80fd\u5305\u53ef\u4ee5\u65b9\u4fbf\u7528\u6237\u7684\u4f7f\u7528\uff0c\u5b89\u88c5\u65f6\u53ef\u4ee5\u5c06\u5176\u4ed6\u6253\u5305\u7684\u76f8\u5173\u529f\u80fd\u5305\u4e00\u5e76\u4e0b\u8f7d\u3002\uff08\u6ce8\u610f\u5143\u529f\u80fd\u5305\u7684\u64cd\u4f5c\u5bf9\u8c61\u662f\u4e0d\u540c\u7684\u529f\u80fd\u5305\uff09 \uff081\uff09\u65b0\u5efa\u529f\u80fd\u5305\uff1a\u81ea\u5b9a\u4e49\u547d\u540d\u5373\u53ef\uff0c\u7531\u4e8e\u5143\u529f\u80fd\u5305\u662f\u4e00\u4e2a\u7a7a\u5305\u65e0\u9700\u6dfb\u52a0\u4f9d\u8d56 \uff082\uff09\u4fee\u6539package.xml\u6587\u4ef6 \u6dfb\u52a0\u53ef\u6267\u884c\u4f9d\u8d56\uff0c\u5982\u56fe\u6240\u793a\u53ef\u4ee5\u5728\u6ce8\u91ca\u91cc\u590d\u5236\u4e00\u4e2a \u5c06\u58f0\u660e\u4f9d\u8d56\u7684\u5305\u6362\u6210\u51c6\u5907\u6253\u5305\u5728\u4e00\u8d77\u7684\u5404\u4e2a\u529f\u80fd\u5305\u540d\u5e76\u6dfb\u52a0\u865a\u62df\u5143\u5305\\ \u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5305\u5173\u8054\u8d77\u6765 \uff083\uff09\u4fee\u6539CMakelist.txt\u6587\u4ef6 \u4fdd\u7559\u7ea2\u6846\u4e2d\u7684\u4e09\u884c\uff0c\u5176\u4f59\u5185\u5bb9\u4ee5\u53ca\u6ce8\u91ca\u5168\u90e8\u5220\u6389 \u6dfb\u52a0\u5143\u529f\u80fd\u5305\u90e8\u5206\uff0c\uff08\u6ce8\u610f\u8fd9\u51e0\u884c\u4e4b\u95f4\u4e0d\u80fd\u6709\u4efb\u4f55\u7a7a\u884c\uff09 \u7f16\u8bd1\u5373\u53ef\u5b8c\u6210","title":"1\u3001\u5143\u529f\u80fd\u5305"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2launchros","text":"launch\u6587\u4ef6\u662fxml\u683c\u5f0f\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u542f\u52a8\u591a\u4e2a\u529f\u80fd\u8282\u70b9\u3002 \u4ee5\u952e\u76d8\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u4e3a\u4f8b\u7684\u5b9e\u73b0\u6b65\u9aa4\uff1a \uff081\uff09\u5728src\u6587\u4ef6\u4e2d\u65b0\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\uff0c\u547d\u540d\u4e3alaunch01\uff0c\u5e76\u6dfb\u52a0\u4f9d\u8d56turtlesim rospy roscpp std_msgs \uff082\uff09\u5728\u8be5\u529f\u80fd\u5305\u4e2d\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e00\u822c\u5c31\u547d\u540d\u4e3alaunch \uff083\uff09\u5728launch\u6587\u4ef6\u5939\u4e2d\u65b0\u5efa\u4e00\u4e2a\u4ee5.launch\u4e3a\u540e\u7f00\u540d\u7684\u6587\u4ef6\uff0c\u8fd9\u91cc\u547d\u540d\u4e3astartturtle.launch \uff084\uff09\u7f16\u8f91.launch\u6587\u4ef6\u7684\u5185\u5bb9\uff1a\u6839\u6807\u7b7e\\ \uff0c\u5b50\u7ea7\u6807\u7b7e\u662f\u9700\u8981\u4e00\u8d77\u542f\u52a8\u7684\u8282\u70b9\u540d \uff085\uff09source\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528\u547d\u4ee4\uff1aroslaunch \u529f\u80fd\u5305\u540d .launch\u6587\u4ef6\u540d \u6267\u884c\u6587\u4ef6\u5373\u53ef \u6ce8\u610f\uff1aroslaunch\u4f1a\u4e3b\u52a8\u5224\u65ad\u662f\u5426\u542f\u52a8roscore\uff0c\u672a\u542f\u52a8\u4f1a\u81ea\u52a8\u542f\u52a8roscore\uff0c\u6240\u4ee5\u65e0\u9700\u624b\u52a8\u542f\u52a8","title":"2\u3001launch\u6587\u4ef6\uff08ros\u8282\u70b9\u7ba1\u7406\uff09"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3launch","text":"\uff081\uff09deprecated\u6807\u7b7e\uff1a\u8f93\u51fa\u8fc7\u65f6\u8b66\u544a\uff0c\u8be5launch\u6587\u4ef6\u4e0d\u5efa\u8bae\u7ee7\u7eed\u4f7f\u7528\uff0c\u53ef\u4ee5\u627e\u65b0\u7248\u672c\u7684 \uff082\uff09node\u6807\u7b7e\uff1a\u7528\u4e8e\u6307\u5b9aros\u8282\u70b9\uff0c\u4f46\u7531\u4e8e\u8282\u70b9\u542f\u52a8\u662f\u591a\u8fdb\u7a0b\u7684\uff0c\u6267\u884c\u65f6\u672a\u5fc5\u6309\u7167node\u6807\u7b7e\u7684\u58f0\u660e\u987a\u5e8f\u8fdb\u884c\u542f\u52a8 \uff083\uff09include\u6807\u7b7e\uff1a\u7528\u4e8e\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\uff0c\u5c06\u53e6\u4e00\u4e2axml\u683c\u5f0f\u7684launch\u6587\u4ef6\u5bfc\u5165\u5230\u5f53\u524d\u6587\u4ef6 <include file=\"$(find \u88ab\u590d\u7528\u6587\u4ef6\u6240\u5728\u529f\u80fd\u5305\u540d)/launch/\u88ab\u590d\u7528\u6587\u4ef6\u540d\"/> \uff084\uff09remap\u6807\u7b7e\uff1a\u7528\u4e8e\u8bdd\u9898\u91cd\u547d\u540d\uff0c\u66f4\u6539\u67d0\u8282\u70b9\u8ba2\u9605\u7684\u8bdd\u9898\u540d\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u7075\u6d3b\u901a\u4fe1 \uff085\uff09param\u6807\u7b7e\uff1a\u4e3a\u53c2\u6570\u670d\u52a1\u5668\u8bbe\u7f6e\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5168\u5c40\u53c2\u6570\uff08launch\u91cc\uff0cnode\u5916\uff09\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u5185\u7684\u53c2\u6570\uff08node\u6807\u7b7e\u91cc\uff09 \uff086\uff09rosparam\u6807\u7b7e\uff1a\u4e3b\u8981\u662f\u4eceyaml\u6587\u4ef6\u4e2d\u5bfc\u5165\u53c2\u6570 \uff087\uff09group\u6807\u7b7e\uff1a\u4e3aros\u8282\u70b9\u5206\u7ec4\uff0c\u6bd4\u5982\u5f53\u60f3\u542f\u52a8\u4e24\u5957\u4e00\u6837\u7684\u8282\u70b9\u65f6\uff0c\u4e3a\u4e86\u9632\u6b62\u91cd\u540d\u95ee\u9898\uff0c\u53ef\u4ee5\u8fdb\u884c\u5206\u7ec4 \uff088\uff09arg\u6807\u7b7e\uff1a\u4f20\u53c2\uff0c\u5c01\u88c5\u53c2\u6570\u503c\uff0c\u516c\u7528\u4e00\u4e2a\u53d8\u91cf\u65f6\u53ef\u4ee5\u91cd\u590d\u4f20\u53c2\uff08\u5b8f\u5b9a\u4e49\uff09","title":"3\u3001launch\u6807\u7b7e\u77e5\u8bc6\u70b9\u603b\u7ed3\u5f52\u7eb3"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4ros","text":"","title":"4\u3001ROS\u4e2d\u7684\u91cd\u540d\u95ee\u9898"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_5","text":"\u5728\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5b58\u5728\u91cd\u540d\u7684\u529f\u80fd\u5305\u65f6\uff0c\u540e\u5237\u65b0\u7684\u73af\u5883\u53d8\u91cf\u8d77\u4f5c\u7528\u3002 \u89e3\u51b3\u65b9\u5f0f\u53ef\u4ee5\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6216\u8005\u8d77\u522b\u540d\uff08\u540d\u79f0\u91cd\u6620\u5c04\uff09","title":"\uff081\uff09\u5de5\u4f5c\u7a7a\u95f4\u8986\u76d6\uff08\u529f\u80fd\u5305\u91cd\u540d\uff09"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2ros_1","text":"\u200b \u547d\u540d\u7a7a\u95f4\u5c31\u662f\u4e3a\u540d\u79f0\u6dfb\u52a0\u524d\u7f00\uff0c\u540d\u79f0\u91cd\u6620\u5c04\u662f\u4e3a\u540d\u79f0\u8d77\u522b\u540d\u3002\u8fd9\u4e24\u79cd\u7b56\u7565\u90fd\u53ef\u4ee5\u89e3\u51b3\u8282\u70b9\u91cd\u540d\u95ee\u9898\uff0c\u4e24\u79cd\u7b56\u7565\u7684\u5b9e\u73b0\u9014\u5f84\u6709\u591a\u79cd: rosrun \u547d\u4ee4 \u2460\u547d\u540d\u7a7a\u95f4__ns:=xx \u901a\u8fc7\u540e\u9762ns\u540d\u79f0\u4e0d\u540c\u533a\u5206\uff0c\u4ece\u800c\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a\u8282\u70b9 rosrun turtlesim turtlesim_node __ns:=mingcheng \u2461\u540d\u79f0\u91cd\u6620\u5c04\uff08\u8d77\u522b\u540d\uff09 rosrun turtlesim turtlesim_node __name:=dabao rosrun turtlesim turtlesim_node __name:=xiaobao \u6ce8\u610f\uff1a\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u540c\u65f6\u7ec4\u5408\u4f7f\u7528 launch \u6587\u4ef6 html <launch> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name =\"turtlesim\"/> <!-- \u540d\u79f0\u91cd\u6620\u5c04--> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"t1\"/> <!-- \u547d\u540d\u7a7a\u95f4\u65b9\u6cd5 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"turtlesim\" ns = \"huahua\"/> <!-- \u7ec4\u5408\u65b9\u6cd5 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name = \"t2\" ns=\"baobao\"/> </launch> \u7f16\u7801\u5b9e\u73b0\uff1aAPI\uff1aanonymous=true\u65f6\u4f1a\u7ed9\u8282\u70b9\u6dfb\u52a0\u968f\u673a\u540e\u7f00\uff0c\u907f\u514d\u8282\u70b9\u91cd\u540d","title":"\uff082\uff09ROS\u8282\u70b9\u540d\u79f0\u91cd\u540d"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3ros","text":"rosrun \u547d\u4ee4 \u6848\u4f8b\uff1a\u7528\u952e\u76d8\u63a7\u5236\u8282\u70b9rosrun teleop_twist_keyboard teleop_twist_keyboard.py\uff08\u9ed8\u8ba4\u4f7f\u7528\u8282\u70b9\u540d\u65f6cmd_vel\uff09\u63a7\u5236turtlesim_node\u7684\u4e4c\u9f9f\u8fd0\u52a8\uff08\u9ed8\u8ba4\u4f7f\u7528turtle/cmd_vel\u8282\u70b9\uff09\u3002 \u65b9\u6cd5\uff1a\u5c06\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u540d\u6539\u6210\u53e6\u4e00\u4e2a\uff0c\u8282\u70b9\u540d\u79f0\u4e00\u81f4\u540e\u624d\u53ef\u4ee5\u5b9e\u73b0\u901a\u4fe1\u4ece\u800c\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8 rosrun turtlesim turtlesim_node /turtle1/cmd_vel:=/cmd_vel \u200b \u6216 rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/turtle1/cmd_vel launch\u6587\u4ef6 <!-- \u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8 --> <launch> <!-- \u5c06\u4e4c\u9f9f\u7684\u8bdd\u9898\u8bbe\u7f6e\u4e3a\u4e0e\u952e\u76d8\u63a7\u5236\u4e00\u81f4 --> <node pkg=\"turtlesim\" type=\"turtlesim_node\" name=\"turtlesim\"> <remap from=\"/turtle1/cmd_vel\" to=\"/cmd_vel\"/> </node> <node pkg=\"teleop_twist_keyboard\" type=\"teleop_twist_keyboard.py\" name=\"key\"/> <!--\u5c06\u952e\u76d8\u63a7\u5236\u8bdd\u9898\u8bbe\u7f6e\u4e3a\u4e0e\u4e4c\u9f9f\u4e00\u81f4\uff0c\u5b8c\u5168\u7c7b\u6bd4\u5373\u53ef--> </launch>","title":"\uff083\uff09ROS\u8bdd\u9898\u540d\u79f0\u91cd\u540d\u95ee\u9898"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_7","text":"","title":"\u516b\u3001ROS\u5e38\u7528\u7ec4\u4ef6"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1tf","text":"","title":"1\u3001TF\u5750\u6807\u53d8\u6362"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_6","text":"","title":"\uff081\uff09\u9759\u6001\u5750\u6807\u53d8\u6362"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#_3","text":"\u2460\u521b\u5efa\u529f\u80fd\u5305\u5e76\u6dfb\u52a0\u4f9d\u8d56 catkin_create_pkg tf_static roscpp rospy std_msgs tf2 tf2_ros tf2_geometry_msgs geometry_msgs \u2461\u65b0\u5efapython\u6587\u4ef6\uff0c\u4e3a\u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff0c\u4fee\u6539CMakelists\u6587\u4ef6 \u2462\u7f16\u5199\u53d1\u5e03\u65b9\u4ee3\u7801\uff0c\u7f16\u8bd1\u6267\u884c #! /usr/bin/env python import rospy import tf2_ros from geometry_msgs.msg import TransformStamped import tf.transformations #\u6b27\u62c9\u89d2\u83b7\u53d6\u56db\u5143\u6570 \"\"\" \u53d1\u5e03\u65b9\u5b9e\u73b0\uff1a\u7528\u4e8e\u53d1\u5e03\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u65b0\u76f8\u5bf9\u5173\u7cfb\uff08\u5c0f\u8f66\u5e95\u76d8\u2014\u2014baselink\u548c\u96f7\u8fbe\u2014\u2014laser\uff09 \u6d41\u7a0b\uff1a1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ROS\u8282\u70b9 3\u3001\u521b\u5efa\u53d1\u5e03\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u53d1\u5e03\u7684\u6570\u636e 5\u3001\u5faa\u73af\u53d1\u5e03\u6570\u636e 6\u3001spin\uff08\uff09 \"\"\" if __name__==\"__main__\": rospy.init_node(\"tf_static_pub\") #\u521b\u5efa\u53d1\u5e03\u5bf9\u8c61 pub = tf2_ros.StaticTransformBroadcaster() #\u7ec4\u7ec7\u88ab\u53d1\u5e03\u7684\u6570\u636e ts = TransformStamped() #header ts.header.stamp=rospy.Time.now()#\u8bbe\u7f6e\u65f6\u95f4\u6233 ts.header.frame_id = \"baselink\"#\u7236\u7ea7\u5750\u6807\u7cfb #child fram ts.child_frame_id = \"laser\" #\u76f8\u5bf9\u5173\u7cfb\uff08\u504f\u79fb\u548c\u56db\u5143\u6570\uff09 ts.transform.translation.x = 0.2 ts.transform.translation.y = 0.0 ts.transform.translation.z = 0.5 #\u56db\u5143\u6570\uff1a\u4e00\u822c\u5148\u8bbe\u7f6e\u6b27\u62c9\u89d2\uff0c\u518d\u8f6c\u6362\u6210\u56db\u5143\u6570 qtn = tf.transformations.quaternion_from_euler(0,0,0)#\u662f\u4e00\u4e2a\u5217\u8868\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4e0b\u6807\u7d22\u5f15\u83b7\u53d6\u5bf9\u5e94\u7684\u503c #\u56db\u5143\u6570\u83b7\u53d6 ts.transform.rotation.x =qtn[0] ts.transform.rotation.y = qtn[1] ts.transform.rotation.z = qtn[2] ts.transform.rotation.w = qtn[3] #\u53d1\u5e03\u6570\u636e pub.sendTransform(ts) rospy.spin() \u2463\u67e5\u770b\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u6570\u636e rostopic list\uff0c\u53ef\u4ee5\u770b\u5230\u6709\u8bdd\u9898\u540d\u4e3atf_static\u7684\u8bdd\u9898 rostopic echo tf_static\u53ef\u4ee5\u770b\u5230\u53d1\u5e03\u7684\u5177\u4f53\u4fe1\u606f \u4e5f\u53ef\u4ee5\u501f\u52a9\u53ef\u89c6\u5316\u5de5\u5177rviz\u76f4\u89c2\u770b\u5230\u4e24\u4e2a\u5750\u6807\u7cfb \uff08\u7ec8\u7aef\u4e2d\u8f93\u5165rviz\u6253\u5f00\u53ef\u89c6\u5316\u7a97\u53e3\uff0c\u5de6\u4e0a\u89d2Fixed Frame\u9009\u62e9baselink\uff0c\u5de6\u4e0b\u89d2add\uff0c\u6dfb\u52a0TF\u5373\u53ef\u770b\u5230\uff09 \u2463\u8ba2\u9605\u65b9\u4ee3\u7801\u7f16\u5199 \u65b0\u5efapython\u6587\u4ef6tf_static_sub.py\uff0c\u4e3a\u6587\u4ef6\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff0c\u4fee\u6539CMakelists\u6587\u4ef6 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs \"\"\" \u8ba2\u9605\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u5750\u6807\u53d8\u6362\u6d88\u606f\uff0c\u4f20\u5165\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9\uff0c\u8c03\u7528\u8f6c\u6362\u7b97\u6cd5\u5b9e\u73b0\u5750\u6807\u8f6c\u6362 1\u3001\u5bfc\u5305\uff08\u7528\u5230\u4ec0\u4e48\u5305\u5bfc\u5165\u4ec0\u4e48\u5305\uff09 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 5\u3001\u8f6c\u6362\u903b\u8f91\u7f16\u5199\uff08\u8c03\u7528tf\u5c01\u88c5\u7b97\u6cd5\uff09 6\u3001\u8f93\u51fa\u8f6c\u6362\u7ed3\u679cB 7\u3001spin\uff08\uff09/spinonce\uff08\uff09 \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped()#\u53ef\u4ee5\u7528rosmsg info geometry_msgs.PointStamped \u67e5\u770b\u6d88\u606f\u7ed3\u6784 ps.header.stamp = rospy.Time.now() ps.header.frame_id = \"laser\" ps.point.x = 2.0 ps.point.y = 3.0 ps.point.z = 5.0 #\u8f6c\u6362\u903b\u8f91\u5b9e\u73b0\uff0c\u7531\u4e8e\u96f7\u8fbe\u662f\u4e0d\u95f4\u65ad\u83b7\u53d6\u4fe1\u606f\u7684\uff0c\u8fd9\u91cc\u7528\u5faa\u73af\u53d1\u5e03\u6570\u636e\u6765\u6a21\u62df rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"baselink\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep()","title":"\u6cd5\u4e00\uff1a\u7f16\u7801\u5b9e\u73b0"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#ros_8","text":"rosrun tf2_ros static_transform_publisher x\u504f\u79fb\u91cf y\u504f\u79fb\u91cf z\u504f\u79fb\u91cf x\u8f74\u504f\u8f6c\u89d2 y\u8f74\u504f\u8f6c\u89d2 z\u8f74\u504f\u8f6c\u89d2 \u7236\u5750\u6807\u7cfb\u540d \u5b50\u5750\u6807\u7cfb\u540d","title":"\u6cd5\u4e8c\uff1aros\u5c01\u88c5\u547d\u4ee4\u5b9e\u73b0\u9759\u6001\u5750\u6807\u8f6c\u6362"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2_3","text":"\u6848\u4f8b\uff1a\u5b9e\u73b0\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u65f6\uff0c\u5b9e\u65f6\u663e\u793a\u4e4c\u9f9f\u4f4d\u59ff\u4e0e\u539f\u70b9\u7684\u76f8\u5bf9\u5173\u7cfb\uff0c\u5e76\u80fd\u591f\u5728rviz\u4e2d\u5b9e\u65f6\u89c2\u5bdf\u5230\u4e24\u5750\u6807\u7684\u76f8\u5bf9\u4f4d\u7f6e \u5b9e\u73b0\u601d\u8def\uff1a\u53d1\u5e03\u65b9\u8ba2\u9605\u4e4c\u9f9f\u8fd0\u52a8\u7684\u4f4d\u59ff\u4fe1\u606f\uff0c\u5efa\u7acb\u4e4c\u9f9f\uff08\u5b50\u7ea7\u5750\u6807\u7cfb\uff09\u4e0e\u539f\u70b9\uff08\u7236\u7ea7\u5750\u6807\u7cfb\uff09\u5e76\u53d1\u5e03\u76f8\u5bf9\u5173\u7cfb\uff0c\u8ba2\u9605\u65b9\u8ba2\u9605\u5230\u4e24\u5750\u6807\u7cfb\u5e76\u8f93\u51fa\u4e4c\u9f9f\u76f8\u5bf9\u539f\u70b9\u7684\u52a8\u6001\u53d8\u6362\u5750\u6807\u3002 \u6ce8\u610f\uff1a\u8fd9\u91cc\u7684\u53d1\u5e03\u65b9\u8ba2\u9605\u4e86\u5185\u7f6e\u8282\u70b9\u4e4c\u9f9f\u8fd0\u52a8\u7684\u4fe1\u606f\uff0c\u5176\u5b9e\u662f\u4e2a\u5d4c\u5957\u5b9e\u73b0 \u2460\u53d1\u5e03\u65b9\u7f16\u7801\u5b9e\u73b0 #! /usr/bin/env python import rospy from turtlesim.msg import Pose import tf2_ros from geometry_msgs.msg import TransformStamped import tf.transformations \"\"\" \u53d1\u5e03\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u4e4c\u9f9f\u7684\u4f4d\u59ff\u4fe1\u606f\uff0c\u8f6c\u6362\u6210\u5750\u6807\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u5e76\u53d1\u5e03 \u51c6\u5907\uff1a\u4e86\u89e3\u4e4c\u9f9f\u4f4d\u59ff\u7684\u8bdd\u9898\u548c\u6d88\u606f\u7c7b\u578b\uff1a\u8bdd\u9898\u662fturtle1/pose\uff0c\u7c7b\u578bturtlesim/Pose \u6d41\u7a0b\uff1a 1\u3001\u5bfc\u5305 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u56de\u8c03\u51fd\u6570\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\uff08\u6838\u5fc3\uff09 5\u3001spin\uff08\uff09 \"\"\" def doPose(pose): #\u521b\u5efa\u53d1\u5e03\u5750\u6807\u7cfb\u76f8\u5bf9\u5173\u7cfb\u7684\u5bf9\u8c61 pub = tf2_ros.TransformBroadcaster() #\u5c06Pose\u8f6c\u6362\u6210\u5750\u6807\u7cfb\u76f8\u5bf9\u5173\u7cfb\u7684\u6d88\u606f ts = TransformStamped() ts.header.frame_id = \"world\" ts.header.stamp = rospy.Time.now() ts.child_frame_id = \"turtle1\" #transform,\u5750\u6807\u7cfb\u5b50\u7ea7\u5750\u6807\u7cfb\u76f8\u5bf9\u4e8e\u7236\u7ea7\u5750\u6807\u7cfb\u7684\u504f\u79fb\u91cf ts.transform.translation.x = pose.x ts.transform.translation.y = pose.y ts.transform.translation.z = 0 #ts\u4e0b\u7684rotation\uff0c\u901a\u8fc7\u56db\u5143\u6570\u8bbe\u7f6e\u65b9\u5411\u4e0a\u7684\u504f\u8f6c\u89d2\uff08\u4e00\u822c\u9700\u8981\u4e00\u4e2a\u6b27\u62c9\u89d2\u7684\u8f6c\u6362\u8fc7\u7a0b\uff09 \"\"\" \u4e4c\u9f9f\u662f2D\u5bf9\u8c61\uff0c\u4e0d\u5b58\u5728x\u5411\u7684\u7ffb\u6eda\uff0cy\u5411\u7684\u4fef\u4ef0\uff0c\u53ea\u6709z\u5411\u4e0a\u7684\u8f6c\u5411\uff08\u504f\u822a\uff09 \u6b27\u62c9\u89d2\uff080\uff0c0 \uff0cpose.theta\uff09 \"\"\" qtn = tf.transformations.quaternion_from_euler(0,0,pose.theta) ts.transform.rotation.x = qtn[0] ts.transform.rotation.y = qtn[1] ts.transform.rotation.z = qtn[2] ts.transform.rotation.w = qtn[3] #\u53d1\u5e03 pub.sendTransform(ts) if __name__==\"__main__\": rospy.init_node(\"dynamic_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 sub = rospy.Subscriber(\"/turtle1/pose\",Pose,doPose,queue_size = 100) rospy.spin() \u2461\u8ba2\u9605\u65b9\u7f16\u7801\u5b9e\u73b0 \u8fd9\u91cc\u8981\u683c\u5916\u6ce8\u610f\u65f6\u95f4\u6233\u8981\u7f6e0\uff0c\u91c7\u7528rospy.Time()\uff0c\u5982\u679c\u4ecd\u7136\u91c7\u7528rospy.Time.now\u83b7\u53d6\u5f53\u524d\uff0c\u5750\u6807\u8f6c\u6362\u4f1a\u56e0\u4e3a\u65f6\u95f4\u6233\u76f8\u5dee\u8f83\u5927\u800c\u65e0\u6cd5\u5b8c\u6210\u8f6c\u6362\u4ece\u800c\u629b\u51fa\u5f02\u5e38\u3002 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs \"\"\" \u8ba2\u9605\u65b9\u5b9e\u73b0\uff1a \u8ba2\u9605\u5750\u6807\u53d8\u6362\u6d88\u606f\uff0c\u4f20\u5165\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9\uff0c\u8c03\u7528\u8f6c\u6362\u7b97\u6cd5\u5b9e\u73b0\u5750\u6807\u8f6c\u6362 1\u3001\u5bfc\u5305\uff08\u7528\u5230\u4ec0\u4e48\u5305\u5bfc\u5165\u4ec0\u4e48\u5305\uff09 2\u3001\u521d\u59cb\u5316ros\u8282\u70b9 3\u3001\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 4\u3001\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 5\u3001\u8f6c\u6362\u903b\u8f91\u7f16\u5199\uff08\u8c03\u7528tf\u5c01\u88c5\u7b97\u6cd5\uff09 6\u3001\u8f93\u51fa\u8f6c\u6362\u7ed3\u679cB 7\u3001spin\uff08\uff09/spinonce\uff08\uff09 \"\"\" if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped() #\u65f6\u95f4\u6233 0 ps.header.stamp = rospy.Time() ps.header.frame_id = \"turtle1\" rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"world\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep() \u2462\u8fd0\u884c \u542f\u52a8roscore\uff0c\u542f\u52a8\u4e4c\u9f9fGUI\u8282\u70b9\u548c\u952e\u76d8\u63a7\u5236\u8282\u70b9\uff0c\u5206\u522brosrun\u53d1\u5e03\u65b9\u548c\u8ba2\u9605\u65b9\uff0c\u6253\u5f00rviz\uff0c\u53ef\u4ee5\u770b\u5230\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u65f6\uff0c\u4f1a\u5b9e\u65f6\u8f93\u51fa\u4e4c\u9f9f\u76f8\u5bf9\u539f\u70b9\u5750\u6807\u7684\u4f4d\u7f6e\u4fe1\u606f\u548c\u5750\u6807\u7684\u52a8\u6001\u53d8\u5316\u56fe","title":"\uff082\uff09\u52a8\u6001\u5750\u6807\u53d8\u6362"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3_5","text":"\u2460\u6309\u7167\u9759\u6001\u5750\u6807\u53d8\u6362\u7684\u6cd5\u4e8c\u53d1\u5e03\u4e24\u4e2a\u9759\u6001\u76f8\u5bf9\u5750\u6807\u5173\u7cfb\uff1ason1\u4e0eworld\u548cson2\u4e0eworld\uff0c\u5e76\u7528launch\u6587\u4ef6\u5c01\u88c5\u8d77\u6765 <launch> <!-- \u53d1\u5e03son1\u76f8\u5bf9\u4e8eworld\u4ee5\u53cason2\u76f8\u5bf9\u4e8eworld\u7684\u5750\u6807\u5173\u7cfb --> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"son1\" args=\"5 0 0 0 0 0 /world /son1\" output=\"screen\"/> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"son2\" args=\"3 0 0 0 0 0 /world /son2\" output=\"screen\"/> </launch> \u2461\u7c7b\u6bd4\u52a8\u6001\u5750\u6807\u53d8\u6362\u7f16\u5199\u4ee3\u7801 #! /usr/bin/env python import rospy import tf2_ros from tf2_geometry_msgs import tf2_geometry_msgs from geometry_msgs.msg import TransformStamped if __name__==\"__main__\": #\u521d\u59cb\u5316ros\u8282\u70b9 rospy.init_node(\"static_tf_pub\") #\u521b\u5efa\u8ba2\u9605\u5bf9\u8c61 buffer = tf2_ros.Buffer() #\u521b\u5efa\u7f13\u5b58\u5bf9\u8c61 sub = tf2_ros.TransformListener(buffer)#\u5c06\u7f13\u5b58\u5bf9\u8c61\u4f20\u5165 #\u7ec4\u7ec7\u88ab\u8f6c\u6362\u7684\u5750\u6807\u70b9 ps = tf2_geometry_msgs.PointStamped() #\u65f6\u95f4\u6233 0 ps.header.stamp = rospy.Time.now() ps.header.frame_id = \"son1\" ps.point.x = 1.0 ps.point.y = 2.0 ps.point.z = 3.0 #\u8f6c\u6362\u903b\u8f91\u5b9e\u73b0 rate = rospy.Rate(10) while not rospy.is_shutdown(): try: #\u8ba1\u7b97son1\u76f8\u5bf9\u4e8eson2\u7684\u8f6c\u6362\u5173\u7cfb ts = buffer.lookup_transform(\"son2\",\"son1\",rospy.Time(0)) rospy.loginfo(\"\u7236\u7ea7\u5750\u6807\u7cfb\uff1a%s\uff0c \u5b50\u7ea7\u5750\u6807\u7cfb\uff1a%s\", ts.header.frame_id, ts.child_frame_id) #\u8f6c\u6362\uff1abuffer\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u8f6c\u6362\u51fd\u6570 ps_out = buffer.transform(ps,\"son2\") rospy.loginfo(\"\u8f6c\u6362\u540e\u7684\u5750\u6807\u7ed3\u679c:(%.2f,%.2f,%.2f)\u5f53\u524d\u53c2\u8003\u7684\u5750\u6807\u7cfb\uff1a%s\",ps_out.point.x,ps_out.point.y,ps_out.point.z,ps_out.header.frame_id) except: rospy.logwarn(\"\u9519\u8bef\u63d0\u793a\uff1a%s\",Exception) rate.sleep() \uff084\uff09\u5750\u6807\u5173\u7cfb\u67e5\u770b\u5de5\u5177tf2_tools \u9996\u5148\u8c03\u7528rospack find tf2_tools\u67e5\u770b\u662f\u5426\u5305\u542b\u8be5\u529f\u80fd\u5305\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5: sudo apt install ros-noetic-tf2-tools \u6ce8\u610f\u4f7f\u7528\u8be5\u5de5\u5177\u7684\u524d\u63d0\u662f\uff0c\u5df2\u7ecf\u542f\u52a8\u4e86\u5750\u6807\u76f8\u5bf9\u5173\u7cfb\u53d8\u6362\u7684\u8282\u70b9 \u4f7f\u7528\u547d\u4ee4\u67e5\u770b\u5750\u6807\u76f8\u5bf9\u5173\u7cfb rosrun tf2_tools view_frames.py \u63a5\u4e0b\u6765\u4f1a\u81ea\u52a8\u89e3\u6790\u5f53\u524d\u542f\u52a8\u7684\u5750\u6807\u5e76\u8f93\u51fa\u4e00\u4e2apdf\u6587\u4ef6\uff0c\u663e\u793a\u5750\u6807\u95f4\u7684\u76f8\u5bf9\u5173\u7cfb\uff0c\u53ef\u4ee5\u5728\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u7684\u8def\u5f84\u4e0b\u627e\u5230\u8be5pdf\u6587\u4ef6\u5e76\u6253\u5f00","title":"\uff083\uff09\u591a\u5750\u6807\u53d8\u6362"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2rosbag","text":"\u5728ROS\u4e2d\u63d0\u4f9b\u6570\u636e\u5f97\u7559\u5b58\u548c\u8bfb\u53d6\u5b9e\u73b0\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u5f55\u5236\u4e0e\u56de\u653e\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u590d\u7528\uff0c\u4fbf\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5 1.\u51c6\u5907 \u521b\u5efa\u76ee\u5f55\u4fdd\u5b58\u5f55\u5236\u7684\u6587\u4ef6 mkdir ./xxx cd xxx 2.\u5f00\u59cb\u5f55\u5236 rosbag record -a -O \u76ee\u6807\u6587\u4ef6\uff08\u5199\u6e05\u695a\u8def\u5f84\uff09 \u64cd\u4f5c\u5c0f\u4e4c\u9f9f\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ed3\u675f\u5f55\u5236\u4f7f\u7528 ctrl + c\uff0c\u5728\u521b\u5efa\u7684\u76ee\u5f55\u4e2d\u4f1a\u751f\u6210bag\u6587\u4ef6\u3002 3.\u67e5\u770b\u6587\u4ef6 rosbag info \u6587\u4ef6\u540d\uff08\u5199\u6e05\u695a\u8def\u5f84\uff09 4.\u56de\u653e\u6587\u4ef6 rosbag play \u6587\u4ef6\u540d \u91cd\u542f\u4e4c\u9f9f\u8282\u70b9\uff0c\u4f1a\u53d1\u73b0\uff0c\u4e4c\u9f9f\u6309\u7167\u5f55\u5236\u65f6\u7684\u8f68\u8ff9\u8fd0\u52a8","title":"2\u3001rosbag\u8282\u70b9\u5f55\u5236\u4e0e\u56de\u653e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3rqt","text":"\u200b rqt\u5de5\u5177\u7bb1\u662f\u673a\u5668\u4eba\u5f00\u53d1\u4e2d\u7684\u4e00\u7cfb\u5217\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u5728\u8c03\u7528\u5de5\u5177\u65f6\u4ee5\u56fe\u5f62\u5316\u64cd\u4f5c\u4ee3\u66ff\u4e86\u547d\u4ee4\u64cd\u4f5c\uff0c\u5b9e\u73b0ros\u53ef\u89c6\u5316\u8c03\u8bd5\uff0c\u4e3aros\u5f00\u53d1\u63d0\u4f9b\u4e86\u4fbf\u5229\u3002","title":"3\u3001rqt\u5de5\u5177\u7bb1"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1rqt","text":"\u4f7f\u7528rqt\u5de5\u5177\u7bb1\u8c03\u7528\u8bdd\u9898\u53d1\u5e03\u4ece\u800c\u63a7\u5236\u5c0f\u4e4c\u9f9f\u8fd0\u52a8\u7684\u6b65\u9aa4\u793a\u610f\u56fe rqt\u542f\u52a8\uff0cplugins\u9009\u62e9topic\uff0c\u4e0b\u62c9\u9009\u62e9\u5408\u9002\u7684\u8282\u70b9\uff0c+\u53f7\u6dfb\u52a0\u5230\u7a7a\u767d\u5904\uff0c\u4e0b\u62c9\u8bbe\u7f6e\u53c2\u6570\uff0cmessage publisher\u53d1\u5e03","title":"\uff081\uff09rqt\u8bdd\u9898\u53d1\u5e03"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2rqt-graph","text":"\u53ef\u4ee5\u76f4\u63a5\u5728\u5de5\u5177\u7bb1\u91cc\u8c03\u7528","title":"\uff082\uff09rqt-graph"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3rqt-console","text":"ros\u4e2d\u7528\u4e8e\u663e\u793a\u548c\u8fc7\u6ee4\u65e5\u5fd7\u7684\u56fe\u5f62\u5316\u63d2\u4ef6","title":"\uff083\uff09rqt-console"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4rqt-plot","text":"\u4ee52D\u7ed8\u56fe\u7684\u65b9\u5f0f\u7ed8\u5236\u6570\u636e","title":"\uff084\uff09rqt-plot"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#5rqt-bag","text":"\u5f55\u5236\u548c\u91cd\u653ebag\u6587\u4ef6\u7684\u56fe\u5f62\u5316\u63d2\u4ef6 rqt-bag\u542f\u52a8\u6216\u8005\u5728plugins\u9009\u62e9\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7ea2\u8272\u5706\u5708\u5f00\u59cb\u9009\u62e9\u9700\u8981\u5f55\u5236\u7684\u8282\u70b9\uff0c\u5e76\u70b9\u51fbrecord\u6dfb\u52a0bag\u6587\u4ef6\u5b58\u653e\u7684\u8def\u5f84\u5373\u53ef\u5f00\u59cb\u5f55\u5236 \u9700\u8981\u56de\u653e\u65f6\u70b9\u51fb\u5706\u5708\u65c1\u8fb9\u7684\u6587\u4ef6\u5939\u6309\u94ae\uff0c\u9009\u62e9\u60f3\u8981\u56de\u653e\u7684bag\u6587\u4ef6\uff0c\u56de\u653e\u65f6\u8981\u6ce8\u610f\u9700\u8981\u53f3\u952e\u70b9\u51fb\u8fdb\u5ea6\u6761\uff0c\u52fe\u9009publisher\u4e4c\u9f9f\u624d\u4f1a\u8fd0\u52a8\u3002","title":"\uff085\uff09rqt-bag"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#_4","text":"","title":"\u4e5d\u3001\u673a\u5668\u4eba\u7cfb\u7edf\u4eff\u771f"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1urdfrviz","text":"\uff081\uff09\u521b\u5efa\u529f\u80fd\u5305\uff0c\u5e76\u6dfb\u52a0\u4f9d\u8d56\uff0c\u4e0e\u673a\u5668\u4eba\u6a21\u578b\u76f8\u5173\u7684\u4f9d\u8d56\u4e3b\u8981\u6709urdf \u548cxacro \uff082\uff09\u5728\u529f\u80fd\u5305\u4e0b\u65b0\u5efa\u4e00\u4e9b\u6587\u4ef6\u5939 launch\uff1a\u7528\u4e8e\u5b58\u653elaunch\u542f\u52a8\u6587\u4ef6 urdf\uff1a\u5b58\u653e\u673a\u5668\u4eba\u63cf\u8ff0\u6587\u4ef6\uff08urdf\u6587\u4ef6\uff09 meshes\uff1a\u7528\u4e8e\u7ed9\u673a\u5668\u4eba\u8d34\u76ae\u80a4 config\uff1a\u5b58\u653e\u914d\u7f6e\u6587\u4ef6 \uff083\uff09\u7f16\u5199urdf\u6587\u4ef6\uff0c\u751f\u6210\u4e00\u4e2a\u65b9\u5f62\u7684\u673a\u5668\u4eba\u6a21\u578b <robot name=\"mycar\"> <link name=\"base_link\"> <visual> <geometry> <box size=\"0.5 0.2 0.1\" /> </geometry> </visual> </link> </robot> \uff084\uff09\u521b\u5efalaunch\u542f\u52a8\u6587\u4ef6 <launch> <!-- 1\u3001\u5728\u53c2\u6570\u670d\u52a1\u5668\u8f7d\u5165urdf\u6587\u4ef6--> <param name=\"robot_description\" textfile=\" $(find urdf_rviz)/urdf/urdf/helloworld.urdf\"/> <!-- 2\u3001\u542f\u52a8rviz--> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\"/> </launch> (5)\u914d\u7f6erviz\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\uff0c\u6ce8\u610fFixed Frame\u8981\u9009\u62e9urdf\u91cc\u8bbe\u7f6e\u7684\u540d\u79f0link name\uff0c\u4e5f\u53ef\u4ee5\u6dfb\u52a0TF\u5750\u6807\u8f74\u76f4\u89c2\u663e\u793a\u3002 \uff086\uff09\u4fdd\u5b58\u914d\u7f6e \u7531\u4e8e\u4e0d\u4fdd\u5b58\u914d\u7f6e\u65f6\u4f1a\u5bfc\u81f4\u5f53\u4e0b\u6b21\u518d\u6b21\u6253\u5f00launch\u6587\u4ef6\u6253\u5f00rviz\u65f6\uff0c\u4ecd\u7136\u9700\u8981\u91cd\u65b0\u914d\u7f6e \u5de6\u4e0a\u89d2File\uff0csave config as\uff0c\u5b58\u653e\u5230\u6587\u4ef6\u5939config\u4e2d\u5373\u53ef \u5728launch\u6587\u4ef6\u4e2d\u9700\u8981\u5bfc\u5165\u914d\u7f6e\u597d\u7684rviz\u6587\u4ef6 \u91cd\u65b0\u542f\u52a8\u65f6\u5c31\u65e0\u9700\u518d\u91cd\u590d\u914d\u7f6e\u4e86","title":"1\u3001URDF\u96c6\u6210rviz\u57fa\u672c\u6d41\u7a0b"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2urdf","text":"urdf\u6587\u4ef6\u662f\u6807\u51c6xml\u6587\u4ef6\uff0c\u9884\u5b9a\u4e49\u4e86\u4e00\u4e9b\u5217\u6807\u7b7e\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u6a21\u578b\uff0c\u4e3b\u8981\u5206\u4e3a\u4e24\u7c7b\u8fde\u6746\uff08link\uff09\u4e0e\u5173\u8282\uff08joint\uff09 \u8fde\u6746\uff1a\u673a\u5668\u4eba\u7684\u53ef\u89c1\u90e8\u5206\uff0c\u5373\u521a\u4f53\u90e8\u5206 \u5173\u8282\uff1a\u8fde\u6746\u4e4b\u95f4\u997f\u5173\u7cfb\u8fde\u63a5\uff08\u5173\u8282\uff09\uff0c\u4f46\u662f\u5173\u8282\u8fd9\u90e8\u5206\u5728\u76f4\u89c2\u4e0a\u662f\u4e0d\u53ef\u89c1\u7684 robot\uff1a\u7c7b\u4f3c\u8ddf\u6807\u7b7e\u7684\u5b58\u5728 gazebo\uff1agazebo\u4eff\u771f\u65f6\u4f7f\u7528\u7684\u6807\u7b7e\uff0c\u7528\u4e8e\u914d\u7f6e\u673a\u5668\u4eba\u7684\u6240\u9700\u53c2\u6570\uff0c\u5982\u673a\u5668\u4eba\u7684\u6750\u6599\u5c5e\u6027\uff0cgazebo\u63d2\u4ef6\u7b49\uff0c\u4f46\u8fd9\u7c7b\u6807\u7b7e\u5e76\u4e0d\u5fc5\u987b\uff0c\u53ea\u6709\u5728\u9700\u8981\u4eff\u771f\u65f6\u8bbe\u7f6e\u3002","title":"2\u3001URDF\u6587\u4ef6\u7f16\u5199\u8bed\u6cd5"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1robot","text":"\u200b urdf\u4e3a\u4e86\u4fdd\u8bc1xml\u6587\u4ef6\u8bed\u6cd5\u5b8c\u6574\u6027\uff0c\u4f7f\u7528robot\u6807\u7b7e\u4f5c\u4e3a\u8ddf\u6807\u7b7e\uff0c\u6240\u6709\u7684 link \u548c joint \u4ee5\u53ca\u5176\u4ed6\u6807\u7b7e\u90fd\u5fc5\u987b\u5305\u542b\u5728 robot \u6807\u7b7e\u5185,\u5728\u8be5\u6807\u7b7e\u5185\u53ef\u4ee5\u901a\u8fc7 name \u5c5e\u6027\u8bbe\u7f6e\u673a\u5668\u4eba\u6a21\u578b\u7684\u540d\u79f0\u3002","title":"\uff081\uff09robot\u6807\u7b7e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2link","text":"\u63cf\u8ff0\u673a\u5668\u4eba\u67d0\u90e8\u4ef6\u7684\u5916\u89c2\u548c\u521a\u4f53\u5c5e\u6027\uff0c\u6bd4\u5982: \u673a\u5668\u4eba\u5e95\u5ea7\u3001\u8f6e\u5b50\u3001\u6fc0\u5149\u96f7\u8fbe\u3001\u6444\u50cf\u5934...\u6bcf\u4e00\u4e2a\u90e8\u4ef6\u90fd\u5bf9\u5e94\u4e00\u4e2a link, \u5728 link \u6807\u7b7e\u5185\uff0c\u53ef\u4ee5\u8bbe\u8ba1\u8be5\u90e8\u4ef6\u7684\u5f62\u72b6\u3001\u5c3a\u5bf8\u3001\u989c\u8272\u3001\u60ef\u6027\u77e9\u9635\u3001\u78b0\u649e\u53c2\u6570\u7b49\u4e00\u7cfb\u5217\u5c5e\u6027 \u7f16\u5199urdf\u6587\u4ef6\u65f6\uff0c\u5173\u952e\u5728\u4e8e\u8981\u7406\u6e05\u5c42\u7ea7\u5173\u7cfb 1.\u5c5e\u6027 name ---> \u4e3a\u8fde\u6746\u547d\u540d 2.\u5b50\u6807\u7b7e visual ---> \u63cf\u8ff0\u5916\u89c2(\u5bf9\u5e94\u7684\u6570\u636e\u662f\u53ef\u89c6\u7684) geometry \u8bbe\u7f6e\u8fde\u6746\u7684\u51e0\u4f55\u5f62\u72b6 \u200b \u6807\u7b7e1: box(\u76d2\u72b6) \u200b \u5c5e\u6027:size=\u957f(x) \u5bbd(y) \u9ad8(z) \u200b \u6807\u7b7e2: cylinder(\u5706\u67f1) \u200b \u5c5e\u6027:radius=\u534a\u5f84 length=\u9ad8\u5ea6 \u200b \u6807\u7b7e3: sphere(\u7403\u4f53) \u200b \u5c5e\u6027:radius=\u534a\u5f84 \u200b \u6807\u7b7e4: mesh(\u4e3a\u8fde\u6746\u6dfb\u52a0\u76ae\u80a4) \u200b \u5c5e\u6027: filename=\u8d44\u6e90\u8def\u5f84(\u683c\u5f0f:\\package:// / /\u6587\u4ef6) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u8bbe\u7f6e\u4e0d\u540c\u5f62\u72b6\u7684\u673a\u5668\u4eba\u90e8\u4ef6 --> <robot name=\"mycar\"> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <!-- <box size=\"0.3 0.2 0.1\"/> --> <!-- \u5706\u67f1\u4f53--> <!-- <cylinder radius=\"0.2\" length=\"1\"/> --> <!-- \u7403\u4f53--> <!-- <sphere radius=\"1\"/> --> <!-- \u6dfb\u52a0\u76ae\u80a4 --> <mesh filename=\"package://urdf_rviz/meshes/autolabor_mini.stl\"/> </geometry> </visual> </link> </robot> \u200b origin \u8bbe\u7f6e\u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 \u200b \u5c5e\u60271: xyz=x\u504f\u79fb y\u4fbf\u5b9c z\u504f\u79fb \u200b \u5c5e\u60272: rpy=x\u7ffb\u6eda y\u4fef\u4ef0 z\u504f\u822a (\u5355\u4f4d\u662f\u5f27\u5ea6) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0' rpy='1.57 0 0'/> \u200b metrial \u8bbe\u7f6e\u6750\u6599\u5c5e\u6027(\u989c\u8272) \u200b \u5c5e\u6027: name \u200b \u6807\u7b7e: color \u200b \u5c5e\u6027: rgba=\u7ea2\u7eff\u84dd\u6743\u91cd\u503c\u4e0e\u900f\u660e\u5ea6 (\u6bcf\u4e2a\u6743\u91cd\u503c\u4ee5\u53ca\u900f\u660e\u5ea6\u53d6\u503c[0,1]) \u793a\u4f8b\u5982\u4e0b\uff1a <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0.7 0.34 0.8 0.5\"/> </material> collision ---> \u8fde\u6746\u7684\u78b0\u649e\u5c5e\u6027 Inertial ---> \u8fde\u6746\u7684\u60ef\u6027\u77e9\u9635","title":"\uff082\uff09link\u6807\u7b7e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3joint","text":"\u200b urdf \u4e2d\u7684 joint \u6807\u7b7e\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u5173\u8282\u7684\u8fd0\u52a8\u5b66\u548c\u52a8\u529b\u5b66\u5c5e\u6027\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u5173\u8282\u8fd0\u52a8\u7684\u5b89\u5168\u6781\u9650\uff0c\u673a\u5668\u4eba\u7684\u4e24\u4e2a\u90e8\u4ef6(\u5206\u522b\u79f0\u4e4b\u4e3a parent link \u4e0e child link)\u4ee5\"\u5173\u8282\"\u7684\u5f62\u5f0f\u76f8\u8fde\u63a5\uff0c\u4e0d\u540c\u7684\u5173\u8282\u6709\u4e0d\u540c\u7684\u8fd0\u52a8\u5f62\u5f0f: \u65cb\u8f6c\u3001\u6ed1\u52a8\u3001\u56fa\u5b9a\u3001\u65cb\u8f6c\u901f\u5ea6\u3001\u65cb\u8f6c\u89d2\u5ea6\u9650\u5236....,\u6bd4\u5982:\u5b89\u88c5\u5728\u5e95\u5ea7\u4e0a\u7684\u8f6e\u5b50\u53ef\u4ee5360\u5ea6\u65cb\u8f6c\uff0c\u800c\u6444\u50cf\u5934\u5219\u53ef\u80fd\u662f\u5b8c\u5168\u56fa\u5b9a\u5728\u5e95\u5ea7\u4e0a\u3002joint\u6807\u7b7e\u5bf9\u5e94\u7684\u6570\u636e\u5728\u6a21\u578b\u4e2d\u662f\u4e0d\u53ef\u89c1\u7684\u3002 \u5c5e\u6027 name ---> \u4e3a\u5173\u8282\u547d\u540d type ---> \u5173\u8282\u8fd0\u52a8\u5f62\u5f0f continuous: \u65cb\u8f6c\u5173\u8282\uff0c\u53ef\u4ee5\u7ed5\u5355\u8f74\u65e0\u9650\u65cb\u8f6c revolute: \u65cb\u8f6c\u5173\u8282\uff0c\u7c7b\u4f3c\u4e8e continues,\u4f46\u662f\u6709\u65cb\u8f6c\u89d2\u5ea6\u9650\u5236 prismatic: \u6ed1\u52a8\u5173\u8282\uff0c\u6cbf\u67d0\u4e00\u8f74\u7ebf\u79fb\u52a8\u7684\u5173\u8282\uff0c\u6709\u4f4d\u7f6e\u6781\u9650 planer: \u5e73\u9762\u5173\u8282\uff0c\u5141\u8bb8\u5728\u5e73\u9762\u6b63\u4ea4\u65b9\u5411\u4e0a\u5e73\u79fb\u6216\u65cb\u8f6c floating: \u6d6e\u52a8\u5173\u8282\uff0c\u5141\u8bb8\u8fdb\u884c\u5e73\u79fb\u3001\u65cb\u8f6c\u8fd0\u52a8 fixed: \u56fa\u5b9a\u5173\u8282\uff0c\u4e0d\u5141\u8bb8\u8fd0\u52a8\u7684\u7279\u6b8a\u5173\u8282 \u5b50\u7ea7\u6807\u7b7e parent(\u5fc5\u9700\u7684) parent link\u7684\u540d\u5b57\u662f\u4e00\u4e2a\u5f3a\u5236\u7684\u5c5e\u6027\uff1a link:\u7236\u7ea7\u8fde\u6746\u7684\u540d\u5b57\uff0c\u662f\u8fd9\u4e2alink\u5728\u673a\u5668\u4eba\u7ed3\u6784\u6811\u4e2d\u7684\u540d\u5b57\u3002 child(\u5fc5\u9700\u7684) child link\u7684\u540d\u5b57\u662f\u4e00\u4e2a\u5f3a\u5236\u7684\u5c5e\u6027\uff1a link:\u5b50\u7ea7\u8fde\u6746\u7684\u540d\u5b57\uff0c\u662f\u8fd9\u4e2alink\u5728\u673a\u5668\u4eba\u7ed3\u6784\u6811\u4e2d\u7684\u540d\u5b57\u3002 origin \u5c5e\u6027: xyz=\u5404\u8f74\u7ebf\u4e0a\u7684\u504f\u79fb\u91cf rpy=\u5404\u8f74\u7ebf\u4e0a\u7684\u504f\u79fb\u5f27\u5ea6\u3002 axis \u5c5e\u6027: xyz\u7528\u4e8e\u8bbe\u7f6e\u56f4\u7ed5\u54ea\u4e2a\u5173\u8282\u8f74\u8fd0\u52a8\u3002 <!-- \u9700\u6c42:\u8bbe\u7f6e\u673a\u5668\u4eba\u5e95\u76d8,\u5e76\u6dfb\u52a0\u6444\u50cf\u5934 --> <robot name=\"mycar\"> <!-- 1 \u5e95\u76d8link --> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <box size=\"0.3 0.2 0.1\"/> </geometry> <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0' rpy='0 0 0'/> <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0.3 0.4 0.8 0.8\"/> </material> </visual> </link> <!-- 2 \u6444\u50cf\u5934link --> <link name=\"camera\"> <!-- \u53ef\u89c6\u5316\u6807\u7b7e --> <visual> <!-- \u5f62\u72b6 --> <geometry> <!-- \u7acb\u65b9\u4f53 --> <box size=\"0.03 0.05 0.05\"/> </geometry> <!-- \u504f\u79fb\u91cf\u4e0e\u503e\u659c\u5f27\u5ea6 --> <!-- xyz:\u8bbe\u7f6e\u5206\u522b\u5728xyz\u4e0a\u7684\u504f\u79fb\u91cf rpy\u7528\u4e8e\u8bbe\u7f6exyz\u4e09\u4e2a\u65b9\u5411\u7684\u65cb\u8f6c\u89d2 --> <origin xyz='0 0 0.025' rpy='0 0 0'/> <!-- \u9700\u8981\u4e0a\u79fb\u534a\u4e2a\u6444\u50cf\u5934\u7684\u9ad8\u5ea6,\u624d\u4e0d\u4f1a\u5bfc\u81f4\u6444\u50cf\u5934\u5185\u5d4c\u5728\u673a\u5668\u4eba\u8f66\u4f53\u91cc --> <!-- \u989c\u8272 --> <!-- rgba: rgb\u4e09\u539f\u8272,a\u900f\u660e\u5ea6,\u56db\u4e2a\u503c\u53d6\u503c\u90fd\u57280\u52301\u4e4b\u95f4 --> <material name=\"car_color\"> <color rgba = \"0 1 0 0.8\"/> </material> </visual> </link> <!-- 3 \u5173\u8282 --> <joint name=\"camera_to_link\" type=\"continuous\"> <!-- \u7236\u7ea7link --> <parent link=\"base_link\"/> <!-- \u5b50\u7ea7link --> <child link=\"camera\"/> <!-- \u8bbe\u7f6e\u504f\u79fb\u91cf --> <origin xyz='0.13 0 0.05' rpy='0 0 0'/> <!-- \u8bbe\u7f6e\u5173\u8282\u65cb\u8f6c\u53c2\u8003\u7684\u5750\u6807\u8f74 --> <axis xyz='0 0 1'/> </joint> </robot> launch\u6587\u4ef6\u7f16\u5199\uff1a <launch> <!-- 1\u3001\u5728\u53c2\u6570\u670d\u52a1\u5668\u8f7d\u5165urdf\u6587\u4ef6 --> <param name=\"robot_description\" textfile=\"$(find urdf_rviz)/urdf/urdf/joint.urdf\"/> <!-- 2\u3001\u542f\u52a8rviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find urdf_rviz)/config/showmycar.rviz\"/> <!-- \u6ce8\u610f:\u53ea\u6709\u4e0a\u8ff0\u4e24\u6761\u8bed\u53e5\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38:\u663e\u793a\u4f4d\u7f6e\u4e0e\u989c\u8272\u5f02\u5e38,\u7ed9\u51fa\u63d0\u793a no transform from camera to baselink(\u7f3a\u5c11\u5750\u6807\u53d8\u6362) --> <!-- \u539f\u56e0:rviz\u4e2d\u663e\u793aurdf\u65f6.\u5fc5\u987b\u53d1\u5e03\u4e0d\u540c\u90e8\u4ef6\u4e4b\u95f4\u7684\u5750\u6807\u7cfb\u5173\u7cfb --> <!-- \u89e3\u51b3:ROS\u4e2d\u63d0\u4f9b\u7684\u5173\u4e8e\u673a\u5668\u4eba\u6a21\u578b\u663e\u793a\u7684\u5750\u6807\u53d1\u5e03\u76f8\u5173\u8282\u70b9(joint_state_publisher \u548c robot_state_publisher) --> <!-- \u5173\u8282\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\"/> <!-- \u673a\u5668\u4eba\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\"/> <!--\u6dfb\u52a0\u63a7\u5236\u673a\u5668\u4eba\u5173\u8282\u8fd0\u52a8\u7684\u8282\u70b9--> <node pkg=\"joint_state_publisher_gui\" type=\"joint_state_publisher_gui\" name=\"joint_state_publisher_gui\"/> </launch> \u6ce8\u610f\uff1a\u5173\u8282\u63a7\u5236\u8282\u70b9\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u5728\u4e8e\u63d0\u4f9b\u4e00\u4e2a\u63a7\u5236\u5173\u8282\u8282\u70b9\u8fd0\u52a8\u7684UI\u754c\u9762\uff0c\u4fbf\u4e8e\u8c03\u8bd5urdf\u6587\u4ef6\u662f\u5426\u6b63\u5e38\u3002","title":"\uff083\uff09joint\u6807\u7b7e"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4urdf","text":"\u5728 ROS \u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5de5\u5177\u6765\u65b9\u4fbf URDF \u6587\u4ef6\u7684\u7f16\u5199\uff0c\u6bd4\u5982: check_urdf\u547d\u4ee4\u53ef\u4ee5\u68c0\u67e5\u590d\u6742\u7684 urdf \u6587\u4ef6\u662f\u5426\u5b58\u5728\u8bed\u6cd5\u95ee\u9898 urdf_to_graphiz\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b urdf \u6a21\u578b\u7ed3\u6784\uff0c\u663e\u793a\u4e0d\u540c link \u7684\u5c42\u7ea7\u5173\u7cfb \u4f7f\u7528\u5de5\u5177\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u5b89\u88c5\uff0c\u5b89\u88c5\u547d\u4ee4:sudo apt install liburdfdom-tools","title":"\uff084\uff09URDF\u5de5\u5177"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3rvizarbotix","text":"\uff081\uff09\u5b89\u88c5arbotix sudo apt-get ros-neotic-arbotix","title":"3\u3001\u5728RVIZ\u4e2d\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8\uff08Arbotix\uff09"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4urdfgazebo","text":"\uff081\uff09\u521b\u5efa\u529f\u80fd\u5305 \u529f\u80fd\u5305\uff1aurdf_gazebo \u4f9d\u8d56\uff1aurdf xacro gazebo_ros gazebo_ros_control gazebo_plugins \uff082\uff09\u6587\u4ef6\u5939\u51c6\u5907 \u65b0\u5efa\u6587\u4ef6\u5939\uff1aurdf\u2014\u2014\u65b0\u5efa\u6587\u4ef6 urdf\u6587\u4ef6\u5199\u597d\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528check_urdf\u5de5\u5177\u68c0\u67e5\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\uff0c\u4eba\u5de5\u68c0\u67e5\u96be\u4ee5\u53d1\u73b0\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u540e\u7eedgazebo\u73af\u5883\u4e2d\u65e0\u6cd5\u6b63\u786e\u663e\u793a\u3002 \u68c0\u67e5\u547d\u4ee4\uff1a\u5728\u7ec8\u7aef\u8fdb\u5165urdf\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 check_urdf xxx.urdf(urdf\u6587\u4ef6\u540d) urdf\u4ee3\u7801\u793a\u4f8b\uff1a <robot name=\"myrobot\"> <link name=\"base_link\"> <!-- \u53ef\u89c6\u5316\u90e8\u5206 --> <visual> <geometry> <box size=\"0.5 0.3 0.1\"/> </geometry> <origin xyz=\"0 0 0\" rpy=\"0 0 0\"/> <!-- \u7531\u4e8e\u4eff\u771f\u4e2d\u521a\u4f53\u4e0d\u4f1a\u900f\u660e,\u4e8e\u662f\u989c\u8272\u5728gazebo\u4e2d\u4e0d\u518d\u751f\u6548,gazebo\u6709\u7279\u5b9a\u7684\u989c\u8272\u8bbe\u7f6e --> <material name=\"yellow\"> <color rgba=\"0.5 0.5 0 0.8\"/> </material> </visual> <!-- gezebo\u4e0erviz\u4e0d\u540c\u7684\u90e8\u5206:collision\u78b0\u649e\u5c5e\u6027\u548cinertial\u60ef\u6027\u77e9\u9635 --> <!-- 1.\u78b0\u649e\u53c2\u6570collision:\u5982\u679c\u662f\u6807\u51c6\u51e0\u4f55\u4f53,\u76f4\u63a5\u590d\u5236isual\u4e2d\u7684geometry\u548corigin\u5373\u53ef --> <collision> <geometry> <box size=\"0.5 0.3 0.1\"/> </geometry> <origin xyz=\"0 0 0\" rpy=\"0 0 0\"/> </collision> <!-- 2.\u60ef\u6027\u77e9\u9635inertial:\u9700\u8981\u516c\u5f0f\u8ba1\u7b97,\u4e0e\u91cd\u5fc3\u548c\u8d28\u91cf\u6709\u5173 --> <inertial> <!-- \u8bbe\u7f6e\u91cd\u5fc3\u504f\u79fb:\u8d28\u91cf\u5bc6\u5ea6\u5747\u5300\u65f6\u5c31\u662f000 --> <origin xyz=\"0 0 0\"/> <!-- \u6807\u7b7emass\u8bbe\u7f6e\u8d28\u91cf --> <mass value=\"2\"/> <!-- \u4e0d\u540c\u7ef4\u5ea6\u4e0a\u7684\u60ef\u6027\u53c2\u6570:\u9700\u8981\u901a\u8fc7\u516c\u5f0f\u8ba1\u7b97,\u5426\u5219\u4eff\u771f\u53ef\u80fd\u4f1a\u51fa\u95ee\u9898 --> <inertia ixx=\"1\" ixy=\"0\" ixz=\"0\" iyy=\"1\" iyz=\"0\" izz=\"1\"/> </inertial> </link> <!-- gazebo\u989c\u8272\u8bbe\u7f6e(\u6ce8\u610f\u4f4d\u7f6e,\u8bbe\u7f6e\u5728\u8fde\u6746\u6807\u7b7e\u5916\u7684) --> <gazebo reference=\"base_link\"> <material>Gazebo/Red</material> </gazebo> </robot> \u5c06urdf\u6587\u4ef6\u548cgazebo\u542f\u52a8\u96c6\u6210\u5230launch\u6587\u4ef6\u4e2d <launch> <!-- \u5728\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u8f7d\u5165urdf --> <param name=\"robot_description\" textfile=\"$(find urdf_gazebo)/urdf/helloworld.urdf\"/> <!-- \u542f\u52a8gazebo\u4eff\u771f\u73af\u5883 --> <include file=\"$(find gazebo_ros)/launch/empty_world.launch\"/> <!-- \u5728gazebo\u4e2d\u6dfb\u52a0\u673a\u5668\u4eba\u6a21\u578b --> <node pkg=\"gazebo_ros\" type=\"spawn_model\" name=\"spawn_model\" args=\"-urdf -model car -param robot_description\"/> <!-- car\u662f\u540d\u5b57\uff0c\u53ef\u4ee5\u81ea\u5df1\u53d6\uff0c\u522b\u7684\u4e0d\u53ef\u4ee5--> </launch>","title":"4\u3001URDF\u96c6\u6210Gazebo\u7684\u57fa\u672c\u6d41\u7a0b"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#5gazebo","text":"\u200b \u4e4b\u524d\u7684\u6848\u4f8bgazebo\u4e2d\u5bfc\u5165\u7684\u662f\u4e00\u4e2a\u7a7a\u4e16\u754cempty_world\uff0c\u8fd9\u91cc\u4f1a\u4ecb\u7ecd\u5982\u4f55\u5bfc\u5165\u623f\u5c4b\u6570\u76ee\u7b49\u81ea\u5b9a\u4e49\u7684\u73af\u5883 \uff081\uff09\u542f\u52a8 gazebo \u6253\u5f00\u6784\u5efa\u9762\u677f\uff0c\u7ed8\u5236\u4eff\u771f\u73af\u5883 \uff082\uff09\u4fdd\u5b58\u6784\u5efa\u7684\u73af\u5883 \u70b9\u51fb: \u5de6\u4e0a\u89d2 file ---> Save (\u4fdd\u5b58\u8def\u5f84\u529f\u80fd\u5305\u4e0b\u7684: models) \u7136\u540e file ---> Exit Building Editor \uff083\uff09 \u4fdd\u5b58\u4e3a world \u6587\u4ef6 \u53ef\u4ee5\u7528\u9875\u9762\u4e0a\u65b9gazebo\u81ea\u5e26\u7684\u5de5\u5177\u7bb1\u518d\u6dfb\u52a0\u4e00\u4e9b\u63d2\u4ef6\uff0c\u7136\u540e\u4fdd\u5b58\u4e3a world \u6587\u4ef6(\u4fdd\u5b58\u8def\u5f84\u529f\u80fd\u5305\u4e0b\u7684: worlds)\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u6587\u4ef6\u5939\u547d\u540d\u5fc5\u987b\u662fworlds \uff084\uff09\u542f\u52a8\u81ea\u5b9a\u4e49\u73af\u5883 <launch> <!-- \u5c06 Urdf \u6587\u4ef6\u7684\u5185\u5bb9\u52a0\u8f7d\u5230\u53c2\u6570\u670d\u52a1\u5668 --> <param name=\"robot_description\" command=\"$(find xacro)/xacro $(find demo02_urdf_gazebo)/urdf/xacro/my_base_camera_laser.urdf.xacro\" /> <!-- \u542f\u52a8 gazebo --> <include file=\"$(find gazebo_ros)/launch/empty_world.launch\"> <arg name=\"world_name\" value=\"$(find demo02_urdf_gazebo)/worlds/hello.world\" /> </include> <!-- \u5728 gazebo \u4e2d\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b --> <node pkg=\"gazebo_ros\" type=\"spawn_model\" name=\"model\" args=\"-urdf -model mycar -param robot_description\" /> </launch> \u200b \u901a\u8fc7roslaunch\u542f\u52a8\u76f8\u5173\u7684env.launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u7684\u5173\u952e\u90e8\u5206\u662f\u5728launch\u6587\u4ef6\u4e2d\u7528include\u6807\u7b7e\u96c6\u6210\u542f\u52a8gazebo\u90e8\u5206\uff0c\u7531\u539f\u6765\u7684\u7a7a\u4e16\u754c\uff08empty_world\uff09\u53d8\u6210\u4e86\u81ea\u5b9a\u4e49\u7684world\u6587\u4ef6worlds/hello.world","title":"5\u3001Gazebo\u5bfc\u5165\u81ea\u5b9a\u4e49\u73af\u5883"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#6ros-control","text":"\u200b \u9700\u8981\u7f16\u5199\u4e00\u4e2a\u5355\u72ec\u7684xacro\u6587\u4ef6\uff0c\u4e3a\u673a\u5668\u4eba\u6a21\u578b\u6dfb\u52a0\u4f20\u52a8\u88c5\u7f6e\u4ee5\u53ca\u63a7\u5236\u5668\uff0c\u8fd9\u91cc\u4e3b\u8981\u9700\u8981\u4fee\u6539\u7684\u662fjoint_name\uff0c\u9700\u8981\u548curdf/xacro\u7f16\u5199\u65f6\u7ed9\u9a71\u52a8\u8f6e\u7684\u540d\u5b57\u76f8\u540c\u3002 <robot name=\"my_car_move\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u4f20\u52a8\u5b9e\u73b0:\u7528\u4e8e\u8fde\u63a5\u63a7\u5236\u5668\u4e0e\u5173\u8282 --> <xacro:macro name=\"joint_trans\" params=\"joint_name\"> <!-- Transmission is important to link the joints and the controller --> <transmission name=\"${joint_name}_trans\"> <type>transmission_interface/SimpleTransmission</type> <joint name=\"${joint_name}\"> <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface> </joint> <actuator name=\"${joint_name}_motor\"> <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface> <mechanicalReduction>1</mechanicalReduction> </actuator> </transmission> </xacro:macro> <!-- \u6bcf\u4e00\u4e2a\u9a71\u52a8\u8f6e\u90fd\u9700\u8981\u914d\u7f6e\u4f20\u52a8\u88c5\u7f6e --> <xacro:joint_trans joint_name=\"left_wheel2base_link\" /> <xacro:joint_trans joint_name=\"right_wheel2base_link\" /> <!-- \u63a7\u5236\u5668 --> <gazebo> <plugin name=\"differential_drive_controller\" filename=\"libgazebo_ros_diff_drive.so\"> <rosDebugLevel>Debug</rosDebugLevel> <publishWheelTF>true</publishWheelTF> <robotNamespace>/</robotNamespace> <publishTf>1</publishTf> <publishWheelJointState>true</publishWheelJointState> <alwaysOn>true</alwaysOn> <updateRate>100.0</updateRate> <legacyMode>true</legacyMode> <leftJoint>left_wheel2base_link</leftJoint> <!-- \u5de6\u8f6e --> <rightJoint>right_wheel2base_link</rightJoint> <!-- \u53f3\u8f6e --> <wheelSeparation>${base_link_radius * 2}</wheelSeparation> <!-- \u8f66\u8f6e\u95f4\u8ddd --> <wheelDiameter>${wheel_radius * 2}</wheelDiameter> <!-- \u8f66\u8f6e\u76f4\u5f84 --> <broadcastTF>1</broadcastTF> <wheelTorque>30</wheelTorque> <wheelAcceleration>1.8</wheelAcceleration> <commandTopic>cmd_vel</commandTopic> <!-- \u8fd0\u52a8\u63a7\u5236\u8bdd\u9898 --> <odometryFrame>odom</odometryFrame> <odometryTopic>odom</odometryTopic> <!-- \u91cc\u7a0b\u8ba1\u8bdd\u9898 --> <robotBaseFrame>base_footprint</robotBaseFrame> <!-- \u6839\u5750\u6807\u7cfb --> </plugin> </gazebo> </robot> \u200b \u7528\\ \u6807\u7b7e\uff0c\u5c06\u8be5xacro\u6587\u4ef6\u96c6\u6210\u5230\u6574\u4f53\u7684car.urdf.xacro\u6587\u4ef6\u4e2d\uff0c\u8fd9\u91cc\u8981\u6ce8\u610f\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\u3002 \u200b \u8fd0\u884claunch\u6587\u4ef6\uff0c\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\uff0c\u901a\u8fc7\u547d\u4ee4rostopic list\uff0c\u67e5\u770b\u76ee\u524d\u5df2\u6709\u8bdd\u9898\u540d\u79f0\uff0c\u53ef\u4ee5\u770b\u5230cmd_vel\uff0c\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\u8bdd\u9898\u3002 \u901a\u8fc7\u952e\u76d8\u63a7\u5236\u8282\u70b9\u53ef\u4ee5\u5b9e\u73b0\u952e\u76d8\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8 rosrun teleop_twist_keyboard teleop_twist_keyboard.py","title":"6\u3001\u673a\u5668\u4eba\u8fd0\u52a8\u63a7\u5236ROS-control"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#7rviz","text":"\u5728\u673a\u5668\u4eba\u8fd0\u52a8\u63a7\u5236\u7684xacro\u6587\u4ef6\u4e2d\uff0c\u63a7\u5236\u5668\u90e8\u5206\u5bfc\u5165\u4e86\u91cc\u7a0b\u8ba1\u8bdd\u9898 <odometryTopic>odom</odometryTopic> <!-- \u91cc\u7a0b\u8ba1\u8bdd\u9898 --> \u6211\u4eec\u53ef\u4ee5\u5728rviz\u4e2d\u53ef\u89c6\u5316\u67e5\u770b\u91cc\u7a0b\u8ba1\u7684\u6548\u679c \uff081\uff09\u901a\u8fc7launch\u6587\u4ef6\u6253\u5f00rviz <launch> <!-- \u542f\u52a8 rviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" /> <!-- \u5173\u8282\u4ee5\u53ca\u673a\u5668\u4eba\u72b6\u6001\u53d1\u5e03\u8282\u70b9 --> <node name=\"joint_state_publisher\" pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" /> <node name=\"robot_state_publisher\" pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" /> </launch> \uff082\uff09\u6dfb\u52a0odometry\u7ec4\u4ef6\uff0c\u67e5\u770b\u91cc\u7a0b\u8ba1\u6d88\u606f \uff083\uff09\u6dfb\u52a0/odom\u8bdd\u9898\uff0c\u67e5\u770b\u91cc\u7a0b\u8ba1\u663e\u793a \uff084\uff09\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8bdd\u9898\uff0c\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\uff0c\u5373\u53ef\u5b9e\u65f6\u770b\u5230\u91cc\u7a0b\u8ba1\u7684\u663e\u793a\u60c5\u51b5 rosrun teleop_twist_keyboard teleop_twist_keyboard.py","title":"7\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1arviz\u91cc\u7a0b\u8ba1\u67e5\u770b"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#8","text":"\uff081\uff09\u65b0\u5efalaser.xacro\u6587\u4ef6\u5e76\u96c6\u6210\u5230\u5c0f\u8f66\u6a21\u578b\u6587\u4ef6\u4e2d\uff08include\uff09 \u200b \u7f16\u5199laser.xacro\u6587\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u7167\u7684\u90e8\u5206\u662f\uff1a \u200b \u7b2c\u4e09\u884cgazebo reference\u90e8\u5206\u548c\u5012\u6570\u7b2c\u4e94\u884cframe name\u7684\u540d\u5b57\u201claser\u201d\uff0c\u8be5\u6587\u4ef6\u8981\u4f5c\u7528\u5230\u673a\u5668\u4eba\u6a21\u578b\u7684\u96f7\u8fbe\u8fde\u6746\u90e8\u5206\uff0c\u8981\u627e\u5230\u81ea\u5df1\u96f7\u8fbe\u8fde\u6746\u8bbe\u7f6e\u7684\u540d\u5b57\u5e76\u5bf9\u5e94\u4fee\u6539\u3002\u8be5\u6807\u7b7e\u4e0a\u9762\u7684topicname\u8bdd\u9898\u5c31\u662f\u96f7\u8fbe\u4f20\u611f\u5668\u53d1\u5e03\u6570\u636e\u6240\u7528\u7684\u8bdd\u9898\uff0c\u8fd9\u91cc\u662f/scan\u3002 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u96f7\u8fbe --> <gazebo reference=\"laser\"> <sensor type=\"ray\" name=\"rplidar\">\u96f7\u8fbe\u7c7b\u578b <pose>0 0 0 0 0 0</pose>\u96f7\u8fbe\u4f4d\u59ff <visualize>true</visualize>gazebo\u662f\u5426\u663e\u793a\u96f7\u8fbe\u5c04\u7ebf <update_rate>5.5</update_rate>\u96f7\u8fbe\u5c04\u7ebf\u7684\u66f4\u65b0\u9891\u7387 <ray> <scan> <horizontal> <samples>360</samples>\u91c7\u6837\u4e2a\u6570\uff1a\u96f7\u8fbe\u65cb\u8f6c\u4e00\u5468\u91c7\u6837\u51e0\u4e2a\u70b9 <resolution>1</resolution>\u5206\u8fa8\u7387\uff1a\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6574\u6570n\uff0c\u6bcfn\u4e2a\u5c04\u7ebf\u6d4b\u8ddd\u4e00\u6b21 <min_angle>-3</min_angle>\u8bbe\u7f6e\u96f7\u8fbe\u7684\u91c7\u6837\u8303\u56f4\uff08180\u5ea6\u91c7\u6837\uff1f120\u5ea6\u91c7\u6837\uff1f\u5355\u4f4d\u662f\u5f27\u5ea6\u5236\uff09 <max_angle>3</max_angle> </horizontal> </scan> <range> <min>0.10</min>\u96f7\u8fbe\u6709\u6548\u8303\u56f40.1\u7c73\u523030\u7c73 <max>30.0</max> <resolution>0.01</resolution>\u6d4b\u91cf\u8ddd\u79bb\u7684\u7cbe\u786e\u5ea6\uff0c\u5355\u4f4d\u7c73 </range> <noise>\u9ad8\u65af\u566a\u97f3\uff1a\u7528\u4e8e\u4eff\u771f\uff0c\u6a21\u62df\u5b9e\u9645\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u8bef\u5dee <type>gaussian</type> <mean>0.0</mean> <stddev>0.01</stddev> </noise> </ray> <plugin name=\"gazebo_rplidar\" filename=\"libgazebo_ros_laser.so\"> <topicName>/scan</topicName>\u96f7\u8fbe\u53d1\u5e03\u6d88\u606f\u7684\u8bdd\u9898\u540d <frameName>laser</frameName>\u96f7\u8fbe\u5750\u6807\u7cfb\u540d </plugin> </sensor> </gazebo> </robot> \uff082\uff09roslaunch\u542f\u52a8env.launch\u548crviz \u89c2\u5bdfgazebo\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u770b\u5230\u4eff\u771f\u4e2d\u4f1a\u663e\u793a\u96f7\u8fbe\u4fe1\u53f7\u7684\u6ce2\u675f \uff083\uff09\u5728RVIZ\u4e2d\u8fdb\u884c\u5bf9\u5e94\u8bbe\u7f6e\uff0c\u663e\u793a\u96f7\u8fbe\u4fe1\u53f7\u7684\u7ec4\u4ef6 \u6539\u5750\u6807\u7cfbFixed Frames\uff1aodom\uff0c\u6dfb\u52a0\u7ec4\u4ef6laserscan \u200b topic\u9009\u62e9/scan\uff0c\u53ef\u4ee5\u770b\u5230rviz\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e9b\u7ea2\u8272\u7684\u70b9\u7ec4\u6210\u7684\u8fb9\u754c\uff0c\u8fd9\u5c31\u662f\u96f7\u8fbe\u4fe1\u606f\u5f97\u5230\u7684\u4fe1\u53f7\uff0c\u53ef\u4ee5\u770b\u5230\u5468\u56f4\u73af\u5883\u7684\u969c\u788d\u7269\u60c5\u51b5","title":"8\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1a\u96f7\u8fbe\u4fe1\u606f\u4eff\u771f\u53ca\u663e\u793a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#9","text":"\uff081\uff09\u65b0\u5efacamera.xacro\u6587\u4ef6\u5e76\u96c6\u6210\u5230\u673a\u5668\u4eba\u6a21\u578b\u7684xacro\u6587\u4ef6\u4e2d\uff08include\uff09 \u7f16\u5199camera.xacro\u6587\u4ef6,\u4e3b\u8981\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\u6709\uff08\u7c7b\u4f3c\u96f7\u8fbe\u4eff\u771f\uff09\uff1a gazebo reference\uff1a\u5c06\u8be5\u6587\u4ef6\u4f5c\u7528\u5230\u5c0f\u8f66\u6587\u4ef6\u7684\u54ea\u4e2a\u8fde\u6746\u4e0a\uff0c\u8981\u4e0e\u6444\u50cf\u5934\u7684link name\u4fdd\u6301\u4e00\u81f4 frame name\uff1a\u6444\u50cf\u5934\u5750\u6807\u7cfb\u540d\u79f0\uff0c\u540c\u4e0a\uff0c\u4e0e\u6444\u50cf\u5934link name\u4e00\u81f4 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <!-- \u88ab\u5f15\u7528\u7684link --> <gazebo reference=\"camera\"> <!-- \u7c7b\u578b\u8bbe\u7f6e\u4e3a camara --> <sensor type=\"camera\" name=\"camera_node\"> <update_rate>30.0</update_rate> <!-- \u66f4\u65b0\u9891\u7387 --> <!-- \u6444\u50cf\u5934\u57fa\u672c\u4fe1\u606f\u8bbe\u7f6e --> <camera name=\"head\"> <horizontal_fov>1.3962634</horizontal_fov> <image> <width>1280</width> <height>720</height> <format>R8G8B8</format> </image> <clip> <near>0.02</near> <far>300</far> </clip> <noise> <type>gaussian</type> <mean>0.0</mean> <stddev>0.007</stddev> </noise> </camera> <!-- \u6838\u5fc3\u63d2\u4ef6 --> <plugin name=\"gazebo_camera\" filename=\"libgazebo_ros_camera.so\"> <alwaysOn>true</alwaysOn> <updateRate>0.0</updateRate> <cameraName>/camera</cameraName> <imageTopicName>image_raw</imageTopicName> <cameraInfoTopicName>camera_info</cameraInfoTopicName> <frameName>camera</frameName> <hackBaseline>0.07</hackBaseline> <distortionK1>0.0</distortionK1> <distortionK2>0.0</distortionK2> <distortionK3>0.0</distortionK3> <distortionT1>0.0</distortionT1> <distortionT2>0.0</distortionT2> </plugin> </sensor> </gazebo> </robot> \uff082\uff09\u901a\u8fc7roslaunch\u547d\u4ee4\u6253\u5f00gazebo\u73af\u5883\u548crivz gazebo\u548c\u96f7\u8fbe\u4eff\u771f\u7ed3\u679c\u6ca1\u6709\u533a\u522b\uff0c\u73b0\u5728rviz\u4e2d\u6dfb\u52a0\u63d2\u4ef6\u67e5\u770b\u6444\u50cf\u5934\u7684\u60c5\u51b5 \u5c0f\u8f66\u8fd0\u52a8\u65f6\uff0c\u4e5f\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u6444\u50cf\u5934\u7684\u753b\u9762\u4f1a\u968f\u4e4b\u8fd0\u52a8 \u53ef\u4ee5\u901a\u8fc7\u8bdd\u9898\u53d1\u5e03\u547d\u4ee4\u67e5\u770b\u8fd0\u52a8\u662f\u7684\u6444\u50cf\u5934\u753b\u9762\u53d8\u5316\uff0ccmd_vel\u8bdd\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5tab\u952e\u81ea\u52a8\u8865\u9f50 rostopic pub -r 10 /cmd_vel geometry_msgs/Twist\"linear: x:1.0 y:2.0 z:0 angular: x:0 y:0 z:0.5\"","title":"9\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1a\u6444\u50cf\u5934\u4fe1\u606f\u4eff\u771f\u53ca\u663e\u793a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#10kinect","text":"kinect\uff1a\u611f\u77e5\u969c\u788d\u7269\u56fe\u50cf\u548c\u8ddd\u79bb\u4fe1\u606f \uff081\uff09\u65b0\u5efa\u6587\u4ef6kinect.xacro\u5e76\u901a\u8fc7include\u6807\u7b7e\u96c6\u6210\u5230car\u5c0f\u8f66\u6a21\u578b\u6587\u4ef6\u4e2d <xacro:include filename=\"my_sensors_kinect.urdf.xacro\" /> \uff082\uff09\u7f16\u5199xacro\u6587\u4ef6 \u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\u4e3b\u8981\u8fd8\u662fgazebo reference\u548cframe name\uff0c\u4fee\u6539\u4e3a\u4f5c\u7528\u5230\u54ea\u4e2a\u8fde\u6746\u7684\u540d\u5b57 <robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"> <gazebo reference=\"kinect link\u540d\u79f0\"> <sensor type=\"depth\" name=\"camera\"> <always_on>true</always_on> <update_rate>20.0</update_rate> <camera> <horizontal_fov>${60.0*PI/180.0}</horizontal_fov> <image> <format>R8G8B8</format> <width>640</width> <height>480</height> </image> <clip> <near>0.05</near> <far>8.0</far> </clip> </camera> <plugin name=\"kinect_camera_controller\" filename=\"libgazebo_ros_openni_kinect.so\"> <cameraName>camera</cameraName>\u8bdd\u9898\u547d\u540d\u7a7a\u95f4 <alwaysOn>true</alwaysOn> <updateRate>10</updateRate> <imageTopicName>rgb/image_raw</imageTopicName>\u56fe\u50cf\u4fe1\u606f\u91c7\u96c6\u8bdd\u9898 <depthImageTopicName>depth/image_raw</depthImageTopicName>\u6df1\u5ea6\u4fe1\u606f\u91c7\u96c6\u8bdd\u9898 <pointCloudTopicName>depth/points</pointCloudTopicName> <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName> <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName> <frameName>kinect link\u540d\u79f0</frameName> <baseline>0.1</baseline> <distortion_k1>0.0</distortion_k1> <distortion_k2>0.0</distortion_k2> <distortion_k3>0.0</distortion_k3> <distortion_t1>0.0</distortion_t1> <distortion_t2>0.0</distortion_t2> <pointCloudCutoff>0.4</pointCloudCutoff> </plugin> </sensor> </gazebo> </robot> \uff083\uff09roslaunch\u542f\u52a8env.launch\uff08gazebo\u73af\u5883\uff09\u548csensor.launch\uff08rviz\u73af\u5883\uff09\u5373\u53ef\u770b\u5230\u6548\u679c \u200b gazebo\u4e2d\u7684\u73af\u5883\u4f1a\u663e\u793a\u51fa\u5df2\u7ecf\u914d\u7f6e\u8fc7\u7684\u96f7\u8fbe\u4fe1\u53f7\uff0c\u6df1\u5ea6\u76f8\u673a\u4fe1\u606f\u4e3b\u8981\u901a\u8fc7rviz\u67e5\u770b\uff0c\u548c\u6dfb\u52a0\u666e\u901a\u7684camera\u65b9\u6cd5\u4e00\u6837\uff0c\u5728rviz\u4e2d\u6dfb\u52a0camera\u7ec4\u4ef6 \u200b \u4e0e\u6dfb\u52a0\u67e5\u770b\u666e\u901a\u76f8\u673a\u4e0d\u540c\u7684\u662f\uff0c\u6b64\u65f6\u6211\u4eec\u7684\u8bdd\u9898\u91cc\u65e2\u6709\u666e\u901a\u76f8\u673a\u7684\u8bdd\u9898\uff0c\u4e5f\u6709\u6df1\u5ea6\u76f8\u673a\u7684\u8bdd\u9898\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u9009\u62e9depth\u76f8\u5173\u8bdd\u9898\u5373\u53ef\u67e5\u770b\u6df1\u5ea6\u76f8\u673a\u7684\u76f8\u5173\u4fe1\u606f\u3002 \uff084\uff09kinect\u70b9\u4e91\u4fe1\u606f\u663e\u793a\uff0c\u5728rviz\u4e2d\u6dfb\u52a0\u7ec4\u4ef6pointcloud2\u5e76\u8bbe\u7f6etopic\u8bdd\u9898camera/depth/points \u200b \u8fd9\u65f6\u4f1a\u53d1\u73b0\u5728rviz\u4e2d\u70b9\u4e91\u56fe\u50cf\u4fe1\u606f\u663e\u793a\u65f6\u9519\u4f4d\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728kinect\u4e2d\u56fe\u50cf\u6570\u636e\u4e0e\u70b9\u4e91\u6570\u636e\u4f7f\u7528\u4e86\u4e24\u5957\u5750\u6807\u7cfb\u7edf\uff0c\u4e14\u4e24\u5957\u5750\u6807\u7cfb\u7edf\u4f4d\u59ff\u5e76\u4e0d\u4e00\u81f4\u3002 \u89e3\u51b3\u65b9\u6848\uff1a \u672c\u6765\u70b9\u4e91\u4f7f\u7528\u7684\u662f\u8fde\u6746\u7684\u5750\u6807\u7cfb\uff0c\u9700\u8981\u4fee\u6539\u4e00\u4e0b\uff0c\u8fd9\u91cc\u547d\u540d\u4e3asupport_depth <frameName>support_depth</frameName> \u200b \u7531\u4e8e\u8be5\u5750\u6807\u7cfb\u5728\u673a\u5668\u4eba\u6a21\u578b\u914d\u7f6e\u6587\u4ef6\u4e2d\u5e76\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u9700\u8981\u5728\u542f\u52a8rviz\u7684launch\u6587\u4ef6\u4e2d\u624b\u52a8\u914d\u7f6e\u9759\u6001\u5750\u6807\u53d8\u6362\u4fe1\u606f. \u6ce8\u610f\uff1a \u8fd9\u91cc\u7684args\u53c2\u6570\u5206\u522b\u662fxyz\u4f4d\u7f6e\u504f\u79fb\u91cf\uff0czyx\u89d2\u5ea6\u504f\u79fb\u91cf\u548c\u7236\u7ea7\u5750\u6807\u7cfb\u5b50\u7ea7\u5750\u6807\u7cfb\u3002 <!--\u6dfb\u52a0support\u5230\u8fde\u6746\u7684\u5750\u6807\u53d8\u6362--> <node pkg=\"tf2_ros\" type=\"static_transform_publisher\" name=\"static_transform_publisher\" args=\"0 0 0 -1.57 0 -1.57 /support /support_depth\"","title":"10\u3001\u7efc\u5408\u8fd0\u52a8\u63a7\u5236\uff1akinect\u6df1\u5ea6\u76f8\u673a\u4eff\u771f"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#_5","text":"","title":"\u5341\u3001\u673a\u5668\u4eba\u5bfc\u822a\u4eff\u771f"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#1_7","text":"\uff081\uff09\u901a\u8fc7\u91cc\u7a0b\u8ba1\u5b9a\u4f4d:\u65f6\u65f6\u6536\u96c6\u673a\u5668\u4eba\u7684\u901f\u5ea6\u4fe1\u606f\u8ba1\u7b97\u5e76\u53d1\u5e03\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e0e\u7236\u7ea7\u53c2\u8003\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u3002 \u4f18\u70b9:\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u4fe1\u606f\u662f\u8fde\u7eed\u7684\uff0c\u6ca1\u6709\u79bb\u6563\u7684\u8df3\u8dc3\u3002 \u7f3a\u70b9:\u91cc\u7a0b\u8ba1\u5b58\u5728\u7d2f\u8ba1\u8bef\u5dee\uff0c\u4e0d\u5229\u4e8e\u957f\u8ddd\u79bb\u6216\u957f\u671f\u5b9a\u4f4d\u3002 \uff082\uff09\u901a\u8fc7\u4f20\u611f\u5668\u5b9a\u4f4d:\u901a\u8fc7\u4f20\u611f\u5668\u6536\u96c6\u5916\u754c\u73af\u5883\u4fe1\u606f\u901a\u8fc7\u5339\u914d\u8ba1\u7b97\u5e76\u53d1\u5e03\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e0e\u7236\u7ea7\u53c2\u8003\u7cfb\u7684\u76f8\u5bf9\u5173\u7cfb\u3002 \u4f18\u70b9:\u6bd4\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u66f4\u7cbe\u51c6\uff1b \u7f3a\u70b9:\u4f20\u611f\u5668\u5b9a\u4f4d\u4f1a\u51fa\u73b0\u8df3\u53d8\u7684\u60c5\u51b5\uff0c\u4e14\u4f20\u611f\u5668\u5b9a\u4f4d\u5728\u6807\u5fd7\u7269\u8f83\u5c11\u7684\u73af\u5883\u4e0b\uff0c\u5176\u5b9a\u4f4d\u7cbe\u5ea6\u4f1a\u5927\u6253\u6298\u6263\u3002 \u4e24\u79cd\u5b9a\u4f4d\u65b9\u5f0f\u4f18\u7f3a\u70b9\u4e92\u8865\uff0c\u5e94\u7528\u65f6\u4e00\u822c\u4e8c\u8005\u7ed3\u5408\u4f7f\u7528\u3002 \uff083\uff09\u7ed3\u5408\u4f7f\u7528\u65f6\u7684\u5750\u6807\u53d8\u6362\u5173\u7cfb \u200b \u4e24\u79cd\u5b9a\u4f4d\u5b9e\u73b0\u4e2d\uff0c\u673a\u5668\u4eba\u5750\u6807\u7cfb\u4e00\u822c\u4f7f\u7528\u673a\u5668\u4eba\u6a21\u578b\u4e2d\u7684\u6839\u5750\u6807\u7cfb(base_link \u6216 base_footprint)\uff0c\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u65f6\uff0c\u7236\u7ea7\u5750\u6807\u7cfb\u4e00\u822c\u79f0\u4e4b\u4e3a odom\uff0c\u5982\u679c\u901a\u8fc7\u4f20\u611f\u5668\u5b9a\u4f4d\uff0c\u7236\u7ea7\u53c2\u8003\u7cfb\u4e00\u822c\u79f0\u4e4b\u4e3a map\u3002\u5f53\u4e8c\u8005\u7ed3\u5408\u4f7f\u7528\u65f6\uff0cmap \u548c odom \u90fd\u662f\u673a\u5668\u4eba\u6a21\u578b\u6839\u5750\u6807\u7cfb\u7684\u7236\u7ea7\uff0c\u8fd9\u662f\u4e0d\u7b26\u5408\u5750\u6807\u53d8\u6362\u4e2d\"\u5355\u7ee7\u627f\"\u7684\u539f\u5219\u7684\uff0c\u6240\u4ee5\uff0c\u4e00\u822c\u4f1a\u5c06\u8f6c\u6362\u5173\u7cfb\u8bbe\u7f6e\u4e3a: map -> doom -> base_link \u6216 base_footprint\u3002","title":"1\u3001\u5bfc\u822a\u5b9a\u4f4d\u65b9\u5f0f\uff1a"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#2slam","text":"\u5148\u5b89\u88c5\u76f8\u5173\u7684ROS\u529f\u80fd\u5305: \u5b89\u88c5 gmapping \u5305(\u7528\u4e8e\u6784\u5efa\u5730\u56fe):sudo apt install ros- -gmapping \u5b89\u88c5\u5730\u56fe\u670d\u52a1\u5305(\u7528\u4e8e\u4fdd\u5b58\u4e0e\u8bfb\u53d6\u5730\u56fe):sudo apt install ros- -map-server \u5b89\u88c5 navigation \u5305(\u7528\u4e8e\u5b9a\u4f4d\u4ee5\u53ca\u8def\u5f84\u89c4\u5212):sudo apt install ros- -navigation \u65b0\u5efa\u529f\u80fd\u5305\uff0c\u5e76\u5bfc\u5165\u4f9d\u8d56: gmapping map_server amcl move_base\uff0c\u5176\u4e2dgampping\u7528\u4e8e\u6784\u5efa\u5730\u56fe\uff0cmap_server\u7528\u4e8e\u4fdd\u5b58\u4e0e\u8bfb\u53d6\u5730\u56fe\uff0camcl\u7528\u4e8e\u5b9a\u4f4d\uff0cmove_base\u7528\u4e8e\u8def\u5f84\u89c4\u5212 \uff081\uff09\u7f16\u5199gmapping\u76f8\u5173\u7684launch\u6587\u4ef6 \u590d\u5236\u5e76\u4fee\u6539\u5982\u4e0b: <launch> <param name=\"use_sim_time\" value=\"true\"/>\u662f\u5426\u4f7f\u7528\u4eff\u771f\u65f6\u95f4\uff08\u4eff\u771f\u65f6\u8981\u8bbe\u7f6e\u4e3aTrue\uff09 <node pkg=\"gmapping\" type=\"slam_gmapping\" name=\"slam_gmapping\" output=\"screen\"> <remap from=\"scan\" to=\"scan\"/>\u8bbe\u7f6e\u96f7\u8fbe\u8bdd\u9898\uff0c\u524d\u9762\u4eff\u771f\u96f7\u8fbe\u8bbe\u7f6e\u7684\u8bdd\u9898\u5c31\u662fscan <param name=\"base_frame\" value=\"base_footprint\"/><!--\u5e95\u76d8\u5750\u6807\u7cfb--> <param name=\"odom_frame\" value=\"odom\"/> <!--\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb--> <param name=\"map_update_interval\" value=\"5.0\"/>\u5730\u56fe\u66f4\u65b0\u9891\u7387\u95f4\u9694 <param name=\"maxUrange\" value=\"16.0\"/>\u96f7\u8fbe\u6d4b\u8bd5\u8303\u56f4\u6700\u592716m <param name=\"sigma\" value=\"0.05\"/> <param name=\"kernelSize\" value=\"1\"/> <param name=\"lstep\" value=\"0.05\"/> <param name=\"astep\" value=\"0.05\"/> <param name=\"iterations\" value=\"5\"/> <param name=\"lsigma\" value=\"0.075\"/> <param name=\"ogain\" value=\"3.0\"/> <param name=\"lskip\" value=\"0\"/> <param name=\"srr\" value=\"0.1\"/> <param name=\"srt\" value=\"0.2\"/> <param name=\"str\" value=\"0.1\"/> <param name=\"stt\" value=\"0.2\"/> <param name=\"linearUpdate\" value=\"1.0\"/> <param name=\"angularUpdate\" value=\"0.5\"/> <param name=\"temporalUpdate\" value=\"3.0\"/> <param name=\"resampleThreshold\" value=\"0.5\"/> <param name=\"particles\" value=\"30\"/> <param name=\"xmin\" value=\"-50.0\"/> <param name=\"ymin\" value=\"-50.0\"/> <param name=\"xmax\" value=\"50.0\"/> <param name=\"ymax\" value=\"50.0\"/> <param name=\"delta\" value=\"0.05\"/> <param name=\"llsamplerange\" value=\"0.01\"/> <param name=\"llsamplestep\" value=\"0.01\"/> <param name=\"lasamplerange\" value=\"0.005\"/> <param name=\"lasamplestep\" value=\"0.005\"/> </node> <node pkg=\"joint_state_publisher\" name=\"joint_state_publisher\" type=\"joint_state_publisher\" /> <node pkg=\"robot_state_publisher\" name=\"robot_state_publisher\" type=\"robot_state_publisher\" /> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" /> <!-- \u53ef\u4ee5\u4fdd\u5b58 rviz \u914d\u7f6e\u5e76\u540e\u671f\u76f4\u63a5\u4f7f\u7528--> <!-- <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find my_nav_sum)/rviz/gmapping.rviz\"/> --> </launch> \uff082\uff09\u542f\u52a8Gazebo\u4eff\u771f\u73af\u5883\u548c\u7f16\u5199\u597d\u7684slam.launch\u6587\u4ef6 \uff083\uff09\u5728RVIZ\u4e2d\u6dfb\u52a0\u7ec4\u4ef6 \u6dfb\u52a0\u673a\u5668\u4eba\u6a21\u578bRobotModel \u6dfb\u52a0Laserscan\u5e76\u8bbe\u7f6eTopic\u8bdd\u9898scan \u6dfb\u52a0\u5750\u6807\u7cfb\u7ec4\u4ef6TF\uff0cFram\u4e0b\u5373\u53ef\u627e\u5230map\uff0codom \u6dfb\u52a0map\u7ec4\u4ef6\u7528\u4e8e\u5efa\u56fe\uff0c\u8bbe\u7f6etopic\uff0c\u53d1\u5e03\u8bdd\u9898\u6805\u683c\u5730\u56fe\u6570\u636e\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3amap \u5373\u53ef\u770b\u5230\u5982\u4e0b\u6548\u679c\uff1a \uff084\uff09\u5728rviz\u4e2d\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u53ef\u4ee5\u5c06\u76ee\u524d\u914d\u7f6e\u4fdd\u5b58\uff1a\u5de6\u4e0a\u89d2save config as\uff0c\u4fdd\u5b58\u5230\u8be5\u529f\u80fd\u5305\u7684config\u6587\u4ef6\u5939\u4e0b\uff0c\u5e76\u5728rivz\u542f\u52a8\u4e2d\u6dfb\u52a0\u53c2\u6570\uff0c\u4ee5\u540e\u542f\u52a8\u5c31\u53ef\u4ee5\u81ea\u52a8\u914d\u7f6e\u3002 <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $find(\u529f\u80fd\u5305\u540d) \u529f\u80fd\u5305\u5185\u7684\u76f8\u5bf9\u8def\u5f84\"/> \uff085\uff09\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8282\u70b9 rosrun teleop_twist_keyboard teleop_twist_keyboard.py \u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\uff0c\u7ed5\u7740\u5730\u56fe\u8d70\u4e00\u5708\u5efa\u56fe\u3002 \u5efa\u56fe\u7ed3\u679c\u5982\u56fe\u6240\u793a\uff0c\u767d\u8272\u90e8\u5206\u662f\u65e0\u969c\u788d\u7269\u53ef\u4ee5\u8d70\u7684\u5730\u65b9\uff0c\u9ed1\u8272\u5708\u51fa\u90e8\u4f4d\u4e3a\u969c\u788d\u7269\u4fe1\u606f \uff086\uff09\u4fdd\u5b58\u5730\u56fe\uff08map_server\u5305\u91cc\u7684map_save\uff09 \u5982\u679c\u76f4\u63a5\u5173\u95edrviz\u9000\u51fa\uff0c\u90a3\u4e48\u5efa\u597d\u7684\u5730\u56fe\u5c06\u4f1a\u6d88\u5931\uff0c\u6240\u4ee5\u8981\u7f16\u5199launch\u6587\u4ef6\u8fdb\u884c\u4fdd\u5b58\u64cd\u4f5c <launch> <arg name=\"filename\" value=\"$(find mycar_nav)/map/nav\" /> <node name=\"map_save\" pkg=\"map_server\" type=\"map_saver\" args=\"-f $(arg filename)\" /> </launch> \u53ef\u4ee5\u770b\u5230\u5728\u6307\u5b9a\u8def\u5f84\u4e0b\u4ea7\u751f\u4e86\u4e24\u4e2a\u6587\u4ef6map_save.pgm\u548cmap_save.yaml \uff087\uff09\u8bfb\u53d6\u5730\u56fe\u4fe1\u606f\uff08map_server\u5305\u91cc\u7684map_server\uff09 \u65b0\u5efalaunch\u6587\u4ef6\uff0c\u4f7f\u7528map_server\u8c03\u7528\u4e0a\u4e00\u6b65\u4fdd\u5b58\u7684map_save.yaml\u6587\u4ef6 \u4ee3\u7801\u793a\u4f8b\u5982\u4e0b <launch> <node pkg=\"map_server\" type=\"map_server\" name=\"map_server\" args=\"$(find \u529f\u80fd\u5305\u540d)/\u529f\u80fd\u5305\u5185\u5230yaml\u6587\u4ef6\u7684\u8def\u5f84\"/> </launch> \u200b \u8fd9\u6837\uff0c\u6211\u4eec\u4e4b\u524d\u53d1\u5e03\u7684\u4fe1\u606f\u5c31\u4f1a\u4ee5\u8bdd\u9898\u7684\u5f62\u5f0f\u53d1\u5e03\u4e86\uff0c\u8981\u770b\u5230\u5730\u56fe\u7684\u53ef\u89c6\u5316\u6548\u679c\u6211\u4eec\u9700\u8981\u501f\u52a9rviz\uff0c\u53ef\u4ee5\u5728\u7ec8\u7aef\u6253\u5f00rviz\u5e76\u52a0\u5165map\u63d2\u4ef6\uff0c\u9009\u62e9topic\u4e3amap\uff0c\u5373\u53ef\u770b\u5230\u6548\u679c\u3002","title":"2\u3001\u5bfc\u822a\u5b9e\u73b0\uff1aSLAM\u5efa\u56fe"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#3amcl","text":"\uff081\uff09\u9996\u5148\u7f16\u5199\u542f\u52a8amcl\u7684launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u5efa\u8bae\u590d\u5236\u7c98\u8d34\u6a21\u677f\uff0c\u518d\u4fee\u6539\u76f8\u5173\u7684\u53c2\u6570\u5373\u53ef\uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a ~\u4e3b\u76ee\u5f55\u4e0b\u8fdb\u5165amcl\u6587\u4ef6:roscd amcl ls\u67e5\u770b\u6587\u4ef6\u7ec4\u6210\uff0cls examples\u8fdb\u5165\u67e5\u770bexamples\u793a\u4f8b\u6587\u4ef6 example\u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u793a\u4f8b\u6587\u4ef6\uff0camcl_diff\u662f\u5dee\u901f\u673a\u5668\u4eba\uff0camcl_omni\u662f\u5168\u5411\u673a\u5668\u4eba \u901a\u8fc7\u6587\u672c\u7f16\u8f91\u5668gedit\u8fdb\u5165\u5bf9\u5e94\u7684launch\u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u9009\u62e9amcl_diff\u6587\u4ef6 gedit example/amcl_diff.launch \u590d\u5236\u5230\u6211\u4eec\u81ea\u5df1\u65b0\u5efa\u7684launch\u6587\u4ef6\u4e2d\u5373\u53ef \uff082\uff09\u4fee\u6539launch\u6587\u4ef6 \u793a\u4f8b\u4e2d\u5df2\u7ecf\u8bbe\u7f6e\u4e86odom\u5750\u6807\u7cfb\uff0c\u6b64\u5916\u8fd8\u9700\u6dfb\u52a0\u673a\u5668\u4eba\u5750\u6807\u7cfb\u548c\u5730\u56fe\u5750\u6807\u7cfb\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb\u4e3abase_footprint\uff0c\u5730\u56fe\u5750\u6807\u7cfb\u53ef\u4ee5\u9009\u62e9\u6682\u4e0d\u8bbe\u7f6e\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684globalmap <launch> <node pkg=\"amcl\" type=\"amcl\" name=\"amcl\" output=\"screen\"> <!-- Publish scans from best pose at a max of 10 Hz --> <param name=\"odom_model_type\" value=\"diff\"/><!-- \u91cc\u7a0b\u8ba1\u6a21\u5f0f\u4e3a\u5dee\u5206 --> <param name=\"odom_alpha5\" value=\"0.1\"/> <param name=\"transform_tolerance\" value=\"0.2\" /> <param name=\"gui_publish_rate\" value=\"10.0\"/> <param name=\"laser_max_beams\" value=\"30\"/> <param name=\"min_particles\" value=\"500\"/> <param name=\"max_particles\" value=\"5000\"/> <param name=\"kld_err\" value=\"0.05\"/> <param name=\"kld_z\" value=\"0.99\"/> <param name=\"odom_alpha1\" value=\"0.2\"/> <param name=\"odom_alpha2\" value=\"0.2\"/> <!-- translation std dev, m --> <param name=\"odom_alpha3\" value=\"0.8\"/> <param name=\"odom_alpha4\" value=\"0.2\"/> <param name=\"laser_z_hit\" value=\"0.5\"/> <param name=\"laser_z_short\" value=\"0.05\"/> <param name=\"laser_z_max\" value=\"0.05\"/> <param name=\"laser_z_rand\" value=\"0.5\"/> <param name=\"laser_sigma_hit\" value=\"0.2\"/> <param name=\"laser_lambda_short\" value=\"0.1\"/> <param name=\"laser_lambda_short\" value=\"0.1\"/> <param name=\"laser_model_type\" value=\"likelihood_field\"/> <!-- <param name=\"laser_model_type\" value=\"beam\"/> --> <param name=\"laser_likelihood_max_dist\" value=\"2.0\"/> <param name=\"update_min_d\" value=\"0.2\"/> <param name=\"update_min_a\" value=\"0.5\"/> <param name=\"odom_frame_id\" value=\"odom\"/><!-- \u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb --> <param name=\"base_frame_id\" value=\"base_footprint\"/><!-- \u6dfb\u52a0\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb --> <param name=\"global_frame_id\" value=\"map\"/><!-- \u6dfb\u52a0\u5730\u56fe\u5750\u6807\u7cfb --> <param name=\"resample_interval\" value=\"1\"/> <param name=\"transform_tolerance\" value=\"0.1\"/> <param name=\"recovery_alpha_slow\" value=\"0.0\"/> <param name=\"recovery_alpha_fast\" value=\"0.0\"/> </node> </launch> \uff083\uff09\u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6 \u5305\u62ec\u542f\u52a8rviz\uff0c\u542f\u52a8\u5730\u56fe\u670d\u52a1\uff0c\u542f\u52a8amcl\u5b9a\u4f4d \uff084\uff09\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\u3001\u542f\u52a8amcl.launch\u6587\u4ef6\u3001\u542f\u52a8\u952e\u76d8\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\u8282\u70b9\uff08teleop_twist_keyboard\uff09\uff0c\u8fd9\u6837\uff0cgazebo\u73af\u5883\u3001rviz\u73af\u5883\u90fd\u6b63\u5e38\u6253\u5f00\u5e76\u53ef\u4ee5\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8\u3002 \uff085\uff09\u63a5\u4e0b\u6765\u5728RVIZ\u4e2d\u6dfb\u52a0\u7ec4\u4ef6 RobotModel\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b map\u7ec4\u4ef6\u663e\u793a\u5730\u56fe posearray\u663e\u793a\u5b9a\u4f4d\u7ed3\u679c \uff086\uff09\u89c2\u5bdf\u7ed3\u679c \u542f\u7528\u952e\u76d8\u63a7\u5236\uff0c\u5728rviz\u4e2d\u5373\u53ef\u770b\u5230\u4f4d\u7f6e\u52a8\u6001\u53d8\u5316\u4f30\u8ba1","title":"3\u3001\u5bfc\u822a\u5b9e\u73b0\uff1aamcl\u5b9a\u4f4d"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#4_1","text":"\u200b move_base \u529f\u80fd\u5305\u63d0\u4f9b\u4e86\u57fa\u4e8e\u52a8\u4f5c(action)\u7684\u8def\u5f84\u89c4\u5212\u5b9e\u73b0\uff0cmove_base \u53ef\u4ee5\u6839\u636e\u7ed9\u5b9a\u7684\u76ee\u6807\u70b9\uff0c\u63a7\u5236\u673a\u5668\u4eba\u5e95\u76d8\u8fd0\u52a8\u81f3\u76ee\u6807\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5728\u8fd0\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u8fde\u7eed\u53cd\u9988\u673a\u5668\u4eba\u81ea\u8eab\u7684\u59ff\u6001\u4e0e\u76ee\u6807\u70b9\u7684\u72b6\u6001\u4fe1\u606f\uff0cmove_base\u4e3b\u8981\u7531\u5168\u5c40\u8def\u5f84\u89c4\u5212\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u7ec4\u6210\u3002 \u200b move_base\u5df2\u7ecf\u88ab\u96c6\u6210\u5230\u4e86navigation\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a sudo apt install ros-<ROS\u7248\u672c>-navigation \uff081\uff09\u6784\u5efa\u9002\u7528\u4e8e\u673a\u5668\u4eba\u5bfc\u822a\u7684\u4ee3\u4ef7\u5730\u56fe \u200b \u7531\u4e8e\u5bfc\u822a\u8fc7\u7a0b\u4e2d\uff0c\u969c\u788d\u7269\u4fe1\u606f\u662f\u53ef\u53d8\u7684\uff0c\u5bfc\u822a\u65f6\u673a\u5668\u4eba\u9700\u8981\u5b9e\u65f6\u83b7\u53d6\u5f53\u524d\u7684\u969c\u788d\u7269\u4fe1\u606f\uff0c\u4e14\u673a\u5668\u4eba\u5728\u9760\u8fd1\u969c\u788d\u7269\u8fb9\u7f18\u65f6\uff0c\u53ef\u80fd\u4f1a\u7531\u4e8e\u60ef\u6027\u3001\u673a\u5668\u4eba\u4f53\u7684\u4e0d\u89c4\u5219\u5916\u5f62\uff0c\u5728\u8f6c\u5f2f\u7b49\u8fc7\u7a0b\u4e2d\u53d1\u751f\u78b0\u649e\uff0cSLAM\u6784\u5efa\u7684\u9759\u6001\u5730\u56fe\u5728\u5bfc\u822a\u4e2d\u662f\u4e0d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7684\uff0c\u9700\u8981\u6784\u5efa\u5b9e\u65f6\u83b7\u53d6\u6570\u636e\u548c\u969c\u788d\u7269\u81a8\u80c0\u540e\u7684\u4ee3\u4ef7\u5730\u56fe\u3002 \u4ee3\u4ef7\u5730\u56fe\uff1a \u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\uff08\u5168\u5c40\u8def\u5f84\u89c4\u5212\uff09 \u672c\u5730\u4ee3\u4ef7\u5730\u56fe\uff08\u672c\u5730\u8def\u5f84\u89c4\u5212\uff09 \uff082\uff09\u4f7f\u7528move_base\u529f\u80fd\u5305\u7f16\u5199\u8def\u5f84\u89c4\u5212\u76f8\u5173\u5f97launch\u6587\u4ef6 \u590d\u5236\u8c03\u7528\u6a21\u677f\uff0c\u5c06\u529f\u80fd\u5305\u4fee\u6539\u4e3a\u81ea\u5df1\u529f\u80fd\u5305\u5f97\u540d\u5b57 <launch> <node pkg=\"move_base\" type=\"move_base\" respawn=\"false\" name=\"move_base\" output=\"screen\" clear_params=\"true\"> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/costmap_common_params.yaml\" command=\"load\" ns=\"global_costmap\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/costmap_common_params.yaml\" command=\"load\" ns=\"local_costmap\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/local_costmap_params.yaml\" command=\"load\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/global_costmap_params.yaml\" command=\"load\" /> <rosparam file=\"$(find \u529f\u80fd\u5305)/param/base_local_planner_params.yaml\" command=\"load\" /> </node> </launch> \uff083\uff09\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 \u5728\u529f\u80fd\u5305\u91cc\u65b0\u5efa\u6587\u4ef6\u5939\u547d\u540d\u4e3aparam\uff0c\u5c06\u4e0a\u6587\u4e2d\u5f97launch\u6587\u4ef6\u91cc\u6d89\u53ca\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u65b0\u5efa\u5230\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e2d \u7c98\u8d34\u6807\u51c6\u4f8b\u7a0b\u4e2d\u7684\u4ee3\u7801\uff0c\u628a\u5404\u79cd\u5750\u6807\u7cfb\u540d\u79f0\u548c\u673a\u5668\u4eba\u51e0\u4f55\u53c2\u6570\u4fee\u6539\u5230\u4e0e\u81ea\u5df1\u7684\u9879\u76ee\u5339\u914d\u3002","title":"4\u3001\u5bfc\u822a\u5b9e\u73b0\u4e4b\u8def\u5f84\u89c4\u5212"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#costmap_common_paramsyaml","text":"\u8be5\u6587\u4ef6\u662fmove_base \u5728\u5168\u5c40\u8def\u5f84\u89c4\u5212\u4e0e\u672c\u5730\u8def\u5f84\u89c4\u5212\u65f6\u8c03\u7528\u7684\u901a\u7528\u53c2\u6570\uff0c\u5305\u62ec:\u673a\u5668\u4eba\u7684\u5c3a\u5bf8\u3001\u8ddd\u79bb\u969c\u788d\u7269\u7684\u5b89\u5168\u8ddd\u79bb\u3001\u4f20\u611f\u5668\u4fe1\u606f\u7b49\u3002\u914d\u7f6e\u53c2\u8003\u5982\u4e0b: #\u673a\u5668\u4eba\u51e0\u4f55\u53c2\uff0c\u5982\u679c\u673a\u5668\u4eba\u662f\u5706\u5f62\uff0c\u8bbe\u7f6e robot_radius,\u5982\u679c\u662f\u5176\u4ed6\u5f62\u72b6\u8bbe\u7f6e footprint robot_radius: 0.12 #\u5706\u5f62 # footprint: [[-0.12, -0.12], [-0.12, 0.12], [0.12, 0.12], [0.12, -0.12]] #\u5176\u4ed6\u5f62\u72b6 obstacle_range: 3.0 # \u7528\u4e8e\u969c\u788d\u7269\u63a2\u6d4b\uff0c\u6bd4\u5982: \u503c\u4e3a 3.0\uff0c\u610f\u5473\u7740\u68c0\u6d4b\u5230\u8ddd\u79bb\u5c0f\u4e8e 3 \u7c73\u7684\u969c\u788d\u7269\u65f6\uff0c\u5c31\u4f1a\u5f15\u5165\u4ee3\u4ef7\u5730\u56fe raytrace_range: 3.5 # \u7528\u4e8e\u6e05\u9664\u969c\u788d\u7269\uff0c\u6bd4\u5982\uff1a\u503c\u4e3a 3.5\uff0c\u610f\u5473\u7740\u6e05\u9664\u4ee3\u4ef7\u5730\u56fe\u4e2d 3.5 \u7c73\u4ee5\u5916\u7684\u969c\u788d\u7269 #\u81a8\u80c0\u534a\u5f84\uff0c\u6269\u5c55\u5728\u78b0\u649e\u533a\u57df\u4ee5\u5916\u7684\u4ee3\u4ef7\u533a\u57df\uff0c\u4f7f\u5f97\u673a\u5668\u4eba\u89c4\u5212\u8def\u5f84\u907f\u5f00\u969c\u788d\u7269 inflation_radius: 0.2 #\u4ee3\u4ef7\u6bd4\u4f8b\u7cfb\u6570\uff0c\u8d8a\u5927\u5219\u4ee3\u4ef7\u503c\u8d8a\u5c0f cost_scaling_factor: 3.0 #\u5730\u56fe\u7c7b\u578b map_type: costmap #\u5bfc\u822a\u5305\u6240\u9700\u8981\u7684\u4f20\u611f\u5668 observation_sources: scan #\u5bf9\u4f20\u611f\u5668\u7684\u5750\u6807\u7cfb\u548c\u6570\u636e\u8fdb\u884c\u914d\u7f6e\u3002\u8fd9\u4e2a\u4e5f\u4f1a\u7528\u4e8e\u4ee3\u4ef7\u5730\u56fe\u6dfb\u52a0\u548c\u6e05\u9664\u969c\u788d\u7269\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u7528\u6fc0\u5149\u96f7\u8fbe\u4f20\u611f\u5668\u7528\u4e8e\u5728\u4ee3\u4ef7\u5730\u56fe\u6dfb\u52a0\u969c\u788d\u7269\uff0c\u518d\u6dfb\u52a0kinect\u7528\u4e8e\u5bfc\u822a\u548c\u6e05\u9664\u969c\u788d\u7269\u3002 scan: {sensor_frame: laser, data_type: LaserScan, topic: scan, marking: true, clearing: true} Copy","title":"costmap_common_params.yaml"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#global_costmap_paramsyaml","text":"\u8be5\u6587\u4ef6\u7528\u4e8e\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570\u8bbe\u7f6e: global_costmap: global_frame: map #\u5730\u56fe\u5750\u6807\u7cfb robot_base_frame: base_footprint #\u673a\u5668\u4eba\u5750\u6807\u7cfb # \u4ee5\u6b64\u5b9e\u73b0\u5750\u6807\u53d8\u6362 update_frequency: 1.0 #\u4ee3\u4ef7\u5730\u56fe\u66f4\u65b0\u9891\u7387 publish_frequency: 1.0 #\u4ee3\u4ef7\u5730\u56fe\u7684\u53d1\u5e03\u9891\u7387 transform_tolerance: 0.5 #\u7b49\u5f85\u5750\u6807\u53d8\u6362\u53d1\u5e03\u4fe1\u606f\u7684\u8d85\u65f6\u65f6\u95f4 static_map: true # \u662f\u5426\u4f7f\u7528\u4e00\u4e2a\u5730\u56fe\u6216\u8005\u5730\u56fe\u670d\u52a1\u5668\u6765\u521d\u59cb\u5316\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\uff0c\u5982\u679c\u4e0d\u4f7f\u7528\u9759\u6001\u5730\u56fe\uff0c\u8fd9\u4e2a\u53c2\u6570\u4e3afalse. Copy","title":"global_costmap_params.yaml"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#local_costmap_paramsyaml","text":"\u8be5\u6587\u4ef6\u7528\u4e8e\u5c40\u90e8\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570\u8bbe\u7f6e: local_costmap: global_frame: odom #\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb robot_base_frame: base_footprint #\u673a\u5668\u4eba\u5750\u6807\u7cfb update_frequency: 10.0 #\u4ee3\u4ef7\u5730\u56fe\u66f4\u65b0\u9891\u7387 publish_frequency: 10.0 #\u4ee3\u4ef7\u5730\u56fe\u7684\u53d1\u5e03\u9891\u7387 transform_tolerance: 0.5 #\u7b49\u5f85\u5750\u6807\u53d8\u6362\u53d1\u5e03\u4fe1\u606f\u7684\u8d85\u65f6\u65f6\u95f4 static_map: false #\u4e0d\u9700\u8981\u9759\u6001\u5730\u56fe\uff0c\u53ef\u4ee5\u63d0\u5347\u5bfc\u822a\u6548\u679c rolling_window: true #\u662f\u5426\u4f7f\u7528\u52a8\u6001\u7a97\u53e3\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u5728\u9759\u6001\u7684\u5168\u5c40\u5730\u56fe\u4e2d\uff0c\u5730\u56fe\u4e0d\u4f1a\u53d8\u5316 width: 3 # \u5c40\u90e8\u5730\u56fe\u5bbd\u5ea6 \u5355\u4f4d\u662f m height: 3 # \u5c40\u90e8\u5730\u56fe\u9ad8\u5ea6 \u5355\u4f4d\u662f m resolution: 0.05 # \u5c40\u90e8\u5730\u56fe\u5206\u8fa8\u7387 \u5355\u4f4d\u662f m\uff0c\u4e00\u822c\u4e0e\u9759\u6001\u5730\u56fe\u5206\u8fa8\u7387\u4fdd\u6301\u4e00\u81f4 Copy","title":"local_costmap_params.yaml"},{"location":"ROS\u5b66\u4e60\u7b14\u8bb0/#base_local_planner_params","text":"\u57fa\u672c\u7684\u5c40\u90e8\u89c4\u5212\u5668\u53c2\u6570\u914d\u7f6e\uff0c\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u8bbe\u5b9a\u4e86\u673a\u5668\u4eba\u7684\u6700\u5927\u548c\u6700\u5c0f\u901f\u5ea6\u9650\u5236\u503c\uff0c\u4e5f\u8bbe\u5b9a\u4e86\u52a0\u901f\u5ea6\u7684\u9608\u503c\u3002 TrajectoryPlannerROS: # Robot Configuration Parameters max_vel_x: 0.5 # X \u65b9\u5411\u6700\u5927\u901f\u5ea6 min_vel_x: 0.1 # X \u65b9\u5411\u6700\u5c0f\u901f\u901f max_vel_theta: 1.0 # min_vel_theta: -1.0 min_in_place_vel_theta: 1.0 acc_lim_x: 1.0 # X \u52a0\u901f\u9650\u5236 acc_lim_y: 0.0 # Y \u52a0\u901f\u9650\u5236 acc_lim_theta: 0.6 # \u89d2\u901f\u5ea6\u52a0\u901f\u9650\u5236 # Goal Tolerance Parameters\uff0c\u76ee\u6807\u516c\u5dee xy_goal_tolerance: 0.10 yaw_goal_tolerance: 0.05 # Differential-drive robot configuration # \u662f\u5426\u662f\u5168\u5411\u79fb\u52a8\u673a\u5668\u4eba holonomic_robot: false # Forward Simulation Parameters\uff0c\u524d\u8fdb\u6a21\u62df\u53c2\u6570 sim_time: 0.8 vx_samples: 18 vtheta_samples: 20 sim_granularity: 0.05 \uff084\uff09\u65b0\u5efalaunch\u6587\u4ef6\uff0c\u5c06\u9700\u8981\u7684map_server\u670d\u52a1\u3001amcl\u670d\u52a1\u3001rviz\u542f\u52a8\u96c6\u6210 <launch> <!-- \u8bbe\u7f6e\u5730\u56fe\u7684\u914d\u7f6e\u6587\u4ef6 --> <arg name=\"map\" default=\"nav.yaml\" /> <!-- \u8fd0\u884c\u5730\u56fe\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u52a0\u8f7d\u8bbe\u7f6e\u7684\u5730\u56fe--> <node name=\"map_server\" pkg=\"map_server\" type=\"map_server\" args=\"$(find navigation)/map/$(arg map)\"/> <!-- \u542f\u52a8AMCL\u8282\u70b9 --> <include file=\"$(find navigation)/launch/amcl.launch\" /> <!-- \u8fd0\u884cmove_base\u8282\u70b9 --> <include file=\"$(find navigation)/launch/path.launch\" /> <!-- \u8fd0\u884crviz --> <node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find navigation)/rviz/navigation_test.rviz\" /> </launch> \uff085\uff09\u542f\u52a8gazebo\u4eff\u771f\u73af\u5883\uff0c\u8fd0\u884c\u96c6\u6210\u540e\u7684launch\u6587\u4ef6\uff0c\u5373\u53ef\u5b9e\u73b0\u5bfc\u822a \uff086\uff09\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u770b\u5230gazebo\u548crviz\u90fd\u542f\u52a8\u4e86\uff0c\u6dfb\u52a0rviz\u7ec4\u4ef6\uff1aRobotModel\u3001Map\u3001Posearray\u3001odometry \u901a\u8fc7\u83dc\u5355\u680f\u4e0a\u65b9\u76842D Nav Goal\u8bbe\u7f6e\u76ee\u6807\u70b9\uff0c\u4f1a\u53d1\u73b0\u5c0f\u8f66\u4f1a\u81ea\u884c\u671d\u76ee\u6807\u70b9\u8fd0\u52a8 \u200b \u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7ee7\u7eed\u9009\u62e9map\u7684\u4e0d\u540c\u8bdd\u9898\uff0c\u5f97\u5230\u5168\u5c40\u548c\u5c40\u90e8\u7684\u4ee3\u4ef7\u5730\u56fe\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u6dfb\u52a0Path\uff0c\u770b\u5230\u5168\u5c40\u8def\u5f84\u89c4\u5212\u548c\u5c40\u90e8\u8def\u5f84\u89c4\u5212\u7684\u53ef\u89c6\u5316\u7ed3\u679c \u200b \u5982\u679c\u673a\u5668\u4eba\u51fa\u73b0\u8d70\u7684\u4e0d\u7a33\u7684\u60c5\u51b5\uff0c\u6447\u6447\u6643\u6643\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u53bb\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684base_local_planner_param\u4e2d\u8bbe\u7f6e\u524d\u8fdb\u6a21\u62df\u53c2\u6570\uff0c\u5c06sim_time\u8c03\u7684\u7a0d\u5fae\u5927\u4e9b","title":"base_local_planner_params"}]}